import{S as a,i as s,s as t,v as e,w as n,x as r,t as o,b as l,y as i,z as $,l as c,I as m,d as u,A as d,m as f,p as g,a as p,E as h,P as v,Q as w,u as b,o as y,j as x,B as I,C as P,r as S}from"../chunks/index-2b079c53.js";import{B as j,L as E,S as k,g as M}from"../chunks/aws-add3e71f.js";import{c as U}from"../chunks/auth-d2666f70.js";import{T as A,i as B}from"../chunks/validation-4fe040bf.js";function L(a){let s,t;return s=new E({}),{c(){e(s.$$.fragment)},l(a){n(s.$$.fragment,a)},m(a,e){r(s,a,e),t=!0},i(a){t||(o(s.$$.fragment,a),t=!0)},o(a){l(s.$$.fragment,a),t=!1},d(a){i(s,a)}}}function R(a){let s;return{c(){s=I("Sign In")},l(a){s=P(a,"Sign In")},m(a,t){p(a,s,t)},d(a){a&&u(s)}}}function z(a){let s,t,y,x,I,P,E,k,M,U,B,z,C=a[3]&&L();return I=new A({props:{id:"email",label:"E-Mail",type:"email",valid:a[1],validityMessage:"Please enter a valid email address.",value:a[0]}}),I.$on("input",a[6]),E=new A({props:{id:"Password",label:"Password",type:"password",value:a[2],autocomplete:"on"}}),E.$on("input",a[7]),M=new j({props:{type:"submit",disabled:!a[4],$$slots:{default:[R]},$$scope:{ctx:a}}}),{c(){s=$(),t=c("main"),C&&C.c(),y=$(),x=c("form"),e(I.$$.fragment),P=$(),e(E.$$.fragment),k=$(),e(M.$$.fragment),this.h()},l(a){m('[data-svelte="svelte-1b10gp1"]',document.head).forEach(u),s=d(a),t=f(a,"MAIN",{});var e=g(t);C&&C.l(e),y=d(e),x=f(e,"FORM",{});var r=g(x);n(I.$$.fragment,r),P=d(r),n(E.$$.fragment,r),k=d(r),n(M.$$.fragment,r),r.forEach(u),e.forEach(u),this.h()},h(){document.title="Sign In"},m(e,n){p(e,s,n),p(e,t,n),C&&C.m(t,null),h(t,y),h(t,x),r(I,x,null),h(x,P),r(E,x,null),h(x,k),r(M,x,null),U=!0,B||(z=v(x,"submit",w(a[5])),B=!0)},p(a,[s]){a[3]?C?8&s&&o(C,1):(C=L(),C.c(),o(C,1),C.m(t,y)):C&&(S(),l(C,1,1,(()=>{C=null})),b());const e={};2&s&&(e.valid=a[1]),1&s&&(e.value=a[0]),I.$set(e);const n={};4&s&&(n.value=a[2]),E.$set(n);const r={};16&s&&(r.disabled=!a[4]),1024&s&&(r.$$scope={dirty:s,ctx:a}),M.$set(r)},i(a){U||(o(C),o(I.$$.fragment,a),o(E.$$.fragment,a),o(M.$$.fragment,a),U=!0)},o(a){l(C),l(I.$$.fragment,a),l(E.$$.fragment,a),l(M.$$.fragment,a),U=!1},d(a){a&&u(s),a&&u(t),C&&C.d(),i(I),i(E),i(M),B=!1,z()}}}function C(a,s,t){let e,n,r,o,l="",i="",$=!1;y((()=>{r=U.subscribe((a=>{o=a,console.log("signIn",{cognitoUser:o})}))})),x((()=>{r&&r()}));return a.$$.update=()=>{1&a.$$.dirty&&t(1,e=B(l)),2&a.$$.dirty&&t(4,n=e)},[l,e,i,$,n,async function(){t(3,$=!0);const a=new URLSearchParams(window.location.search),s=a.get("path")?a.get("path"):"/";console.log("urlParams: ",s);const e=await k(l,i);U.setauthUser(e),t(3,$=!1),M(s)},a=>t(0,l=a.target.value),a=>t(2,i=a.target.value)]}export default class extends a{constructor(a){super(),s(this,a,C,z,t,{})}}
