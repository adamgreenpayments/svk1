import{S as a,i as s,s as t,v as e,w as n,x as r,t as o,b as l,y as i,z as $,l as m,I as u,d as c,A as d,m as f,p as g,a as p,E as h,P as v,Q as b,u as w,o as y,j,B as x,C as I,r as P}from"../chunks/index-2b079c53.js";import{B as S,L as k,S as E,g as M}from"../chunks/aws-add3e71f.js";import{c as U}from"../chunks/auth-d2666f70.js";import{T as A,i as B}from"../chunks/validation-4fe040bf.js";import{b as L}from"../chunks/paths-d3b7dcf1.js";function N(a){let s,t;return s=new k({}),{c(){e(s.$$.fragment)},l(a){n(s.$$.fragment,a)},m(a,e){r(s,a,e),t=!0},i(a){t||(o(s.$$.fragment,a),t=!0)},o(a){l(s.$$.fragment,a),t=!1},d(a){i(s,a)}}}function R(a){let s;return{c(){s=x("Sign In")},l(a){s=I(a,"Sign In")},m(a,t){p(a,s,t)},d(a){a&&c(s)}}}function z(a){let s,t,y,j,x,I,k,E,M,U,B,L,z=a[3]&&N();return x=new A({props:{id:"email",label:"E-Mail",type:"email",valid:a[1],validityMessage:"Please enter a valid email address.",value:a[0]}}),x.$on("input",a[6]),k=new A({props:{id:"Password",label:"Password",type:"password",value:a[2],autocomplete:"on"}}),k.$on("input",a[7]),M=new S({props:{type:"submit",disabled:!a[4],$$slots:{default:[R]},$$scope:{ctx:a}}}),{c(){s=$(),t=m("main"),z&&z.c(),y=$(),j=m("form"),e(x.$$.fragment),I=$(),e(k.$$.fragment),E=$(),e(M.$$.fragment),this.h()},l(a){u('[data-svelte="svelte-1b10gp1"]',document.head).forEach(c),s=d(a),t=f(a,"MAIN",{});var e=g(t);z&&z.l(e),y=d(e),j=f(e,"FORM",{});var r=g(j);n(x.$$.fragment,r),I=d(r),n(k.$$.fragment,r),E=d(r),n(M.$$.fragment,r),r.forEach(c),e.forEach(c),this.h()},h(){document.title="Sign In"},m(e,n){p(e,s,n),p(e,t,n),z&&z.m(t,null),h(t,y),h(t,j),r(x,j,null),h(j,I),r(k,j,null),h(j,E),r(M,j,null),U=!0,B||(L=v(j,"submit",b(a[5])),B=!0)},p(a,[s]){a[3]?z?8&s&&o(z,1):(z=N(),z.c(),o(z,1),z.m(t,y)):z&&(P(),l(z,1,1,(()=>{z=null})),w());const e={};2&s&&(e.valid=a[1]),1&s&&(e.value=a[0]),x.$set(e);const n={};4&s&&(n.value=a[2]),k.$set(n);const r={};16&s&&(r.disabled=!a[4]),2048&s&&(r.$$scope={dirty:s,ctx:a}),M.$set(r)},i(a){U||(o(z),o(x.$$.fragment,a),o(k.$$.fragment,a),o(M.$$.fragment,a),U=!0)},o(a){l(z),l(x.$$.fragment,a),l(k.$$.fragment,a),l(M.$$.fragment,a),U=!1},d(a){a&&c(s),a&&c(t),z&&z.d(),i(x),i(k),i(M),B=!1,L()}}}function C(a,s,t){let e,n,r,o,l="",i="",$=!1,m=L;afterNavigate((({from:a})=>{m=(null==a?void 0:a.url.pathname)||m})),y((()=>{r=U.subscribe((a=>{o=a,console.log("signIn",{cognitoUser:o})}))})),j((()=>{r&&r()}));return a.$$.update=()=>{1&a.$$.dirty&&t(1,e=B(l)),2&a.$$.dirty&&t(4,n=e)},[l,e,i,$,n,async function(){t(3,$=!0),new URLSearchParams(window.location.search),console.log("urlParams: ",m);const a=await E(l,i);U.setauthUser(a),t(3,$=!1),M("/")},a=>t(0,l=a.target.value),a=>t(2,i=a.target.value)]}export default class extends a{constructor(a){super(),s(this,a,C,z,t,{})}}
