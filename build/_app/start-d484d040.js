var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,o=(e,o)=>{for(var s in o||(o={}))t.call(o,s)&&i(e,s,o[s]);if(n)for(var s of n(o))r.call(o,s)&&i(e,s,o[s]);return e};import{g as s,S as a,i as u,s as c,h as l,e as f,a as d,t as h,b as p,d as g,c as v,f as y,o as m,j as b,k as w,n as S,l as _,m as E,p as A,q as C,r as I,u as T,v as k,w as O,x as P,y as x,z as N,A as L,B as M,C as U,D as R,E as D,F as j,G as B,H as F,I as z,J as q,K,L as V,M as H,N as $}from"./chunks/index-2b079c53.js";import{g as G,L as W,B as Y,a as J,s as Q,c as Z,i as X}from"./chunks/aws-add3e71f.js";import{w as ee,c as te}from"./chunks/auth-d2666f70.js";import{s as ne}from"./chunks/paths-d3b7dcf1.js";function re(e){for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;return e}const ie="undefined"==typeof window,oe=()=>{const e=s("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}},se={subscribe:e=>oe().page.subscribe(e)},ae=e=>{throw new Error(ie?`Can only ${e} session store in browser`:`Cannot ${e} session store before subscribing`)},ue={subscribe(e){const t=oe().session;return ie||(ue.set=t.set,ue.update=t.update),t.subscribe(e)},set:e=>{ae("set")},update:e=>{ae("update")}},ce=ee(!1),le=(ce.subscribe,e=>{ce.set(e)});function fe(e){return{c:S,l:S,m:S,p:S,i:S,o:S,d:S}}function de(e){let t,n,r,i;const o=[pe,he],s=[];function a(e,t){return e[0]&&void 0!==e[9]&&null!==e[9]&&e[1]?0:!e[1]||void 0!==e[9]&&null!==e[9]?-1:1}return~(n=a(e))&&(r=s[n]=o[n](e)),{c(){t=_("div"),r&&r.c(),this.h()},l(e){t=E(e,"DIV",{id:!0,class:!0});var n=A(t);r&&r.l(n),n.forEach(g),this.h()},h(){C(t,"id","user-controls"),C(t,"class","svelte-iu0h20")},m(e,r){d(e,t,r),~n&&s[n].m(t,null),i=!0},p(e,i){let u=n;n=a(e),n===u?~n&&s[n].p(e,i):(r&&(I(),p(s[u],1,1,(()=>{s[u]=null})),T()),~n?(r=s[n],r?r.p(e,i):(r=s[n]=o[n](e),r.c()),h(r,1),r.m(t,null)):r=null)},i(e){i||(h(r),i=!0)},o(e){p(r),i=!1},d(e){e&&g(t),~n&&s[n].d()}}}function he(e){let t,n,r,i;return t=new Y({props:{$$slots:{default:[ge]},$$scope:{ctx:e}}}),t.$on("click",e[3]),r=new Y({props:{$$slots:{default:[ve]},$$scope:{ctx:e}}}),r.$on("click",e[4]),{c(){k(t.$$.fragment),n=N(),k(r.$$.fragment)},l(e){O(t.$$.fragment,e),n=L(e),O(r.$$.fragment,e)},m(e,o){P(t,e,o),d(e,n,o),P(r,e,o),i=!0},p(e,n){const i={};1024&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const o={};1024&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){i||(h(t.$$.fragment,e),h(r.$$.fragment,e),i=!0)},o(e){p(t.$$.fragment,e),p(r.$$.fragment,e),i=!1},d(e){x(t,e),e&&g(n),x(r,e)}}}function pe(e){let t,n,r,i,o=e[0].username+"";return r=new Y({props:{mode:"outline",$$slots:{default:[ye]},$$scope:{ctx:e}}}),r.$on("click",e[2]),{c(){t=M(o),n=N(),k(r.$$.fragment)},l(e){t=U(e,o),n=L(e),O(r.$$.fragment,e)},m(e,o){d(e,t,o),d(e,n,o),P(r,e,o),i=!0},p(e,n){(!i||1&n)&&o!==(o=e[0].username+"")&&R(t,o);const s={};1024&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s)},i(e){i||(h(r.$$.fragment,e),i=!0)},o(e){p(r.$$.fragment,e),i=!1},d(e){e&&g(t),e&&g(n),x(r,e)}}}function ge(e){let t;return{c(){t=M("Sign In")},l(e){t=U(e,"Sign In")},m(e,n){d(e,t,n)},d(e){e&&g(t)}}}function ve(e){let t;return{c(){t=M("Sign Up")},l(e){t=U(e,"Sign Up")},m(e,n){d(e,t,n)},d(e){e&&g(t)}}}function ye(e){let t;return{c(){t=M("Sign Out")},l(e){t=U(e,"Sign Out")},m(e,n){d(e,t,n)},d(e){e&&g(t)}}}function me(e){let t,n;return t=new W({}),{c(){k(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,r){P(t,e,r),n=!0},p:S,i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function be(e){let t,n,r,i={ctx:e,current:null,token:null,hasCatch:!1,pending:me,then:de,catch:fe,value:9,blocks:[,,,]};return l(n=e[0],i),{c(){t=f(),i.block.c()},l(e){t=f(),i.block.l(e)},m(e,n){d(e,t,n),i.block.m(e,i.anchor=n),i.mount=()=>t.parentNode,i.anchor=t,r=!0},p(t,[r]){if(e=t,i.ctx=e,1&r&&n!==(n=e[0])&&l(n,i));else{const t=e.slice();t[9]=i.resolved,i.block.p(t,r)}},i(e){r||(h(i.block),r=!0)},o(e){for(let t=0;t<3;t+=1){const e=i.blocks[t];p(e)}r=!1},d(e){e&&g(t),i.block.d(e),i.token=null,i=null}}}function we(e,t,n){let r;v(e,ue,(e=>n(7,r=e)));const i=y();let o,s,a=!1;m((()=>{o=te.subscribe((e=>{e&&n(0,s=e),n(1,a=!0)}))})),b((()=>{o&&o()}));return e.$$.update=()=>{e.$$.dirty},[s,a,async function(){console.log("signOut Authenticate.svelte"),n(0,s=null),w(ue,r={},r),i("signOut"),G("/")},()=>G("/signin"),()=>G("/signup")]}class Se extends a{constructor(e){super(),u(this,e,we,be,c,{})}}function _e(e){let t,n,r,i,o,s,a,u,c,l;return{c(){t=_("div"),n=_("ul"),r=N(),i=_("li"),o=_("a"),s=M("languages"),u=N(),c=_("li"),l=M("Admin Panel"),this.h()},l(e){t=E(e,"DIV",{class:!0});var a=A(t);n=E(a,"UL",{class:!0});var f=A(n);r=L(f),i=E(f,"LI",{class:!0});var d=A(i);o=E(d,"A",{"aria-current":!0,href:!0,class:!0});var h=A(o);s=U(h,"languages"),h.forEach(g),d.forEach(g),u=L(f),c=E(f,"LI",{class:!0});var p=A(c);l=U(p,"Admin Panel"),p.forEach(g),f.forEach(g),a.forEach(g),this.h()},h(){C(o,"aria-current",a="lngs"===e[0]?"page":void 0),C(o,"href","lngs"),C(o,"class","svelte-1o703b3"),C(i,"class","svelte-1o703b3"),C(c,"class","admin svelte-1o703b3"),C(n,"class","svelte-1o703b3"),C(t,"class","subnav svelte-1o703b3")},m(e,a){d(e,t,a),D(t,n),D(n,r),D(n,i),D(i,o),D(o,s),D(n,u),D(n,c),D(c,l)},p(e,t){1&t&&a!==(a="lngs"===e[0]?"page":void 0)&&C(o,"aria-current",a)},d(e){e&&g(t)}}}function Ee(e){let t,n,r,i,o,s,a,u,c,l,v,y,m,b,w,S,I,T,R,B,F,z,q,K,V,H,$;K=new Se({}),K.$on("signOut",e[3]);let G=e[1]&&_e(e);return{c(){t=_("nav"),n=_("ul"),r=_("li"),i=_("a"),o=M("home"),a=N(),u=_("li"),c=_("a"),l=M("about"),y=N(),m=_("li"),b=_("a"),w=M("two"),I=N(),T=_("li"),R=_("a"),B=M("three"),z=N(),q=_("li"),k(K.$$.fragment),V=N(),G&&G.c(),H=f(),this.h()},l(e){t=E(e,"NAV",{class:!0});var s=A(t);n=E(s,"UL",{class:!0});var d=A(n);r=E(d,"LI",{class:!0});var h=A(r);i=E(h,"A",{"aria-current":!0,href:!0,class:!0});var p=A(i);o=U(p,"home"),p.forEach(g),h.forEach(g),a=L(d),u=E(d,"LI",{class:!0});var v=A(u);c=E(v,"A",{"aria-current":!0,href:!0,class:!0});var S=A(c);l=U(S,"about"),S.forEach(g),v.forEach(g),y=L(d),m=E(d,"LI",{class:!0});var _=A(m);b=E(_,"A",{"aria-current":!0,href:!0,class:!0});var C=A(b);w=U(C,"two"),C.forEach(g),_.forEach(g),I=L(d),T=E(d,"LI",{class:!0});var k=A(T);R=E(k,"A",{"aria-current":!0,href:!0,class:!0});var P=A(R);B=U(P,"three"),P.forEach(g),k.forEach(g),z=L(d),q=E(d,"LI",{style:!0,class:!0});var x=A(q);O(K.$$.fragment,x),x.forEach(g),d.forEach(g),s.forEach(g),V=L(e),G&&G.l(e),H=f(),this.h()},h(){C(i,"aria-current",s="/"===e[2].path?"page":void 0),C(i,"href","."),C(i,"class","svelte-1o703b3"),C(r,"class","svelte-1o703b3"),C(c,"aria-current",v="/about"===e[2].path?"page":void 0),C(c,"href","about"),C(c,"class","svelte-1o703b3"),C(u,"class","svelte-1o703b3"),C(b,"aria-current",S="/two"===e[2].path?"page":void 0),C(b,"href","two"),C(b,"class","svelte-1o703b3"),C(m,"class","svelte-1o703b3"),C(R,"aria-current",F="/three"===e[2].path?"page":void 0),C(R,"href","three"),C(R,"class","svelte-1o703b3"),C(T,"class","svelte-1o703b3"),j(q,"float","right"),C(q,"class","svelte-1o703b3"),C(n,"class","svelte-1o703b3"),C(t,"class","nav-dev svelte-1o703b3")},m(e,s){d(e,t,s),D(t,n),D(n,r),D(r,i),D(i,o),D(n,a),D(n,u),D(u,c),D(c,l),D(n,y),D(n,m),D(m,b),D(b,w),D(n,I),D(n,T),D(T,R),D(R,B),D(n,z),D(n,q),P(K,q,null),d(e,V,s),G&&G.m(e,s),d(e,H,s),$=!0},p(e,[t]){(!$||4&t&&s!==(s="/"===e[2].path?"page":void 0))&&C(i,"aria-current",s),(!$||4&t&&v!==(v="/about"===e[2].path?"page":void 0))&&C(c,"aria-current",v),(!$||4&t&&S!==(S="/two"===e[2].path?"page":void 0))&&C(b,"aria-current",S),(!$||4&t&&F!==(F="/three"===e[2].path?"page":void 0))&&C(R,"aria-current",F),e[1]?G?G.p(e,t):(G=_e(e),G.c(),G.m(H.parentNode,H)):G&&(G.d(1),G=null)},i(e){$||(h(K.$$.fragment,e),$=!0)},o(e){p(K.$$.fragment,e),$=!1},d(e){e&&g(t),x(K),e&&g(V),G&&G.d(e),e&&g(H)}}}function Ae(e,t,n){let r,i,o;v(e,ue,(e=>n(6,i=e))),v(e,se,(e=>n(2,o=e)));let s,a,u,c,l,f,d,h,{segment:p}=t,g=null,y=!1;return m((async()=>{te.subscribe((e=>{e&&n(4,g=e)})),s=J.subscribe((async e=>{e&&(f=e,console.log({Amplify:f}))})),a=J.subscribeAPI((async e=>{e&&(h=e,console.log({API:h}))})),u=J.subscribeAuth((async e=>{e&&(d=e,console.log("insta auth",{Auth:d}))})),c=J.subscribeGQL((async e=>{e&&console.log({gql:e})})),l=J.subscribeStorage((async e=>{}))})),b((()=>{s&&s(),a&&a(),u&&u(),c&&c(),l&&l()})),e.$$set=e=>{"segment"in e&&n(0,p=e.segment)},e.$$.update=()=>{if(18&e.$$.dirty&&g){console.log("nav, yes cog user:",{cognitoUser:g});const e=g.signInUserSession.accessToken.payload["cognito:groups"];n(1,y=e&&!!e.find((e=>"Admin"===e))),le(y)}64&e.$$.dirty&&n(5,({user:r}=i),r),32&e.$$.dirty&&console.log("nav:"+(new Date).getTime(),{user:r}),64&e.$$.dirty&&console.log(i)},console.log({session:ue}),[p,y,o,function(){n(4,g=null),n(1,y=null),console.log("signout"),Q(),te.setauthUser(null)},g,r,i]}class Ce extends a{constructor(e){super(),u(this,e,Ae,Ee,c,{segment:0})}}const Ie={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:dc411480-14c1-469d-888d-1e1afee43841",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_hqB9xgX6t",aws_user_pools_web_client_id:"4heescp8vmaidlvnvk4tscgjup",oauth:{},aws_cognito_username_attributes:[],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["EMAIL"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"]};var Te=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ke=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Te(arguments[t]));return e},Oe={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},Pe=function(){function e(e,t){void 0===t&&(t="WARN"),this.name=e,this.level=t}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype._log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.level;e.LOG_LEVEL&&(i=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL);var o=Oe[i],s=Oe[t];if(s>=o){var a=console.log.bind(console);"ERROR"===t&&console.error&&(a=console.error.bind(console)),"WARN"===t&&console.warn&&(a=console.warn.bind(console));var u="["+t+"] "+this._ts()+" "+this.name;if(1===n.length&&"string"==typeof n[0])a(u+" - "+n[0]);else if(1===n.length)a(u,n[0]);else if("string"==typeof n[0]){var c=n.slice(1);1===c.length&&(c=c[0]),a(u+" - "+n[0],c)}else a(u,n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["INFO"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["INFO"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["WARN"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["ERROR"],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["DEBUG"],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ke(["VERBOSE"],e))},e.LOG_LEVEL=null,e}(),xe=new Pe("Amplify"),Ne=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Logger=Pe,this.ServiceWorker=null}return e.prototype.register=function(e){xe.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):xe.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),xe.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2);n[0];var r=n[1];Object.keys(r).forEach((function(e){t._modules[e]&&(r[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}()),Le={userAgent:"aws-amplify/3.8.20 js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(Le.product=navigator.product||"",Le.navigator=navigator||null,navigator.product){case"ReactNative":Le.userAgent="aws-amplify/3.8.20 react-native",Le.isReactNative=!0;break;default:Le.userAgent="aws-amplify/3.8.20 js",Le.isReactNative=!1}var Me=function(){return Le.userAgent},Ue=function(){return(Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Re=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},De=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Re(arguments[t]));return e},je=new Pe("Hub"),Be="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";var Fe=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void je.warn("No listeners for "+e);this.patterns=De(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void je.warn("No listeners for "+e);this.listeners[e]=De(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){(void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1)&&(r===Be||je.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var i={channel:e,payload:Ue({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(o){je.error(o)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))je.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){je.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(i){je.error(i)}})),this.patterns.length>0){if(!n.message)return void je.warn("Cannot perform pattern matching without a message key");var i=n.message;this.patterns.forEach((function(t){var n=i.match(t.pattern);if(n){var r=Re(n).slice(1),o=Ue(Ue({},e),{patternInfo:r});try{t.callback(o)}catch(s){je.error(s)}}}))}},e}())("__default__"),ze=new Pe("I18n"),qe=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),ze.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),Ke=new Pe("I18n"),Ve=null,He=null,$e=function(){function e(){}return e.configure=function(t){return Ke.debug("configure I18n"),t?(Ve=Object.assign({},Ve,t.I18n||t),e.createInstance(),Ve):Ve},e.getModuleName=function(){return"I18n"},e.createInstance=function(){Ke.debug("create I18n instance"),He||(He=new qe(Ve))},e.setLanguage=function(t){return e.checkConfig(),He.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?He.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),He.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),He.putVocabularies(t)},e.checkConfig=function(){return He||(He=new qe(Ve)),!0},e}();Ne.register($e);var Ge=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],We=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},Ye=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0})),!0},Je=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},Qe=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=Ge.filter((function(e){return n.endsWith("."+e.ext)}));return r.length>0?r[0].type:t},Ze=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||("application/json"===t||"application/xml"===t||"application/sh"===t)},Xe=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},et=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},tt=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},nt=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},rt=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!ot(e))return e;var r={};for(var i in e){if(e.hasOwnProperty(i))r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:rt(e[i],t,n)}return r},it=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!ot(e))return e;var r={};for(var i in e){if(e.hasOwnProperty(i))r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:it(e[i],t,n)}return r},ot=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},st=function(){function e(){}return e.isEmpty=We,e.sortByField=Ye,e.objectLessAttributes=Je,e.filenameToContentType=Qe,e.isTextFile=Ze,e.generateRandomString=Xe,e.makeQuerablePromise=et,e.isWebWorker=tt,e.browserOrNode=nt,e.transferKeyToLowerCase=rt,e.transferKeyToUpperCase=it,e.isStrictObject=ot,e}(),at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ut(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function ct(e){var t={exports:{}};return e(t,t.exports),t.exports
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */}var lt=ct((function(e){var t,n,r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E;!function(A){var C,I,T="object"==typeof at?at:"object"==typeof self?self:"object"==typeof this?this:{};function k(e,t){return e!==T&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}C=k(T,k(e.exports)),I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t=function(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},i=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=function(e,t){return function(n,r){t(n,r,e)}},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(s,a)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},E=function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},c=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},h=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},p=function(e){return this instanceof p?(this.v=e,this):new p(e)},g=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{u(i[e](t))}catch(n){f(o[0][3],n)}}function u(e){e.value instanceof p?Promise.resolve(e.value.v).then(c,l):f(o[0][2],e)}function c(e){a("next",e)}function l(e){a("throw",e)}function f(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},v=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:p(e[r](t)),done:"return"===r}:i?i(t):t}:i}},y=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=l(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){i(r,o,(t=e[n](t)).done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}},m=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},w=function(e){return e&&e.__esModule?e:{default:e}},S=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},_=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},C("__extends",t),C("__assign",n),C("__rest",r),C("__decorate",i),C("__param",o),C("__metadata",s),C("__awaiter",a),C("__generator",u),C("__exportStar",c),C("__createBinding",E),C("__values",l),C("__read",f),C("__spread",d),C("__spreadArrays",h),C("__await",p),C("__asyncGenerator",g),C("__asyncDelegator",v),C("__asyncValues",y),C("__makeTemplateObject",m),C("__importStar",b),C("__importDefault",w),C("__classPrivateFieldGet",S),C("__classPrivateFieldSet",_)}()})),ft=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dt=Math.pow(2,53)-1,ht=Object.defineProperty({BLOCK_SIZE:64,DIGEST_LENGTH:32,KEY:ft,INIT:[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],MAX_HASHABLE_LENGTH:dt},"__esModule",{value:!0}),pt=function(){function e(){this.state=Int32Array.from(ht.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>ht.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===ht.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%ht.BLOCK_SIZE>=ht.BLOCK_SIZE-8){for(var r=this.bufferLength;r<ht.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<ht.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(ht.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(ht.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(ht.DIGEST_LENGTH);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=0;l<ht.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var f=this.temp[l-2],d=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[l-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[l]=(d+this.temp[l-7]|0)+(h+this.temp[l-16]|0)}var p=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&u)|0)+(c+(ht.KEY[l]+this.temp[l]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;c=u,u=a,a=s,s=o+p|0,o=i,i=r,r=n,n=p+g|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=s,t[5]+=a,t[6]+=u,t[7]+=c},e}(),gt=Object.defineProperty({RawSha256:pt},"__esModule",{value:!0});var vt=ut(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromUtf8:function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},toUtf8:function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}})),yt=function(){function e(e){if(this.hash=new gt.RawSha256,e){this.outer=new gt.RawSha256;var t=function(e){var t=mt(e);if(t.byteLength>ht.BLOCK_SIZE){var n=new gt.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(ht.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(ht.BLOCK_SIZE);n.set(t);for(var r=0;r<ht.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(mt(e))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return lt.__awaiter(this,void 0,void 0,(function(){return lt.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function mt(e){return"string"==typeof e?vt.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}for(var bt=Object.defineProperty({Sha256:yt},"__esModule",{value:!0}),wt=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),lt.__exportStar(bt,t)})),St={},_t={},Et=0;Et<256;Et++){var At=Et.toString(16).toLowerCase();1===At.length&&(At="0"+At),St[Et]=At,_t[At]=Et}function Ct(e){for(var t="",n=0;n<e.byteLength;n++)t+=St[e[n]];return t}
/*! https://mths.be/punycode v1.3.2 by @mathias */var It=ct((function(e,t){!function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o="object"==typeof at&&at;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var s,a,u=2147483647,c=36,l=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function v(e){throw RangeError(h[e])}function y(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+y((e=e.replace(d,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function w(e){return y(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=c)e=p(e/35);return p(r+36*e/(e+38))}function E(e){var t,n,r,i,o,s,a,l,f,d,h,g=[],y=e.length,m=0,b=128,S=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=m,s=1,a=c;i>=y&&v("invalid-input"),((l=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:c)>=c||l>p((u-m)/s))&&v("overflow"),m+=l*s,!(l<(f=a<=S?1:a>=S+26?26:a-S));a+=c)s>p(u/(d=c-f))&&v("overflow"),s*=d;S=_(m-o,t=g.length+1,0==o),p(m/t)>u-b&&v("overflow"),b+=p(m/t),m%=t,g.splice(m++,0,b)}return w(g)}function A(e){var t,n,r,i,o,s,a,l,f,d,h,y,m,w,E,A=[];for(y=(e=b(e)).length,t=128,n=0,o=72,s=0;s<y;++s)(h=e[s])<128&&A.push(g(h));for(r=i=A.length,i&&A.push("-");r<y;){for(a=u,s=0;s<y;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>p((u-n)/(m=r+1))&&v("overflow"),n+=(a-t)*m,t=a,s=0;s<y;++s)if((h=e[s])<t&&++n>u&&v("overflow"),h==t){for(l=n,f=c;!(l<(d=f<=o?1:f>=o+26?26:f-o));f+=c)E=l-d,w=c-d,A.push(g(S(d+E%w,0))),l=p(E/w);A.push(g(S(l,0))),o=_(n,m,r==i),n=0,++r}++n,++t}return A.join("")}if(s={version:"1.3.2",ucs2:{decode:b,encode:w},decode:E,encode:A,toASCII:function(e){return m(e,(function(e){return f.test(e)?"xn--"+A(e):e}))},toUnicode:function(e){return m(e,(function(e){return l.test(e)?E(e.slice(4).toLowerCase()):e}))}},r&&i)if(e.exports==r)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else n.punycode=s}(at)})),Tt=function(e){return"string"==typeof e},kt=function(e){return"object"==typeof e&&null!==e},Ot=function(e){return null===e},Pt=function(e){return null==e};function xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Nt=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,l,f,d,h=e[u].replace(o,"%20"),p=h.indexOf(n);p>=0?(c=h.substr(0,p),l=h.substr(p+1)):(c=h,l=""),f=decodeURIComponent(c),d=decodeURIComponent(l),xt(i,f)?Array.isArray(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i},Lt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Mt=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var i=encodeURIComponent(Lt(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return i+encodeURIComponent(Lt(e))})).join(t):i+encodeURIComponent(Lt(e[r]))})).join(t):r?encodeURIComponent(Lt(r))+n+encodeURIComponent(Lt(e)):""},Ut=ct((function(e,t){t.decode=t.parse=Nt,t.encode=t.stringify=Mt})),Rt=Qt,Dt=function(e){Tt(e)&&(e=Qt(e));return e instanceof jt?e.format():jt.prototype.format.call(e)};function jt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Bt=/^([a-z0-9.+-]+:)/i,Ft=/:[0-9]*$/,zt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,qt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Kt=["'"].concat(qt),Vt=["%","/","?",";","#"].concat(Kt),Ht=["/","?","#"],$t=/^[+a-z0-9A-Z_-]{0,63}$/,Gt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Wt={javascript:!0,"javascript:":!0},Yt={javascript:!0,"javascript:":!0},Jt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Qt(e,t,n){if(e&&kt(e)&&e instanceof jt)return e;var r=new jt;return r.parse(e,t,n),r}jt.prototype.parse=function(e,t,n){if(!Tt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(i);if(s=s.trim(),!n&&1===e.split("#").length){var a=zt.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?Ut.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=Bt.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(n||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&Yt[u]||(s=s.substr(2),this.slashes=!0)}if(!Yt[u]&&(l||u&&!Jt[u])){for(var f,d,h=-1,p=0;p<Ht.length;p++){-1!==(g=s.indexOf(Ht[p]))&&(-1===h||g<h)&&(h=g)}-1!==(d=-1===h?s.lastIndexOf("@"):s.lastIndexOf("@",h))&&(f=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(f)),h=-1;for(p=0;p<Vt.length;p++){var g;-1!==(g=s.indexOf(Vt[p]))&&(-1===h||g<h)&&(h=g)}-1===h&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),m=(p=0,y.length);p<m;p++){var b=y[p];if(b&&!b.match($t)){for(var w="",S=0,_=b.length;S<_;S++)b.charCodeAt(S)>127?w+="x":w+=b[S];if(!w.match($t)){var E=y.slice(0,p),A=y.slice(p+1),C=b.match(Gt);C&&(E.push(C[1]),A.unshift(C[2])),A.length&&(s="/"+A.join(".")+s),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=It.toASCII(this.hostname));var I=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+I,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!Wt[c])for(p=0,m=Kt.length;p<m;p++){var k=Kt[p];if(-1!==s.indexOf(k)){var O=encodeURIComponent(k);O===k&&(O=escape(k)),s=s.split(k).join(O)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var x=s.indexOf("?");if(-1!==x?(this.search=s.substr(x),this.query=s.substr(x+1),t&&(this.query=Ut.parse(this.query)),s=s.slice(0,x)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Jt[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){I=this.pathname||"";var N=this.search||"";this.path=I+N}return this.href=this.format(),this},jt.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&kt(this.query)&&Object.keys(this.query).length&&(o=Ut.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Jt[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},jt.prototype.resolve=function(e){return this.resolveObject(Qt(e,!1,!0)).format()},jt.prototype.resolveObject=function(e){if(Tt(e)){var t=new jt;t.parse(e,!1,!0),e=t}for(var n=new jt,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(n[u]=e[u])}return Jt[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Jt[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var f=c[l];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Yt[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=v||g||n.host&&e.pathname,m=y,b=n.pathname&&n.pathname.split("/")||[],w=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!Jt[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),y=y&&(""===d[0]||""===b[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),n.search=e.search,n.query=e.query;else if(!Pt(e.search)){if(w)n.hostname=n.host=b.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=e.search,n.query=e.query,Ot(n.pathname)&&Ot(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=b.slice(-1)[0],_=(n.host||e.host||b.length>1)&&("."===S||".."===S)||""===S,E=0,A=b.length;A>=0;A--)"."===(S=b[A])?b.splice(A,1):".."===S?(b.splice(A,1),E++):E&&(b.splice(A,1),E--);if(!y&&!m)for(;E--;E)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),_&&"/"!==b.join("/").substr(-1)&&b.push("");var C,I=""===b[0]||b[0]&&"/"===b[0].charAt(0);w&&(n.hostname=n.host=I?"":b.length?b.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(y=y||n.host&&b.length)&&!I&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),Ot(n.pathname)&&Ot(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},jt.prototype.parseHost=function(){var e=this.host,t=Ft.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Zt,Xt=(Zt=function(e,t){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Zt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),en=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},tn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},nn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},rn=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nn(arguments[t]));return e},on=new Pe("Util"),sn=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return Xt(t,e),t}(Error);function an(e,t,n,r){return void 0===r&&(r=1),en(this,void 0,void 0,(function(){var i,o;return tn(this,(function(s){switch(s.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");on.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(t)),s.label=1;case 1:return s.trys.push([1,3,,8]),[4,e.apply(void 0,rn(t))];case 2:return[2,s.sent()];case 3:if(i=s.sent(),on.debug("error on "+e.name,i),(a=i)&&a.nonRetryable)throw on.debug(e.name+" non retryable error",i),i;return o=n(r,t,i),on.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise((function(e){return setTimeout(e,o)}))];case 4:return s.sent(),[4,an(e,t,n,r+1)];case 5:return[2,s.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}var a}))}))}var un=function(e,t,n){return void 0===n&&(n=3e5),an(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))},cn=ct((function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var u=a("iterator"),c=a("observable"),l=a("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function d(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:S}function h(e){h.log?h.log(e):setTimeout((function(){throw e}))}function p(e){Promise.resolve().then((function(){try{e()}catch(t){h(t)}}))}function g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(r){h(r)}}function v(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function y(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(v(e),!i)throw n;i.call(r,n);break;case"complete":v(e),i&&i.call(r)}}catch(o){h(o)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function m(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void p((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(y(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void y(e,t,n);e._queue.push({type:t,value:n})}}var b=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new w(this);try{this._cleanup=r.call(void 0,i)}catch(o){i.error(o)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(v(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),w=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){m(this._subscription,"next",e)}},{key:"error",value:function(e){m(this._subscription,"error",e)}},{key:"complete",value:function(){m(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),S=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new b(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(d(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(d(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=d(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n((function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(a){return n.error(a)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=d(this);return new i((function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=d(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(a){return r.error(a)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,c);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return function(e){return e instanceof S}(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(s("iterator")&&(r=f(t,u)))return new n((function(e){p((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(e.next(u),e.closed)return}}catch(c){i=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){p((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i((function(e){p((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:l,get:function(){return this}}]),e}();t.Observable=S,o()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:c,hostReportError:h},configurable:!0})})).Observable,ln={clockOffset:0,getDateWithClockOffset:function(){return ln.clockOffset?new Date((new Date).getTime()+ln.clockOffset):new Date},getClockOffset:function(){return ln.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=ln.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6];return new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(o),Number(s),Number(a)))},isClockSkewed:function(e){return Math.abs(e.getTime()-ln.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean("BadRequestException"===t["x-amzn-errortype"]&&(t.date||t.Date))},setClockOffset:function(e){ln.clockOffset=e}};var fn=function(){return(fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},dn=new Pe("Signer"),hn=function(e,t){var n=new wt.Sha256(e);return n.update(t),n.digestSync()},pn=function(e){var t=e||"",n=new wt.Sha256;return n.update(t),Ct(n.digestSync())},gn=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},vn=function(e){var t,n,r=Rt(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),gn(e.headers),pn(e.data)].join("\n")},yn=function(e){var t=(Rt(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},mn=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},bn=function(e,t,n,r){return[e,n,r,pn(t)].join("\n")},wn=function(e,t,n){dn.debug(n);var r=hn("AWS4"+e,t),i=hn(r,n.region),o=hn(i,n.service);return hn(o,"aws4_request")},Sn=function(e,t){return Ct(hn(e,t))},_n=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=ln.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=Rt(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=vn(e);dn.debug(s);var a=n||yn(e),u=mn(i,a.region,a.service),c=bn("AWS4-HMAC-SHA256",s,r,u),l=wn(t.secret_key,i,a),f=Sn(l,c),d=function(e,t,n,r,i){return[e+" Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}("AWS4-HMAC-SHA256",t.access_key,u,gn(e.headers),f);return e.headers.Authorization=d,e},e.signUrl=function(e,t,n,r){var i="object"==typeof e?e.url:e,o="object"==typeof e?e.method:"GET",s="object"==typeof e?e.body:void 0,a=ln.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),u=a.substr(0,8),c=Rt(i,!0,!0);c.search;var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(c,["search"]),f={host:l.host},d=n||yn({url:Dt(l)}),h=d.region,p=d.service,g=mn(u,h,p),v=t.session_token&&"iotdevicegateway"!==p,y=fn(fn(fn({"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":[t.access_key,g].join("/"),"X-Amz-Date":a.substr(0,16)},v?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(f).join(",")}),m=vn({method:o,url:Dt(fn(fn({},l),{query:fn(fn({},l.query),y)})),headers:f,data:s}),b=bn("AWS4-HMAC-SHA256",m,a,g),w=wn(t.secret_key,u,{region:h,service:p}),S=Sn(w,b),_=fn({"X-Amz-Signature":S},t.session_token&&{"X-Amz-Security-Token":t.session_token});return Dt({protocol:l.protocol,slashes:!0,hostname:l.hostname,port:l.port,pathname:l.pathname,query:fn(fn(fn({},l.query),y),_)})},e}(),En=new Pe("Parser"),An=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),En.debug("parse config",e,"to amplifyconfig",n),n},Cn=function(){function e(){}return e.parseMobilehubConfig=An,e}(),In=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Tn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},kn=new Pe("CognitoCredentials"),On=new Promise((function(e,t){return nt().isBrowser?(window.gapi&&window.gapi.auth2?window.gapi.auth2:null)?(kn.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(kn.debug("not in the browser, directly resolved"),e())})),Pn=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return In(this,void 0,void 0,(function(){return Tn(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(kn.debug("need to wait for the Google SDK loaded"),[4,On]);case 1:e.sent(),this.initialized=!0,kn.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return nt().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(kn.debug("google Auth undefined"),n(new sn("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(kn.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})})).catch((function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new sn("Failed to reload google auth response"))}))):n(new sn("User is not signed in with Google"))})).catch((function(e){kn.debug("Failed to refresh google token",e),n(new sn("Failed to refresh google token"))}))})):(kn.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),xn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ln=new Pe("CognitoCredentials"),Mn=new Promise((function(e,t){return nt().isBrowser?window.FB?(Ln.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(Ln.debug("not in the browser, directly resolved"),e())})),Un=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return xn(this,void 0,void 0,(function(){return Nn(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(Ln.debug("need to wait for the Facebook SDK loaded"),[4,Mn]);case 1:e.sent(),this.initialized=!0,Ln.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(nt().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return Ln.debug(t),Promise.reject(new sn(t))}return new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+(new Date).getTime();if(!i){s="the jwtToken is undefined";Ln.debug(s),n(new sn(s))}t({token:i,expires_at:o})}else{var s="no response from facebook when refreshing the jwt token";Ln.debug(s),n(new sn(s))}}),{scope:"public_profile,email"})}))},e}(),Rn=new Pn,Dn=new Un,jn={},Bn=function(){function e(){}return e.setItem=function(e,t){return jn[e]=t,jn[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(jn,e)?jn[e]:void 0},e.removeItem=function(e){return delete jn[e]},e.clear=function(){return jn={}},e}(),Fn=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=Bn}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),zn=function(e,t){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function qn(e,t){function n(){this.constructor=e}zn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Kn=function(){return(Kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Vn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Hn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function $n(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Gn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Yn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wn(arguments[t]));return e}function Jn(e){return this instanceof Jn?(this.v=e,this):new Jn(e)}function Qn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof Jn?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Zn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Gn(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xn=function(e,t){return(Xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var tr=function(){return(tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function nr(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function rr(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var ir="3.6.1",or=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}})),sr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}));var ar=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},ur=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromUtf8:ar,toUtf8:ur}),lr={};var fr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",locateWindow:function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:lr}}),dr=ut(cr),hr=ut(fr),pr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var i=hr.locateWindow().msCrypto.subtle.importKey("raw",r(e),sr.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n("ImportKey completed without importing key.")},i.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return hr.locateWindow().msCrypto.subtle.sign(sr.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(hr.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;or.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function r(e){return"string"==typeof e?dr.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),gr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){hr.locateWindow().crypto.subtle.importKey("raw",r(e),sr.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!or.isEmptyData(e)){var t=r(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return hr.locateWindow().crypto.subtle.sign(sr.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):or.isEmptyData(this.toHash)?Promise.resolve(sr.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return hr.locateWindow().crypto.subtle.digest(sr.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function r(e){return"string"==typeof e?dr.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),vr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1})),yr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var n=function(){function e(){this.state=Int32Array.from(vr.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>vr.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===vr.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%vr.BLOCK_SIZE>=vr.BLOCK_SIZE-8){for(var r=this.bufferLength;r<vr.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<vr.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(vr.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(vr.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(vr.DIGEST_LENGTH);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=0;l<vr.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var f=this.temp[l-2],d=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[l-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[l]=(d+this.temp[l-7]|0)+(h+this.temp[l-16]|0)}var p=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&u)|0)+(c+(vr.KEY[l]+this.temp[l]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;c=u,u=a,a=s,s=o+p|0,o=i,i=r,r=n,n=p+g|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=s,t[5]+=a,t[6]+=u,t[7]+=c},e}();t.RawSha256=n})),mr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=function(){function e(e){if(this.hash=new yr.RawSha256,e){this.outer=new yr.RawSha256;var t=function(e){var t=r(e);if(t.byteLength>vr.BLOCK_SIZE){var n=new yr.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(vr.BLOCK_SIZE);return i.set(t),i}(e),n=new Uint8Array(vr.BLOCK_SIZE);n.set(t);for(var i=0;i<vr.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;this.hash.update(t),this.outer.update(n);for(i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(r(e))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return lt.__awaiter(this,void 0,void 0,(function(){return lt.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function r(e){return"string"==typeof e?dr.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),br=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),lt.__exportStar(mr,t)})),wr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&n.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return lt.__awaiter(this,void 0,void 0,(function(){var t;return lt.__generator(this,(function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}})),Sr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),lt.__exportStar(wr,t)}));Object.defineProperty(exports,"__esModule",{value:!0});var _r=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});Object.defineProperty(exports,"__esModule",{value:!0});var Er=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});Object.defineProperty(exports,"__esModule",{value:!0});var Ar=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});Object.defineProperty(exports,"__esModule",{value:!0});var Cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),Ir=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,i=t.subtle;return n.map((function(e){return i[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1}})),Tr=ut(_r),kr=ut(Er),Or=ut(Ar),Pr=ut(Cr),xr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),lt.__exportStar(Tr,t),lt.__exportStar(kr,t),lt.__exportStar(Or,t),lt.__exportStar(Pr,t),lt.__exportStar(Ir,t)})),Nr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=function(){function e(e){Sr.supportsWebCrypto(hr.locateWindow())?this.hash=new gr.Sha256(e):xr.isMsWindow(hr.locateWindow())?this.hash=new pr.Sha256(e):this.hash=new br.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=n})),Lr=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,lt.__exportStar(Nr,t),Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return pr.Sha256}}),Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return gr.Sha256}})})),Mr=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Ur=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Kn(Kn({},this),{headers:Kn({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return Kn(Kn({},e),((r={})[n]=Array.isArray(i)?Yn(i):i,r))}),{}))),n},e}();var Rr=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Dr)},Dr=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function jr(e){var t,n,r=[];try{for(var i=Gn(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=Rr(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+Rr(a[u]));else{var l=s;(a||"string"==typeof a)&&(l+="="+Rr(a)),r.push(l)}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}for(var Br=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var s=jr(e.query);s&&(o+="?"+s)}var a=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(a?":"+a:"")+o,l={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(l.signal=n);var f,d=new Request(c,l),h=[fetch(d).then((function(e){var t,n,r=e.headers,i={};try{for(var o=Gn(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new Mr({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new Mr({headers:i,statusCode:e.status,body:t})}}))})),(f=r,void 0===f&&(f=0),new Promise((function(e,t){f&&setTimeout((function(){var e=new Error("Request did not complete within "+f+" ms");e.name="TimeoutError",t(e)}),f)})))];return n&&h.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(h)},e}(),Fr={},zr=new Array(64),qr=0,Kr="A".charCodeAt(0),Vr="Z".charCodeAt(0);qr+Kr<=Vr;qr++){var Hr=String.fromCharCode(qr+Kr);Fr[Hr]=qr,zr[qr]=Hr}for(qr=0,Kr="a".charCodeAt(0),Vr="z".charCodeAt(0);qr+Kr<=Vr;qr++){Hr=String.fromCharCode(qr+Kr);var $r=qr+26;Fr[Hr]=$r,zr[$r]=Hr}for(qr=0;qr<10;qr++){Fr[qr.toString(10)]=qr+52;Hr=qr.toString(10),$r=qr+52;Fr[Hr]=$r,zr[$r]=Hr}Fr["+"]=62,zr[62]="+",Fr["/"]=63,zr[63]="/";function Gr(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)"="!==e[a]?(o|=Fr[e[a]]<<6*(u-a),s+=6):o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),f=0;f<l;f++){var d=8*(l-f-1);r.setUint8(c+f,(o&255<<d)>>d)}}return new Uint8Array(n)}function Wr(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=zr[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}var Yr=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Hn(this,void 0,void 0,(function(){var t,n;return $n(this,(function(r){switch(r.label){case 0:return[4,Jr(e)];case 1:return t=r.sent(),n=Gr(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return Hn(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return $n(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function Jr(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}for(var Qr=function(e){return function(){return Promise.reject(e)}},Zr={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Xr=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Hn(void 0,void 0,void 0,(function(){var i;return $n(this,(function(o){return(null===(i=null==e?void 0:e.retryStrategy)||void 0===i?void 0:i.mode)&&(n.userAgent=Yn(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]}))}))}}}(e),Zr)}}},ei=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],ti=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ni=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ri=[500,502,503,504],ii=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||ti.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},oi=ct((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),si=[],ai=0;ai<256;++ai)si[ai]=(ai+256).toString(16).substr(1);var ui,ci,li=function(e,t){var n=t||0,r=si;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")},fi=0,di=0;var hi=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||ui,s=void 0!==e.clockseq?e.clockseq:ci;if(null==o||null==s){var a=oi();null==o&&(o=ui=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=ci=16383&(a[6]<<8|a[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:di+1,l=u-fi+(c-di)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||u>fi)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fi=u,di=c,ci=s;var f=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var d=u/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var h=0;h<6;++h)i[r+h]=o[h];return t||li(i)};var pi=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||oi)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||li(i)},gi=pi;gi.v1=hi,gi.v4=pi;var vi=gi,yi=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},mi=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return ei.includes(e.name)}(e)||ii(e)||function(e){var t;return ni.includes(e.name)||ri.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},bi=function(){function e(e,t){var n,r,i,o,s,a,u,c;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:mi,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:yi,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(s=o=500,a=o,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=a},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return a-=t,t},releaseRetryTokens:function(e){a+=null!=e?e:1,a=Math.min(a,s)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Hn(this,void 0,void 0,(function(){var e;return $n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return Hn(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return $n(this,(function(l){switch(l.label){case 0:return r=0,i=0,[4,this.getMaxAttempts()];case 1:o=l.sent(),s=t.request,Ur.isInstance(s)&&(s.headers["amz-sdk-invocation-id"]=vi.v4()),a=function(){var a,c,l,f,d;return $n(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),Ur.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+o),[4,e(t)];case 1:return a=h.sent(),c=a.response,l=a.output,u.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=r+1,l.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:l}}];case 2:return f=h.sent(),r++,u.shouldRetry(f,r,o)?(n=u.retryQuota.retrieveRetryTokens(f),d=u.delayDecider(ii(f)?500:100,r),i+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=r,f.$metadata.totalRetryDelay=i,f;case 5:return[2]}}))},u=this,l.label=2;case 2:return[5,a()];case 3:return"object"==typeof(c=l.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),wi=function(e){var t=Si(e.maxAttempts);return Kn(Kn({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new bi(t)})},Si=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function _i(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}const Ei={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ai={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ci={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Ii={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ti={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ki{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=ki.getVersionPrecision(e),i=ki.getVersionPrecision(t);let o=Math.max(r,i),s=0;const a=ki.map([e,t],(e=>{const t=o-ki.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return ki.map(n.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(n&&(s=o-Math.min(r,i)),o-=1;o>=s;){if(a[0][o]>a[1][o])return 1;if(a[0][o]===a[1][o]){if(o===s)return 0;o-=1}else if(a[0][o]<a[1][o])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,i;if(Object.assign)return Object.assign(e,...t);for(r=0,i=t.length;r<i;r+=1){const e=t[r];if("object"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return Ei[e]}static getBrowserTypeByAlias(e){return Ai[e]||""}}const Oi=/version\/(\d+(\.?_?\d+)+)/i,Pi=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=ki.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=ki.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=ki.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=ki.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=ki.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=ki.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=ki.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=ki.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=ki.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=ki.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=ki.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=ki.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=ki.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=ki.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=ki.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=ki.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=ki.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=ki.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=ki.getFirstMatch(Oi,e)||ki.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=ki.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=ki.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=ki.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=ki.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=ki.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=ki.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=ki.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=ki.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=ki.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=ki.getFirstMatch(Oi,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:ki.getFirstMatch(t,e),version:ki.getSecondMatch(t,e)}}}];var xi=[{test:[/Roku\/DVP/],describe(e){const t=ki.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Ii.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=ki.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Ii.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=ki.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=ki.getWindowsVersionName(t);return{name:Ii.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Ii.iOS},n=ki.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=ki.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=ki.getMacOSVersionName(t),r={name:Ii.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=ki.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Ii.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=ki.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=ki.getAndroidVersionName(t),r={name:Ii.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=ki.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:Ii.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=ki.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||ki.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||ki.getFirstMatch(/\bbb(\d+)/i,e);return{name:Ii.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=ki.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Ii.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=ki.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Ii.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Ii.Linux})},{test:[/CrOS/],describe:()=>({name:Ii.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=ki.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Ii.PlayStation4,version:t}}}],Ni=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=ki.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:Ci.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Ci.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Ci.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Ci.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Ci.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Ci.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Ci.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=ki.getFirstMatch(/(ipod|iphone)/i,e);return{type:Ci.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Ci.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Ci.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:Ci.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:Ci.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:Ci.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:Ci.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:Ci.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:Ci.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:Ci.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:Ci.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:Ci.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:Ci.tv})}],Li=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:Ti.Blink};const t=ki.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ti.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:Ti.Trident},n=ki.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:Ti.Presto},n=ki.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:Ti.Gecko},n=ki.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ti.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:Ti.WebKit},n=ki.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class Mi{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ki.find(Pi,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ki.find(xi,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=ki.find(Ni,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ki.find(Li,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ki.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let i=0;if(Object.keys(e).forEach((o=>{const s=e[o];"string"==typeof s?(r[o]=s,i+=1):"object"==typeof s&&(t[o]=s,n+=1)})),n>0){const e=Object.keys(t),n=ki.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=ki.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(i>0){const e=Object.keys(r),t=ki.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const i=ki.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(ki.compareVersions(i,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */var Ui=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Hn(void 0,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,l;return $n(this,(function(f){return e=(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Mi(e,t)}static parse(e){return new Mi(e).getResult()}static get BROWSER_MAP(){return Ai}static get ENGINE_MAP(){return Ti}static get OS_MAP(){return Ii}static get PLATFORMS_MAP(){return Ci}}.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/"+((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(s=null==e?void 0:e.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser",(null!==(u=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.name)&&void 0!==u?u:"unknown")+"_"+(null!==(l=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.version)&&void 0!==l?l:"unknown")]],t&&r.push(["api/"+t,n]),[2,r]}))}))}},Ri=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Di=new Set(["cn-north-1","cn-northwest-1"]),ji=new Set(["us-iso-east-1"]),Bi=new Set(["us-isob-east-1"]),Fi=new Set(["us-gov-east-1","us-gov-west-1"]);var zi=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=Gn(e.split("&")),o=i.next();!o.done;o=i.next()){var s=Wn(o.value.split("="),2),a=s[0],u=s[1],c=void 0===u?null:u;a=decodeURIComponent(a),c&&(c=decodeURIComponent(c)),a in r?Array.isArray(r[a])?r[a].push(c):r[a]=[r[a],c]:r[a]=c}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}},qi={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:Ri.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Di.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ji.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Bi.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Fi.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(tr({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:zi},Ki=tr(tr({},qi),{runtime:"browser",base64Decoder:Gr,base64Encoder:Wr,bodyLengthChecker:_i,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Ui({serviceId:qi.serviceId,clientVersion:ir}),maxAttempts:3,region:Qr("Region is missing"),requestHandler:new Br,sha256:Lr.Sha256,streamCollector:Yr,utf8Decoder:ar,utf8Encoder:ur}),Vi=function(e){var t;return Kn(Kn({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Hi(e):function(){return $i(e)},isCustomEndpoint:!!e.endpoint})},Hi=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},$i=function(e){return Hn(void 0,void 0,void 0,(function(){var t,n,r,i,o;return $n(this,(function(s){switch(s.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=s.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))},Gi=function(e){if(!e.region)throw new Error("Region is missing");return Kn(Kn({},e),{region:Wi(e.region)})},Wi=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};var Yi={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ji=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Hn(t,void 0,void 0,(function(){var t,i,o,s,a;return $n(this,(function(u){return t=r.request,Ur.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(s=e(i))&&(t.headers=Kn(Kn({},t.headers),((a={})["content-length"]=String(s),a)))),[2,n(Kn(Kn({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),Yi)}}};var Qi={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Zi=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Hn(void 0,void 0,void 0,(function(){var r,i;return $n(this,(function(o){return Ur.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),Qi)}}},Xi={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},eo=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return Hn(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f;return $n(this,(function(d){switch(d.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,a=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=d.sent(),s?("function"==typeof s.info&&(c=u.output,l=c.$metadata,f=Vn(c,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:a(f),metadata:l})),[2,u]):[2,u]}}))}))}}),Xi)}}},to="X-Amz-Date".toLowerCase(),no=["authorization",to,"date"],ro="X-Amz-Signature".toLowerCase(),io="X-Amz-Security-Token".toLowerCase(),oo={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},so=/^proxy-/,ao=/^sec-/,uo="AWS4-HMAC-SHA256-PAYLOAD",co={},lo=[];function fo(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function ho(e,t,n){var r=new e(t);return r.update(n),r.digest()}function po(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Gn(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in oo||(null==t?void 0:t.has(l))||so.test(l)||ao.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function go(e,t){var n=e.headers,r=e.body;return Hn(this,void 0,void 0,(function(){var e,i,o,s,a,u,c;return $n(this,(function(l){switch(l.label){case 0:try{for(e=Gn(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(d){u={error:d}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((s=new t).update(r),a=Ct,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f}))}))}function vo(e){var t=e.headers,n=e.query,r=Vn(e,["headers","query"]);return Kn(Kn({},r),{headers:Kn({},t),query:n?yo(n):void 0})}function yo(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Kn(Kn({},t),((r={})[n]=Array.isArray(i)?Yn(i):i,r))}),{})}function mo(e){var t,n;e="function"==typeof e.clone?e.clone():vo(e);try{for(var r=Gn(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;no.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function bo(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var wo=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Eo(r),this.credentialProvider=Ao(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Hn(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E,A,C;return $n(this,(function(I){switch(I.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return f=I.sent(),null==c?[3,2]:(h=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=I.sent(),I.label=4;case 4:return d=h,p=So(r),g=p.longDate,v=p.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=fo(v,d,null!=l?l:this.service),m=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():vo(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var c=Gn(Object.keys(s)),l=c.next();!l.done;l=c.next()){var f=l.value,d=f.toLowerCase();"x-amz-"!==d.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(d))||(u[f]=s[f],delete s[f])}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Kn(Kn({},e),{headers:s,query:u})}(mo(e),{unhoistableHeaders:a}),f.sessionToken&&(m.query["X-Amz-Security-Token"]=f.sessionToken),m.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",m.query["X-Amz-Credential"]=f.accessKeyId+"/"+y,m.query["X-Amz-Date"]=g,m.query["X-Amz-Expires"]=o.toString(10),b=po(m,s,u),m.query["X-Amz-SignedHeaders"]=_o(b),w=m.query,S="X-Amz-Signature",_=this.getSignature,E=[g,y,this.getSigningKey(f,d,v,l)],A=this.createCanonicalRequest,C=[m,b],[4,go(e,this.sha256)]);case 5:return[4,_.apply(this,E.concat([A.apply(this,C.concat([I.sent()]))]))];case 6:return w[S]=I.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return Hn(this,void 0,void 0,(function(){return $n(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return Hn(this,void 0,void 0,(function(){var e,t,i,c,l,f,d,h,p,g,v;return $n(this,(function(y){switch(y.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=y.sent(),y.label=3;case 3:return e=t,i=So(o),c=i.shortDate,l=i.longDate,f=fo(c,e,null!=u?u:this.service),[4,go({headers:{},body:r},this.sha256)];case 4:return d=y.sent(),(h=new this.sha256).update(n),g=Ct,[4,h.digest()];case 5:return p=g.apply(void 0,[y.sent()]),v=[uo,l,f,s,p,d].join("\n"),[2,this.signString(v,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return Hn(this,void 0,void 0,(function(){var t,n,r,a,u,c,l,f;return $n(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=d.sent(),d.label=4;case 4:return n=r,a=So(i).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(l.apply(c,[void 0,d.sent()]))).update(e),f=Ct,[4,u.digest()];case 6:return[2,f.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return Hn(this,void 0,void 0,(function(){var t,n,r,c,l,f,d,h,p,g,v;return $n(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=y.sent(),y.label=4;case 4:return n=r,c=mo(e),l=So(i),f=l.longDate,d=l.shortDate,h=fo(d,n,null!=u?u:this.service),c.headers[to]=f,t.sessionToken&&(c.headers[io]=t.sessionToken),[4,go(c,this.sha256)];case 5:return p=y.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Gn(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=p),g=po(c,s,o),[4,this.getSignature(f,h,this.getSigningKey(t,n,d,u),this.createCanonicalRequest(c,g,p))];case 6:return v=y.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+_o(g)+", Signature="+v,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===ro)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=Rr(e)+"="+Rr(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Rr(e)+"="+Rr(n)])}),[]).join("&"))};try{for(var u=Gn(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Hn(this,void 0,void 0,(function(){var r,i;return $n(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Ct(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Hn(this,void 0,void 0,(function(){var i,o,s,a,u;return $n(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=Ct,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return Hn(void 0,void 0,void 0,(function(){var o,s,a,u,c,l,f,d,h;return $n(this,(function(p){switch(p.label){case 0:return[4,ho(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=p.sent(),(s=n+":"+r+":"+i+":"+Ct(o)+":"+t.sessionToken)in co)return[2,co[s]];for(lo.push(s);lo.length>50;)delete co[lo.shift()];a="AWS4"+t.secretAccessKey,p.label=2;case 2:p.trys.push([2,7,8,9]),u=Gn([n,r,i,"aws4_request"]),c=u.next(),p.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,ho(e,a,l)]);case 4:a=p.sent(),p.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return f=p.sent(),d={error:f},[3,9];case 8:try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(d)throw d.error}return[7];case 9:return[2,co[s]=a]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),So=function(e){var t=bo(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},_o=function(e){return Object.keys(e).sort().join(";")},Eo=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Ao=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Co(e){var t,n=this,r=Io(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,u=e.sha256;return t=e.signer?Io(e.signer):function(){return Io(e.region)().then((function(t){return Hn(n,void 0,void 0,(function(){return $n(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=Wn(t,2),i=n[0],s=n[1],a=i.signingRegion,c=i.signingService;return e.signingRegion=e.signingRegion||a||s,e.signingName=e.signingName||c||e.serviceId,new wo({credentials:r,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})}))},Kn(Kn({},e),{systemClockOffset:a,signingEscapePath:o,credentials:r,signer:t})}function Io(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var To=function(e){return new Date(Date.now()+e)};function ko(e){return function(t,n){return function(r){return Hn(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,f,d;return $n(this,(function(h){switch(h.label){case 0:return Ur.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=h.sent(),[3,3];case 2:o=e.signer,h.label=3;case 3:return i=o,a=t,u=[Kn({},r)],d={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,a.apply(void 0,[Kn.apply(void 0,u.concat([(d.request=h.sent(),d)]))])];case 5:return s=h.sent(),c=s.response.headers,(l=c&&(c.date||c.Date))&&(f=Date.parse(l),p=f,g=e.systemClockOffset,Math.abs(To(g).getTime()-p)>=3e5&&(e.systemClockOffset=f-Date.now())),[2,s]}var p,g}))}))}}}var Oo={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function Po(e){return Kn(Kn({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}var xo=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,No=function(e){var t=Wn(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(xo,"_")})).join("/")},Lo={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Mo=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return Hn(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,f;return $n(this,(function(d){switch(d.label){case 0:return i=r.request,Ur.isInstance(i)?(o=i.headers,s=(null===(l=null==t?void 0:t.userAgent)||void 0===l?void 0:l.map(No))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return a=d.sent().map(No),u=(null===(f=null==n?void 0:n.customUserAgent)||void 0===f?void 0:f.map(No))||[],o["x-amz-user-agent"]=Yn(a,s,u).join(" "),c=Yn(a.filter((function(e){return e.startsWith("aws-sdk-")})),u).join(" "),"browser"!==n.runtime&&c&&(o["user-agent"]=o["user-agent"]?o["user-agent"]+" "+c:c),[2,e(Kn(Kn({},r),{request:i}))]}}))}))}}),Lo)}}},Uo=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,Kn({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Kn({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Yn(i(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Yn(i(e)))})),t},o=function(){var n,r=[],o=[],s={};return e.forEach((function(e){var t=Kn(Kn({},e),{before:[],after:[]});t.name&&(s[t.name]=t),r.push(t)})),t.forEach((function(e){var t=Kn(Kn({},e),{before:[],after:[]});t.name&&(s[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return Ro[t.step]-Ro[e.step]||Do[t.priority||"normal"]-Do[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,Yn(t)),e}),[]).map((function(e){return e.middleware}))},s={add:function(t,r){void 0===r&&(r={});var i=r.name,o=r.override,s=Kn({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var a=e.findIndex((function(e){return e.name===i})),u=e[a];if(u.step!==s.step||u.priority!==s.priority)throw new Error('"'+i+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+s.priority+" priority in "+s.step+" step.");e.splice(a,1)}n.add(i)}e.push(s)},addRelativeTo:function(e,r){var i=r.name,o=r.override,s=Kn({middleware:e},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var a=t.findIndex((function(e){return e.name===i})),u=t[a];if(u.toMiddleware!==s.toMiddleware||u.relation!==s.relation)throw new Error('"'+i+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+s.relation+' "'+s.toMiddleware+'" middleware.');t.splice(a,1)}n.add(i)}t.push(s)},clone:function(){return r(Uo())},use:function(e){e.applyToStack(s)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(Uo());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=Gn(o().reverse()),s=i.next();!s.done;s=i.next()){e=(0,s.value)(e,t)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return s},Ro={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Do={high:3,normal:2,low:1},jo=function(){function e(e){this.middlewareStack=Uo(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Bo=function(){this.middlewareStack=Uo()};function Fo(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var zo=function(e){return Array.isArray(e)?e:[e]},qo=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=qo(e[t]));return e},Ko=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Yn([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};Ko.prototype=Object.create(String.prototype,{constructor:{value:Ko,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Ko,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}qn(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(Ko);var Vo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ho=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $o(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds();return Vo[r]+", "+(i<10?"0"+i:""+i)+" "+Ho[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(a<10?"0"+a:""+a)+" GMT"}var Go,Wo,Yo,Jo,Qo,Zo,Xo,es,ts,ns,rs,is,os,ss,as,us,cs,ls,fs,ds,hs,ps,gs,vs,ys,ms,bs,ws,Ss,_s,Es,As,Cs,Is,Ts,ks,Os,Ps,xs,Ns,Ls,Ms,Us,Rs,Ds,js,Bs,Fs,zs,qs,Ks,Vs,Hs,$s,Gs,Ws,Ys,Js,Qs,Zs,Xs,ea="***SensitiveInformation***",ta=function(e){function t(t){var n=this,r=tr(tr({},Ki),t),i=Gi(r),o=Co(Vi(i)),s=Po(wi(o));return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(Xr(n.config)),n.middlewareStack.use(Ji(n.config)),n.middlewareStack.use(Zi(n.config)),n.middlewareStack.use(eo(n.config)),n.middlewareStack.use(Mo(n.config)),n}return er(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(jo);(Wo=Go||(Go={})).AUTHENTICATED_ROLE="AuthenticatedRole",Wo.DENY="Deny",(Yo||(Yo={})).filterSensitiveLog=function(e){return tr({},e)},(Jo||(Jo={})).filterSensitiveLog=function(e){return tr({},e)},(Qo||(Qo={})).filterSensitiveLog=function(e){return tr({},e)},(Zo||(Zo={})).filterSensitiveLog=function(e){return tr({},e)},(Xo||(Xo={})).filterSensitiveLog=function(e){return tr({},e)},(es||(es={})).filterSensitiveLog=function(e){return tr({},e)},(ts||(ts={})).filterSensitiveLog=function(e){return tr({},e)},(ns||(ns={})).filterSensitiveLog=function(e){return tr({},e)},(rs||(rs={})).filterSensitiveLog=function(e){return tr({},e)},(is||(is={})).filterSensitiveLog=function(e){return tr({},e)},(ss=os||(os={})).ACCESS_DENIED="AccessDenied",ss.INTERNAL_SERVER_ERROR="InternalServerError",(as||(as={})).filterSensitiveLog=function(e){return tr({},e)},(us||(us={})).filterSensitiveLog=function(e){return tr({},e)},(cs||(cs={})).filterSensitiveLog=function(e){return tr({},e)},(ls||(ls={})).filterSensitiveLog=function(e){return tr({},e)},(fs||(fs={})).filterSensitiveLog=function(e){return tr({},e)},(ds||(ds={})).filterSensitiveLog=function(e){return tr({},e)},(hs||(hs={})).filterSensitiveLog=function(e){return tr({},e)},(ps||(ps={})).filterSensitiveLog=function(e){return tr({},e)},(gs||(gs={})).filterSensitiveLog=function(e){return tr({},e)},(vs||(vs={})).filterSensitiveLog=function(e){return tr({},e)},(ys||(ys={})).filterSensitiveLog=function(e){return tr({},e)},(ms||(ms={})).filterSensitiveLog=function(e){return tr({},e)},(bs||(bs={})).filterSensitiveLog=function(e){return tr({},e)},(ws||(ws={})).filterSensitiveLog=function(e){return tr({},e)},(Ss||(Ss={})).filterSensitiveLog=function(e){return tr({},e)},(Es=_s||(_s={})).CONTAINS="Contains",Es.EQUALS="Equals",Es.NOT_EQUAL="NotEqual",Es.STARTS_WITH="StartsWith",(As||(As={})).filterSensitiveLog=function(e){return tr({},e)},(Cs||(Cs={})).filterSensitiveLog=function(e){return tr({},e)},(Ts=Is||(Is={})).RULES="Rules",Ts.TOKEN="Token",(ks||(ks={})).filterSensitiveLog=function(e){return tr({},e)},(Os||(Os={})).filterSensitiveLog=function(e){return tr({},e)},(Ps||(Ps={})).filterSensitiveLog=function(e){return tr({},e)},(xs||(xs={})).filterSensitiveLog=function(e){return tr({},e)},(Ns||(Ns={})).filterSensitiveLog=function(e){return tr({},e)},(Ls||(Ls={})).filterSensitiveLog=function(e){return tr({},e)},(Ms||(Ms={})).filterSensitiveLog=function(e){return tr({},e)},(Us||(Us={})).filterSensitiveLog=function(e){return tr({},e)},(Rs||(Rs={})).filterSensitiveLog=function(e){return tr({},e)},(Ds||(Ds={})).filterSensitiveLog=function(e){return tr({},e)},(js||(js={})).filterSensitiveLog=function(e){return tr({},e)},(Bs||(Bs={})).filterSensitiveLog=function(e){return tr({},e)},(Fs||(Fs={})).filterSensitiveLog=function(e){return tr({},e)},(zs||(zs={})).filterSensitiveLog=function(e){return tr({},e)},(qs||(qs={})).filterSensitiveLog=function(e){return tr({},e)},(Ks||(Ks={})).filterSensitiveLog=function(e){return tr({},e)},(Vs||(Vs={})).filterSensitiveLog=function(e){return tr({},e)},(Hs||(Hs={})).filterSensitiveLog=function(e){return tr({},e)},($s||($s={})).filterSensitiveLog=function(e){return tr({},e)},(Gs||(Gs={})).filterSensitiveLog=function(e){return tr({},e)},(Ws||(Ws={})).filterSensitiveLog=function(e){return tr({},e)},(Ys||(Ys={})).filterSensitiveLog=function(e){return tr({},e)},(Js||(Js={})).filterSensitiveLog=function(e){return tr({},e)},(Qs||(Qs={})).filterSensitiveLog=function(e){return tr({},e)},(Zs||(Zs={})).filterSensitiveLog=function(e){return tr({},e)},(Xs||(Xs={})).filterSensitiveLog=function(e){return tr({},e)};var na=function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v;return rr(this,(function(y){switch(y.label){case 0:return r=[tr({},e)],v={},[4,xa(e.body,t)];case 1:switch(n=tr.apply(void 0,r.concat([(v.body=y.sent(),v)])),o="UnknownError",o=Na(e,n.body),o){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,ia(n)];case 3:return i=tr.apply(void 0,[tr.apply(void 0,s.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 4:return a=[{}],[4,oa(n)];case 5:return i=tr.apply(void 0,[tr.apply(void 0,a.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 6:return u=[{}],[4,sa(n)];case 7:return i=tr.apply(void 0,[tr.apply(void 0,u.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 8:return c=[{}],[4,aa(n)];case 9:return i=tr.apply(void 0,[tr.apply(void 0,c.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 10:return l=[{}],[4,ca(n)];case 11:return i=tr.apply(void 0,[tr.apply(void 0,l.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 12:return f=[{}],[4,la(n)];case 13:return i=tr.apply(void 0,[tr.apply(void 0,f.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 14:return d=[{}],[4,fa(n)];case 15:return i=tr.apply(void 0,[tr.apply(void 0,d.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 16:return h=[{}],[4,da(n)];case 17:return i=tr.apply(void 0,[tr.apply(void 0,h.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 18:p=n.body,o=p.code||p.Code||o,i=tr(tr({},p),{name:""+o,message:p.message||p.Message||o,$fault:"client",$metadata:ka(e)}),y.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}}))}))},ra=function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v;return rr(this,(function(y){switch(y.label){case 0:return r=[tr({},e)],v={},[4,xa(e.body,t)];case 1:switch(n=tr.apply(void 0,r.concat([(v.body=y.sent(),v)])),o="UnknownError",o=Na(e,n.body),o){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,ia(n)];case 3:return i=tr.apply(void 0,[tr.apply(void 0,s.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 4:return a=[{}],[4,oa(n)];case 5:return i=tr.apply(void 0,[tr.apply(void 0,a.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 6:return u=[{}],[4,aa(n)];case 7:return i=tr.apply(void 0,[tr.apply(void 0,u.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 8:return c=[{}],[4,ua(n)];case 9:return i=tr.apply(void 0,[tr.apply(void 0,c.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 10:return l=[{}],[4,ca(n)];case 11:return i=tr.apply(void 0,[tr.apply(void 0,l.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 12:return f=[{}],[4,la(n)];case 13:return i=tr.apply(void 0,[tr.apply(void 0,f.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 14:return d=[{}],[4,fa(n)];case 15:return i=tr.apply(void 0,[tr.apply(void 0,d.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 16:return h=[{}],[4,da(n)];case 17:return i=tr.apply(void 0,[tr.apply(void 0,h.concat([y.sent()])),{name:o,$metadata:ka(e)}]),[3,19];case 18:p=n.body,o=p.code||p.Code||o,i=tr(tr({},p),{name:""+o,message:p.message||p.Message||o,$fault:"client",$metadata:ka(e)}),y.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}}))}))},ia=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=ya(t),[2,tr({name:"ExternalServiceException",$fault:"client",$metadata:ka(e)},n)]}))}))},oa=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=wa(t),[2,tr({name:"InternalErrorException",$fault:"server",$metadata:ka(e)},n)]}))}))},sa=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Sa(t),[2,tr({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:ka(e)},n)]}))}))},aa=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=_a(t),[2,tr({name:"InvalidParameterException",$fault:"client",$metadata:ka(e)},n)]}))}))},ua=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Ea(t),[2,tr({name:"LimitExceededException",$fault:"client",$metadata:ka(e)},n)]}))}))},ca=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Aa(t),[2,tr({name:"NotAuthorizedException",$fault:"client",$metadata:ka(e)},n)]}))}))},la=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Ca(t),[2,tr({name:"ResourceConflictException",$fault:"client",$metadata:ka(e)},n)]}))}))},fa=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Ia(t),[2,tr({name:"ResourceNotFoundException",$fault:"client",$metadata:ka(e)},n)]}))}))},da=function(e,t){return nr(void 0,void 0,void 0,(function(){var t,n;return rr(this,(function(r){return t=e.body,n=Ta(t),[2,tr({name:"TooManyRequestsException",$fault:"client",$metadata:ka(e)},n)]}))}))},ha=function(e,t){return tr(tr(tr({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ga(e.Logins)})},pa=function(e,t){return tr(tr(tr({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ga(e.Logins)})},ga=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),i=r[0],o=r[1];return null===o?e:tr(tr({},e),((n={})[i]=o,n))}),{})},va=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},ya=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ma=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?va(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},ba=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},wa=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Sa=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},_a=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ea=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Aa=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ca=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ia=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ta=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ka=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Oa=function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))},Pa=function(e,t,n,r,i){return nr(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return rr(this,(function(f){switch(f.label){case 0:return[4,e.endpoint()];case 1:return o=f.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Ur(l)]}}))}))},xa=function(e,t){return Oa(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Na=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},La={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ma={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ua(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return Hn(void 0,void 0,void 0,(function(){var i,o;return $n(this,(function(s){switch(s.label){case 0:return[4,n(r)];case 1:return i=s.sent().response,[4,t(i,e)];case 2:return o=s.sent(),[2,{response:i,output:o}]}}))}))}}}(e,n),La),r.add(function(e,t){return function(n,r){return function(r){return Hn(void 0,void 0,void 0,(function(){var i;return $n(this,(function(o){switch(o.label){case 0:return[4,t(r.input,e)];case 1:return i=o.sent(),[2,n(Kn(Kn({},r),{request:i}))]}}))}))}}}(e,t),Ma)}}}var Ra=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return er(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:gs.filterSensitiveLog,outputFilterSensitiveLog:ys.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r;return rr(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(ha(e)),[2,Pa(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r,i;return rr(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,na(e,t)]:[4,xa(e.body,t)];case 1:return n=o.sent(),r=ma(n),i=tr({$metadata:ka(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Bo),Da=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return er(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:bs.filterSensitiveLog,outputFilterSensitiveLog:ws.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r;return rr(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(pa(e)),[2,Pa(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nr(void 0,void 0,void 0,(function(){var n,r,i;return rr(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ra(e,t)]:[4,xa(e.body,t)];case 1:return n=o.sent(),r=ba(n),i=tr({$metadata:ka(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Bo),ja=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return qn(t,e),t}(Error);function Ba(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=Wn(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}))}function Fa(e){var t=this;return function(){return Hn(t,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,h;return $n(this,(function(p){switch(p.label){case 0:return l=(c=e.client).send,f=Ra.bind,h={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,Ba(e.logins)]:[3,2];case 1:return d=p.sent(),[3,3];case 2:d=void 0,p.label=3;case 3:return[4,l.apply(c,[new(f.apply(Ra,[void 0,(h.Logins=d,h)]))])];case 4:return t=p.sent().Credentials,n=void 0===t?function(){throw new ja("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,i=void 0===r?function(){throw new ja("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,s=n.SecretKey,a=void 0===s?function(){throw new ja("Response from Amazon Cognito contained no secret key")}():s,u=n.SessionToken,[2,{identityId:e.identityId,accessKeyId:i,secretAccessKey:a,sessionToken:u,expiration:o}]}}))}))}}var za=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore("IdentityIds",{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction("IdentityIds",e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore("IdentityIds")))})).catch((function(e){throw n.close(),e}))}))},e}(),qa=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}());function Ka(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new za:"object"==typeof window&&window.localStorage?window.localStorage:qa:r,o=e.client,s=e.customRoleArn,a=e.identityPoolId,u=e.logins,c=e.userIdentifier,l=void 0===c?u&&0!==Object.keys(u).length?void 0:"ANONYMOUS":c,f=l?"aws:cognito-identity-credentials:"+a+":"+l:void 0,d=function(){return Hn(t,void 0,void 0,(function(){var e,t,r,c,l,h,p,g,v;return $n(this,(function(y){switch(y.label){case 0:return(t=f)?[4,i.getItem(f)]:[3,2];case 1:t=y.sent(),y.label=2;case 2:return(e=t)?[3,7]:(h=(l=o).send,p=Da.bind,v={AccountId:n,IdentityPoolId:a},u?[4,Ba(u)]:[3,4]);case 3:return g=y.sent(),[3,5];case 4:g=void 0,y.label=5;case 5:return[4,h.apply(l,[new(p.apply(Da,[void 0,(v.Logins=g,v)]))])];case 6:r=y.sent().IdentityId,c=void 0===r?function(){throw new ja("Response from Amazon Cognito contained no identity ID")}():r,e=c,f&&Promise.resolve(i.setItem(f,e)).catch((function(){})),y.label=7;case 7:return[2,(d=Fa({client:o,customRoleArn:s,logins:u,identityId:e}))()]}}))}))};return function(){return d().catch((function(e){return Hn(t,void 0,void 0,(function(){return $n(this,(function(t){throw f&&Promise.resolve(i.removeItem(f)).catch((function(){})),e}))}))}))}}var Va=function(){return(Va=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ha=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},$a=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ga=new Pe("Credentials"),Wa=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=Rn.refreshGoogleToken,this._refreshHandlers.facebook=Dn.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Va(Va({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new Fn).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Ga.debug("getting credentials"),this._pickupCredentials()},e.prototype._pickupCredentials=function(){return Ga.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Ga.debug("getting old cred promise"):(Ga.debug("getting new cred promise"),this._gettingCredPromise=et(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return Ha(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return $a(this,(function(a){switch(a.label){case 0:if(Ga.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return Ga.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(Ga.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?Ne.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];Ga.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=a.sent(),[4,n.currentSession()];case 3:return i=a.sent(),o=i.refreshToken,[4,new Promise((function(e,t){r.refreshSession(o,(function(n,r){return n?t(n):e(r)}))}))];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),Ga.debug("Error attempting to refreshing the session",s),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){Ga.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;o=1970===new Date(o).getFullYear()?1e3*o:o;var s=this;return Ga.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(Ga.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):s._refreshHandlers[t]&&"function"==typeof s._refreshHandlers[t]?(Ga.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:s._refreshHandlers[t],provider:t,user:n})):(Ga.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return un(n,[],1e4).then((function(e){return Ga.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),Ga.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return Ga.debug("no credentials for expiration check"),!0;Ga.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return Ha(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a=this;return $a(this,(function(u){switch(u.label){case 0:if(Ga.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!t)return Ga.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!n)return Ga.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];r=void 0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),r=this._storage.getItem("CognitoIdentityId-"+t),this._identityId=r,[3,4];case 3:return i=u.sent(),Ga.debug("Failed to get the cached identityId",i),[3,4];case 4:return o=new ta({region:n,customUserAgent:Me()}),s=void 0,s=r?Fa({identityId:r,client:o})():function(){return Ha(a,void 0,void 0,(function(){var e;return $a(this,(function(n){switch(n.label){case 0:return[4,o.send(new Da({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Fa({client:o,identityId:e})()]}}))}))}().catch((function(e){return Ha(a,void 0,void 0,(function(){return $a(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return Ha(a,void 0,void 0,(function(){var n=this;return $a(this,(function(i){return"ResourceNotFoundException"===e.name&&e.message==="Identity '"+r+"' not found."?(Ga.debug("Failed to load guest credentials"),this._storage.removeItem("CognitoIdentityId-"+t),s=function(){return Ha(n,void 0,void 0,(function(){var e;return $a(this,(function(n){switch(n.label){case 0:return[4,o.send(new Da({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Fa({client:o,identityId:e})()]}}))}))}().catch((function(e){return Ha(n,void 0,void 0,(function(){return $a(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null)]):[2,e]}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!i)return Promise.reject("You must specify a federated provider");var o={};o[i]=n;var s=this._config,a=s.identityPoolId,u=s.region;if(!a)return Ga.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!u)return Ga.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var c=new ta({region:u,customUserAgent:Me()}),l=void 0;r?l=Fa({identityId:r,logins:o,client:c})():l=Ka({logins:o,identityPoolId:a,client:c})();return this._loadCredentials(l,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Ga.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return Ga.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return Ga.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+i+".amazonaws.com/"+o]=n;var u=new ta({region:i,customUserAgent:Me()}),c=Ha(t,void 0,void 0,(function(){var e;return $a(this,(function(t){switch(t.label){case 0:return[4,u.send(new Da({IdentityPoolId:s,Logins:a}))];case 1:return e=t.sent().IdentityId,this._identityId=e,[2,Fa({client:u,logins:a,identityId:e})()]}}))})).catch((function(e){return Ha(t,void 0,void 0,(function(){return $a(this,(function(t){throw e}))}))}));return this._loadCredentials(c,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this,s=this._config.identityPoolId;return new Promise((function(a,u){e.then((function(e){return Ha(i,void 0,void 0,(function(){var i,u,c,l,f,d;return $a(this,(function(h){switch(h.label){case 0:if(Ga.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),u=r.provider,c=r.token,l=r.expires_at,f=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:u,token:c,user:i,expires_at:l,identity_id:f}))}catch(p){Ga.debug("Failed to put federated info into auth storage",p)}}if("guest"!==t)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._storageSync];case 2:return h.sent(),this._storage.setItem("CognitoIdentityId-"+s,e.identityId),[3,4];case 3:return d=h.sent(),Ga.debug("Failed to cache identityId",d),[3,4];case 4:return a(o._credentials),[2]}}))}))})).catch((function(t){if(t)return Ga.debug("Failed to load credentials",e),Ga.debug("Error loading credentials",t),void u(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Ga.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Ha(this,void 0,void 0,(function(){return $a(this,(function(e){return this._credentials=null,this._credentials_source=null,Ga.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);Ne.register(Wa);
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
var Ya=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(Xa),o=r.decode||Qa,s=0;s<i.length;s++){var a=i[s],u=a.indexOf("=");if(!(u<0)){var c=a.substr(0,u).trim(),l=a.substr(++u,a.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),null==n[c]&&(n[c]=tu(l,o))}}return n},Ja=function(e,t,n){var r=n||{},i=r.encode||Za;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!eu.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!eu.test(o))throw new TypeError("argument val is invalid");var s=e+"="+o;if(null!=r.maxAge){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(r.domain){if(!eu.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!eu.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(s+="; HttpOnly");r.secure&&(s+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},Qa=decodeURIComponent,Za=encodeURIComponent,Xa=/; */,eu=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tu(e,t){try{return t(e)}catch(n){return e}}function nu(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(r){}return e}var ru,iu,ou,su,au=function(){return(au=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},uu=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?Ya(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=Ya(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),nu(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=nu(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=au(au({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ja(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=au(au({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=au({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ja(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),cu=nt().isBrowser,lu=function(){function e(e){void 0===e&&(e={}),this.cookies=new uu,this.store=cu?window.localStorage:Object.create(null),this.cookies=e.req?new uu(e.req.headers.cookie):new uu,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"idToken":this.setUniversalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}(),fu="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,du=fu?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",hu=fu?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",pu={userAgent:Le.userAgent};function gu(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function vu(e){return void 0!==e.redirectSignIn}(iu=ru||(ru={})).Cognito="COGNITO",iu.Google="Google",iu.Facebook="Facebook",iu.Amazon="LoginWithAmazon",iu.Apple="SignInWithApple",(su=ou||(ou={})).NoConfig="noConfig",su.MissingAuthConfig="missingAuthConfig",su.EmptyUsername="emptyUsername",su.InvalidUsername="invalidUsername",su.EmptyPassword="emptyPassword",su.EmptyCode="emptyCode",su.SignUpError="signUpError",su.NoMFA="noMFA",su.InvalidMFA="invalidMFA",su.EmptyChallengeResponse="emptyChallengeResponse",su.NoUserSession="noUserSession",su.Default="default";for(
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var yu=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),mu=function(e){var t=Tu(e),n=t[0],r=t[1];return 3*(n+r)/4-r},bu=function(e){var t,n,r=Tu(e),i=r[0],o=r[1],s=new Eu(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),a=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=_u[e.charCodeAt(n)]<<18|_u[e.charCodeAt(n+1)]<<12|_u[e.charCodeAt(n+2)]<<6|_u[e.charCodeAt(n+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;2===o&&(t=_u[e.charCodeAt(n)]<<2|_u[e.charCodeAt(n+1)]>>4,s[a++]=255&t);1===o&&(t=_u[e.charCodeAt(n)]<<10|_u[e.charCodeAt(n+1)]<<4|_u[e.charCodeAt(n+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t);return s},wu=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(ku(e,s,s+o>a?a:s+o));1===r?(t=e[n-1],i.push(Su[t>>2]+Su[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(Su[t>>10]+Su[t>>4&63]+Su[t<<2&63]+"="));return i.join("")},Su=[],_u=[],Eu="undefined"!=typeof Uint8Array?Uint8Array:Array,Au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cu=0,Iu=Au.length;Cu<Iu;++Cu)Su[Cu]=Au[Cu],_u[Au.charCodeAt(Cu)]=Cu;function Tu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function ku(e,t,n){for(var r,i,o=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(Su[(i=r)>>18&63]+Su[i>>12&63]+Su[i>>6&63]+Su[63&i]);return o.join("")}_u["-".charCodeAt(0)]=62,_u["_".charCodeAt(0)]=63;var Ou={byteLength:mu,toByteArray:bu,fromByteArray:wu},Pu=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},xu=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+h]=255&s,h+=p,s/=256,c-=8);e[n+h-p]|=128*g},Nu={}.toString,Lu=Array.isArray||function(e){return"[object Array]"==Nu.call(e)},Mu=ct((function(e,t){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=i.prototype:(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(this,e)}return o(this,e,t,n)}function o(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);i.TYPED_ARRAY_SUPPORT?(e=t).__proto__=i.prototype:e=u(e,t);return e}(e,t,n,o):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|l(t,n),s=(e=r(e,o)).write(t,n);s!==o&&(e=e.slice(0,s));return e}(e,t,n):function(e,t){if(i.isBuffer(t)){var n=0|c(t.length);return 0===(e=r(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?r(e,0):u(e,t);if("Buffer"===t.type&&Lu(t.data))return u(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e,t){if(s(t),e=r(e,t<0?0:0|c(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|c(t.length);e=r(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function c(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function l(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function d(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function h(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:p(e,t,n,r,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function p(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return B(D(t,e.length-n),e,n,r)}function y(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function m(e,t,n,r){return y(e,t,n,r)}function b(e,t,n,r){return B(j(t),e,n,r)}function w(e,t,n,r){return B(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?Ou.fromByteArray(e):Ou.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=i,t.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==at.TYPED_ARRAY_SUPPORT?at.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return o(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return function(e,t,n,i){return s(t),t<=0?r(e,t):void 0!==n?"string"==typeof i?r(e,t).fill(n,i):r(e,t).fill(n):r(e,t)}(null,e,t,n)},i.allocUnsafe=function(e){return a(null,e)},i.allocUnsafeSlow=function(e){return a(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Lu(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},i.byteLength=l,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_(this,0,e):f.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(s,a),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=R(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return i||N(e,0,n,4),xu(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return i||N(e,0,n,8),xu(e,t,n,r,52,8),n+8}i.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),i.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},i.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),Pu(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),Pu(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),Pu(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),Pu(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,s=r-n;if(this===e&&n<t&&t<r)for(o=s-1;o>=0;--o)e[o+t]=this[o+n];else if(s<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=i.isBuffer(e)?e:D(new i(e,r).toString()),u=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(e){return Ou.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}})),Uu=ct((function(e,t){var n;e.exports=n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var f=r.splice(0,u);n.sigBytes-=c}return new s.init(f,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=r.algo={};return r}(Math)}));ct((function(e,t){var n;e.exports=(n=Uu,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)}));var Ru,Du=ct((function(e,t){var n;e.exports=(n=Uu,function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[h-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[h]=g+c[h-7]+y+c[h-16]}var m=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+u[h]+c[h];d=f,f=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)})),ju=(ct((function(e,t){var n,r,i;e.exports=(r=(n=Uu).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),ct((function(e,t){e.exports=Uu.HmacSHA256})));if("undefined"!=typeof window&&window.crypto&&(Ru=window.crypto),!Ru&&"undefined"!=typeof window&&window.msCrypto&&(Ru=window.msCrypto),!Ru&&"undefined"!=typeof global&&global.crypto&&(Ru=global.crypto),!Ru&&"function"==typeof require)try{Ru=require("crypto")}catch(PE){}function Bu(){if(Ru){if("function"==typeof Ru.getRandomValues)try{return Ru.getRandomValues(new Uint32Array(1))[0]}catch(PE){}if("function"==typeof Ru.randomBytes)try{return Ru.randomBytes(4).readInt32LE()}catch(PE){}}throw new Error("Native crypto module could not be used to get secure random number.")}var Fu,zu=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(Bu());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();function qu(e,t){null!=e&&this.fromString(e,t)}function Ku(){return new qu(null)}var Vu="undefined"!=typeof navigator;Vu&&"Microsoft Internet Explorer"==navigator.appName?(qu.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},Fu=30):Vu&&"Netscape"!=navigator.appName?(qu.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},Fu=26):(qu.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},Fu=28),qu.prototype.DB=Fu,qu.prototype.DM=(1<<Fu)-1,qu.prototype.DV=1<<Fu;qu.prototype.FV=Math.pow(2,52),qu.prototype.F1=52-Fu,qu.prototype.F2=2*Fu-52;var Hu,$u,Gu=new Array;for(Hu="0".charCodeAt(0),$u=0;$u<=9;++$u)Gu[Hu++]=$u;for(Hu="a".charCodeAt(0),$u=10;$u<36;++$u)Gu[Hu++]=$u;for(Hu="A".charCodeAt(0),$u=10;$u<36;++$u)Gu[Hu++]=$u;function Wu(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Yu(e,t){var n=Gu[e.charCodeAt(t)];return null==n?-1:n}function Ju(e){var t=Ku();return t.fromInt(e),t}function Qu(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Zu(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
function Xu(e){return Mu.Buffer.from((new zu).random(e).toString(),"hex")}Zu.prototype.convert=function(e){var t=Ku();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(qu.ZERO)>0&&this.m.subTo(t,t),t},Zu.prototype.revert=function(e){var t=Ku();return e.copyTo(t),this.reduce(t),t},Zu.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Zu.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Zu.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},qu.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},qu.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},qu.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=Yu(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&qu.ZERO.subTo(this,this)},qu.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},qu.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},qu.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},qu.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},qu.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},qu.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},qu.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&qu.ZERO.subTo(t,t)},qu.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},qu.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Ku());var o=Ku(),s=this.s,a=e.s,u=this.DB-Qu(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var f=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/f,h=(1<<this.F1)/f,p=1<<this.F2,g=n.t,v=g-c,y=null==t?Ku():t;for(o.dlShiftTo(v,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),qu.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--v>=0;){var m=n[--g]==l?this.DM:Math.floor(n[g]*d+(n[g-1]+p)*h);if((n[g]+=o.am(0,m,n,v,0,c))<m)for(o.dlShiftTo(v,y),n.subTo(y,n);n[g]<--m;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&qu.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&qu.ZERO.subTo(n,n)}}},qu.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},qu.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},qu.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=Wu(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=Wu(n));return i?o:"0"},qu.prototype.negate=function(){var e=Ku();return qu.ZERO.subTo(this,e),e},qu.prototype.abs=function(){return this.s<0?this.negate():this},qu.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},qu.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Qu(this[this.t-1]^this.s&this.DM)},qu.prototype.mod=function(e){var t=Ku();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(qu.ZERO)>0&&e.subTo(t,t),t},qu.prototype.equals=function(e){return 0==this.compareTo(e)},qu.prototype.add=function(e){var t=Ku();return this.addTo(e,t),t},qu.prototype.subtract=function(e){var t=Ku();return this.subTo(e,t),t},qu.prototype.multiply=function(e){var t=Ku();return this.multiplyTo(e,t),t},qu.prototype.divide=function(e){var t=Ku();return this.divRemTo(e,t,null),t},qu.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=Ju(1),s=new Zu(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var f=Ku();for(s.sqrTo(a[1],f);u<=l;)a[u]=Ku(),s.mulTo(f,a[u-2],a[u]),u+=2}var d,h,p=e.t-1,g=!0,v=Ku();for(i=Qu(e[p])-1;p>=0;){for(i>=c?d=e[p]>>i-c&l:(d=(e[p]&(1<<i+1)-1)<<c-i,p>0&&(d|=e[p-1]>>this.DB+i-c)),u=r;0==(1&d);)d>>=1,--u;if((i-=u)<0&&(i+=this.DB,--p),g)a[d].copyTo(o),g=!1;else{for(;u>1;)s.sqrTo(o,v),s.sqrTo(v,o),u-=2;u>0?s.sqrTo(o,v):(h=o,o=v,v=h),s.mulTo(v,a[d],o)}for(;p>=0&&0==(e[p]&1<<i);)s.sqrTo(o,v),h=o,o=v,v=h,--i<0&&(i=this.DB-1,--p)}var y=s.revert(o);return n(null,y),y},qu.ZERO=Ju(0),qu.ONE=Ju(1);var ec=/^[89a-f]/i,tc=function(){function e(e){this.N=new qu("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new qu("2",16),this.k=new qu(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=Mu.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){return new qu(Xu(128).toString("hex"),16)},t.generateRandomString=function(){return Xu(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=Xu(16).toString("hex");this.SaltToHashDevices=this.padHex(new qu(s,16)),this.g.modPow(new qu(this.hexHash(this.SaltToHashDevices+o),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(qu.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new qu(this.UHexHash,16)},t.hash=function(e){var t=e instanceof Mu.Buffer?Uu.lib.WordArray.create(e):e,n=Du(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(Mu.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=Uu.lib.WordArray.create(Mu.Buffer.concat([this.infoBits,Mu.Buffer.from(String.fromCharCode(1),"utf8")])),r=e instanceof Mu.Buffer?Uu.lib.WordArray.create(e):e,i=t instanceof Mu.Buffer?Uu.lib.WordArray.create(t):t,o=ju(r,i),s=ju(n,o);return Mu.Buffer.from(s.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(qu.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(qu.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new qu(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,(function(e,t){e&&i(e,null);var n=o.computehkdf(Mu.Buffer.from(o.padHex(t),"hex"),Mu.Buffer.from(o.padHex(o.UValue),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof qu))throw new Error("Not a BigInteger");var t=e.compareTo(qu.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=ec.test(n)?"00"+n:n,t){var r=n.split("").map((function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");(n=new qu(r,16).add(qu.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),nc=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(Mu.Buffer.from(e,"base64").toString("utf8"))}catch(PE){return{}}},e}();function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ic=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,rc(t,n),r}(nc);function oc(e,t){return(oc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sc=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,oc(t,n),r}(nc),ac=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),uc=ct((function(e,t){var n;e.exports=(n=Uu,function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2,u=r[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),cc=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),lc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dc=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=fc[e.getUTCDay()],n=lc[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),hc=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),pc={},gc=function(){function e(){}return e.setItem=function(e,t){return pc[e]=t,pc[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(pc,e)?pc[e]:void 0},e.removeItem=function(e){return delete pc[e]},e.clear=function(){return pc={}},e}(),vc=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=gc}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),yc="undefined"!=typeof navigator?navigator.userAgent:"nodejs",mc=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new vc).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new tc(this.pool.getUserPoolId().split("_")[1]),s=new dc,a={};null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey),a.USERNAME=this.username,o.getLargeAValue((function(u,c){u&&t.onFailure(u),a.SRP_A=c.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(a.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),f={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:a,ClientMetadata:l};i.getUserContextData(i.username)&&(f.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",f,(function(a,u){if(a)return t.onFailure(a);var c=u.ChallengeParameters;i.username=c.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",n=new qu(c.SRP_B,16),r=new qu(c.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=s.getNowString(),a=Uu.lib.WordArray.create(Mu.Buffer.concat([Mu.Buffer.from(i.pool.getUserPoolId().split("_")[1],"utf8"),Mu.Buffer.from(i.username,"utf8"),Mu.Buffer.from(c.SECRET_BLOCK,"base64"),Mu.Buffer.from(r,"utf8")])),f=Uu.lib.WordArray.create(n),d=uc.stringify(ju(a,f)),h={};h.USERNAME=i.username,h.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,h.TIMESTAMP=r,h.PASSWORD_CLAIM_SIGNATURE=d,null!=i.deviceKey&&(h.DEVICE_KEY=i.deviceKey);var p={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:h,Session:u.Session,ClientMetadata:l};i.getUserContextData()&&(p.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(h.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(p,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new tc(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),a=JSON.parse(e.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return n.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var o={Salt:Mu.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Mu.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=f.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:yc},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new tc(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[s+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new tc(this.deviceGroupKey),i=new dc,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(s,a){s&&e.onFailure(s),o.SRP_A=a.toString(16);var u={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t};n.getUserContextData()&&(u.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",u,(function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,a=new qu(s.SRP_B,16),u=new qu(s.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,a,u,(function(t,r){if(t)return e.onFailure(t);var a=i.getNowString(),u=Uu.lib.WordArray.create(Mu.Buffer.concat([Mu.Buffer.from(n.deviceGroupKey,"utf8"),Mu.Buffer.from(n.deviceKey,"utf8"),Mu.Buffer.from(s.SECRET_BLOCK,"base64"),Mu.Buffer.from(a,"utf8")])),c=Uu.lib.WordArray.create(r),l=uc.stringify(ju(u,c)),f={};f.USERNAME=n.username,f.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,f.TIMESTAMP=a,f.PASSWORD_CLAIM_SIGNATURE=l,f.DEVICE_KEY=n.deviceKey;var d={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:f,Session:o.Session};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new tc(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new tc(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:Mu.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Mu.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:yc},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):r.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new hc(o);r.push(s)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n){var r=t.signInUserSession.getRefreshToken();r&&r.getToken()?t.refreshSession(r,n,e.clientMetadata):n()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible(t).then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(r))}catch(PE){return this.clearCachedUserData(),void e(PE,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",s=n+".clockDrift";if(this.storage.getItem(r)){var a=new sc({IdToken:this.storage.getItem(r)}),u=new ic({AccessToken:this.storage.getItem(i)}),c=new ac({RefreshToken:this.storage.getItem(o)}),l=parseInt(this.storage.getItem(s),0)||0,f=new cc({IdToken:a,AccessToken:u,RefreshToken:c,ClockDrift:l});if(f.isValid())return this.signInUserSession=f,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var u=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),o.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new sc(e),n=new ic(e),r=new ac(e);return new cc({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var bc=ut(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},u=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n})),n(u())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)}))}}));function wc(){}function Sc(e){var t="function"==typeof Map?new Map:void 0;return(Sc=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _c(e,arguments,Cc(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ac(r,e)})(e)}function _c(e,t,n){return(_c=Ec()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ac(i,n.prototype),i}).apply(null,arguments)}function Ec(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cc(e){return(Cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}self.fetch||(self.fetch=bc.default||bc),wc.prototype.userAgent="aws-amplify/0.1.x js";var Ic,Tc,kc=function(e){var t,n;function r(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ac(t,n),r}(Sc(Error)),Oc=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(r,i){n.request(e,t,(function(e,t){e?i(new kc(e.message,e.code,e.name,e.statusCode)):r(t)}))}))},t.request=function(e,t,n){var r,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":wc.prototype.userAgent},o=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,o).then((function(e){return r=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),i={code:t,name:t,message:e.message||e.Message||null};return n(i)})).catch((function(e){if(!(r&&r.headers&&r.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return n(t)}return n(e)}try{var i=r.headers.get("x-amzn-errortype").split(":")[0],o={code:i,name:i,statusCode:r.status,message:r.status?r.status.toString():null};return n(o)}catch(s){return n(e)}}))},e}(),Pc=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");var u=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new Oc(u,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new vc).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage},o={user:new mc(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new mc(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),xc=ct((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(c){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(l){}if(i[c]=u,e===c)break}catch(l){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()})),Nc=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),xc.set(e,t,n),xc.get(e)},t.getItem=function(e){return xc.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),xc.remove(e,t)},t.clear=function(){var e,t=xc.get();for(e=0;e<t.length;++e)xc.remove(t[e]);return{}},e}(),Lc=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},Mc=function(){return(Mc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Uc=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Rc=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Dc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},jc="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Bc=function(e,t,n){Fe.dispatch("auth",{event:e,data:t,message:n},"Auth",jc)},Fc=new Pe("OAuth"),zc=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||Lc,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=ru.Cognito);var s=this._generateState(32),a=o?s+"-"+o.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):s;!function(e){window.sessionStorage.setItem("oauth_state",e)}(a);var u,c=this._generateRandom(128);u=c,window.sessionStorage.setItem("ouath_pkce_key",u);var l=this._generateChallenge(c),f=this._scopes.join(" "),d="https://"+t+"/oauth2/authorize?"+Object.entries(Mc(Mc({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:f,state:a},"code"===e?{code_challenge:l}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=Dc(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");Fc.debug("Redirecting to "+d),this._urlOpener(d,n)},e.prototype._handleCodeFlow=function(e){return Uc(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d;return Rc(this,(function(h){switch(h.label){case 0:return(t=(Rt(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=Dc(t,2),i=r[0],o=r[1];return Mc(Mc({},e),((n={})[i]=o,n))}),{code:void 0}).code)&&Rt(e).pathname===Rt(this._config.redirectSignIn).pathname?(n="https://"+this._config.domain+"/oauth2/token",Bc("codeFlow",{},"Retrieving tokens from "+n),r=vu(this._config)?this._cognitoClientId:this._config.clientID,i=vu(this._config)?this._config.redirectSignIn:this._config.redirectUri,p=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),s=Mc({grant_type:"authorization_code",code:t,client_id:r,redirect_uri:i},(o=p)?{code_verifier:o}:{}),Fc.debug("Calling token endpoint: "+n+" with",s),a=Object.entries(s).map((function(e){var t=Dc(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),[4,fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,h.sent().json()];case 2:if(u=h.sent(),c=u.access_token,l=u.refresh_token,f=u.id_token,d=u.error)throw new Error(d);return[2,{accessToken:c,refreshToken:l,idToken:f}]}var p}))}))},e.prototype._handleImplicitFlow=function(e){return Uc(this,void 0,void 0,(function(){var t,n,r;return Rc(this,(function(i){return t=(Rt(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=Dc(t,2),i=r[0],o=r[1];return Mc(Mc({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,Bc("implicitFlow",{},"Got tokens from "+e),Fc.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return Uc(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return Rc(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?Mc(Mc({},(Rt(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=Dc(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})),(Rt(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=Dc(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),Fc.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,Mc.apply(void 0,[Mc.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,Mc.apply(void 0,[Mc.apply(void 0,s.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=u.sent(),Fc.error("Error handling auth response.",a),a;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return Uc(this,void 0,void 0,(function(){var e,t,n;return Rc(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=vu(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=vu(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=Dc(e,2);return t[0]+"="+t[1]})).join("&"),Bc("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),Fc.debug("Signing out from "+e),[2,this._urlOpener(e)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(Du(e))},e.prototype._base64URL=function(e){return e.toString(uc).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}();(Tc=Ic||(Ic={})).DEFAULT_MSG="Authentication Error",Tc.EMPTY_USERNAME="Username cannot be empty",Tc.INVALID_USERNAME="The username should either be a string or one of the sign in types",Tc.EMPTY_PASSWORD="Password cannot be empty",Tc.EMPTY_CODE="Confirmation code cannot be empty",Tc.SIGN_UP_ERROR="Error creating account",Tc.NO_MFA="No valid MFA method provided",Tc.INVALID_MFA="Invalid MFA type",Tc.EMPTY_CHALLENGE="Challenge response cannot be empty",Tc.NO_USER_SESSION="Failed to get the session because the user is empty";var qc=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kc=new Pe("AuthError"),Vc=function(e){function t(n){var r=this,i=$c[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,Kc.error(r.log),r}return qc(t,e),t}(Error),Hc=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return qc(t,e),t}(Vc),$c={noConfig:{message:Ic.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Ic.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:Ic.EMPTY_USERNAME},invalidUsername:{message:Ic.INVALID_USERNAME},emptyPassword:{message:Ic.EMPTY_PASSWORD},emptyCode:{message:Ic.EMPTY_CODE},signUpError:{message:Ic.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Ic.NO_MFA},invalidMFA:{message:Ic.INVALID_MFA},emptyChallengeResponse:{message:Ic.EMPTY_CHALLENGE},noUserSession:{message:Ic.NO_USER_SESSION},default:{message:Ic.DEFAULT_MSG}},Gc=function(){return(Gc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Wc=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Yc=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Jc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Qc=new Pe("AuthClass"),Zc="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Xc=function(e,t,n){Fe.dispatch("auth",{event:e,data:t,message:n},"Auth",Zc)},el=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=Wa,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?Xc("tokenRefresh",void 0,"New token retrieved"):Xc("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Fe.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Qc.debug("configure Auth");var n=Object.assign({},this._config,Cn.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,f=r.refreshHandlers,d=r.identityPoolRegion,h=r.clientMetadata,p=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Qc.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Nc(s):e.ssr?new lu:(new Fn).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var g={UserPoolId:i,ClientId:o,endpoint:p};g.Storage=this._storage,this.userPool=new Pc(g,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:i,identityPoolId:c,refreshHandlers:f,storage:this._storage});var v=a?vu(this._config.oauth)?a:a.awsCognito:void 0;if(v){var y=Object.assign({cognitoClientId:o,UserPoolId:i,domain:v.domain,scopes:v.scope,redirectSignIn:v.redirectSignIn,redirectSignOut:v.redirectSignOut,responseType:v.responseType,Storage:this._storage,urlOpener:v.urlOpener,clientMetadata:h},v.options);this._oAuthHandler=new zc({scopes:y.scopes,config:y,cognitoClientId:y.cognitoClientId});var m={};!function(e){if(st.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!st.browserOrNode().isNode)throw new Error("Not supported")}((function(e){var n=e.url;m[n]||(m[n]=!0,t._handleAuthResponse(n))}))}return Xc("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new hc({Name:"email",Value:c})),l&&a.push(new hc({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(ou.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var f=e.attributes;f&&Object.keys(f).map((function(e){a.push(new hc({Name:e,Value:f[e]}))}));var d=e.validationData;d&&(u=[],Object.keys(d).map((function(e){u.push(new hc({Name:e,Value:d[e]}))})))}return o?s?(Qc.debug("signUp attrs:",a),Qc.debug("signUp validation data:",u),new Promise((function(e,n){t.userPool.signUp(o,s,a,u,(function(t,r){t?(Xc("signUp_failure",t,o+" failed to signup"),n(t)):(Xc("signUp",r,o+" has signed up successfully"),e(r))}),i)}))):this.rejectAuthError(ou.EmptyPassword):this.rejectAuthError(ou.EmptyUsername)},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ou.EmptyUsername);if(!t)return this.rejectAuthError(ou.EmptyCode);var r,i=this.createCognitoUser(e),o=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?r=n.clientMetadata:this._config.clientMetadata&&(r=this._config.clientMetadata),new Promise((function(e,n){i.confirmRegistration(t,o,(function(t,r){t?n(t):e(r)}),r)}))},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ou.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(ou.InvalidUsername);void 0!==t&&Qc.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(ou.EmptyUsername);var s=new yu({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(s):this.signInWithoutPassword(s)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return Wc(r,void 0,void 0,(function(){var r,s,a,u;return Yc(this,(function(c){switch(c.label){case 0:Qc.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=c.sent(),Qc.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),Qc.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),i.user=a,Xc("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),Qc.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){Qc.debug("signIn failure",t),Xc("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){Qc.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){Qc.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){Qc.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){Qc.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){Qc.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){Qc.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,i(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return Qc.debug("get MFA Options failed",e),void n(e);Qc.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise((function(i,o){var s=n._config.clientMetadata,a=!!t&&t.bypassCache;e.getUserData((function(e,t){if(e)return Qc.debug("getting preferred mfa failed",e),void o(e);var n=r._getMfaTypeFromUserData(t);return n?void i(n):void o("invalid MFA Type")}),{bypassCache:a,clientMetadata:s})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;if(r)0===r.length?t="NOMFA":Qc.debug("invalid case for getPreferredMFA",e);else t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){return new Promise((function(n,r){e.getUserData((function(e,t){return e?(Qc.debug("getting user data failed",e),void r(e)):void n(t)}),t)}))},e.prototype.setPreferredMFA=function(e,t){return Wc(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Yc(this,(function(u){switch(u.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(r=u.sent(),i=null,o=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return s=r.UserMFASettingList,[4,this._getMfaTypeFromUserData(r)];case 5:if("NOMFA"===(a=u.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===a)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==a)return[2,this.rejectAuthError(ou.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return s&&0!==s.length&&s.forEach((function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return Qc.debug("no validmfa method provided"),[2,this.rejectAuthError(ou.NoMFA)];case 7:return[2,new Promise((function(t,r){e.setUserMfaPreference(i,o,(function(i,o){if(i)return Qc.debug("Set user mfa preference error",i),r(i);Qc.debug("Set user mfa success",o),Qc.debug("Caching the latest user data into local"),e.getUserData((function(e,n){return e?(Qc.debug("getting user data failed",e),r(e)):t(o)}),{bypassCache:!0,clientMetadata:n})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return Qc.debug("disable mfa failed",e),void n(e);Qc.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return Qc.debug("enable mfa failed",e),void n(e);Qc.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){Qc.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Qc.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return Qc.debug("verification totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){Qc.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){Xc("signIn",e,"A user "+e.getUsername()+" has been signed in"),Qc.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(ou.EmptyCode);var o=this;return new Promise((function(s,a){e.sendMFACode(t,{onSuccess:function(t){return Wc(i,void 0,void 0,(function(){var n,r;return Yc(this,(function(i){switch(i.label){case 0:Qc.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Qc.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),Qc.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,Xc("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Qc.debug("confirm signIn failure",e),a(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(ou.EmptyPassword);var o=this;return new Promise((function(s,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return Wc(i,void 0,void 0,(function(){var n,r;return Yc(this,(function(i){switch(i.label){case 0:Qc.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Qc.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),Qc.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,Xc("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Qc.debug("completeNewPassword failure",e),Xc("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){Qc.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,s(e)},mfaSetup:function(t,n){Qc.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)},totpRequired:function(t,n){Qc.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)})):this.rejectAuthError(ou.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise((function(o,s){i.userSession(e).then((function(i){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,(function(e,t){return e?s(e):o(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return Wc(t,void 0,void 0,(function(){var t,i,o=this;return Yc(this,(function(s){switch(s.label){case 0:return this.isOAuthInProgress()?(Qc.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){Qc.debug("OAuth signIn in progress timeout"),Fe.remove("auth",n),e()}),1e4);function n(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(Qc.debug("OAuth signIn resolved: "+i),clearTimeout(t),Fe.remove("auth",n),e())}Fe.listen("auth",n)}))]):[3,2];case 1:s.sent(),s.label=2;case 2:return(t=this.userPool.getCurrentUser())?(i=this._config.clientMetadata,t.getSession((function(i,s){return Wc(o,void 0,void 0,(function(){var o,a,u,c=this;return Yc(this,(function(l){switch(l.label){case 0:return i?(Qc.debug("Failed to get the user session",i),r(i),[2]):(o=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:l.sent(),l.label=2;case 2:return a=this._config.clientMetadata,u=s.getAccessToken().decodePayload().scope,(void 0===u?"":u).split(" ").includes("aws.cognito.signin.user.admin")?(t.getUserData((function(e,i){if(e)return Qc.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?r(e):n(t));for(var o=i.PreferredMfaSetting||"NOMFA",s=[],a=0;a<i.UserAttributes.length;a++){var u={Name:i.UserAttributes[a].Name,Value:i.UserAttributes[a].Value},l=new hc(u);s.push(l)}var f=c.attributesToObject(s);return Object.assign(t,{attributes:f,preferredMFA:o}),n(t)}),{bypassCache:o,clientMetadata:a}),[2]):(Qc.debug("Unable to get the user data because the aws.cognito.signin.user.admin is not in the scopes of the access token"),[2,n(t)])}}))}))}),{clientMetadata:i}),[2]):(Qc.debug("Failed to get user from user pool"),r("No current user"),[2])}}))}))})).catch((function(e){return Qc.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return Wc(this,void 0,void 0,(function(){var t,n,r,i,o;return Yc(this,(function(s){switch(s.label){case 0:Qc.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),Qc.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Gc(Gc({},r.user),{token:r.token}))}catch(a){Qc.debug("cannot load federated user from auth storage")}return t?(this.user=t,Qc.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Qc.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&Qc.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Qc.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return Qc.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){Qc.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){Qc.debug("Failed to get the current user",e),n(e)}))})):Promise.reject()},e.prototype.userSession=function(e){if(!e)return Qc.debug("the user is null"),this.rejectAuthError(ou.NoUserSession);var t=this._config.clientMetadata;return new Promise((function(n,r){Qc.debug("Getting the session from this user:",e),e.getSession((function(t,i){return t?(Qc.debug("Failed to get the session from user",e),void r(t)):(Qc.debug("Succeed to get the user session",i),void n(i))}),{clientMetadata:t})}))},e.prototype.currentUserCredentials=function(){return Wc(this,void 0,void 0,(function(){var e,t,n=this;return Yc(this,(function(r){switch(r.label){case 0:Qc.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),Qc.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(i){Qc.debug("failed to get or parse item aws-amplify-federatedInfo",i)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return Qc.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(e){return Qc.debug("getting session failed",e),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return Qc.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(){return r()},onFailure:function(e){return i(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(ou.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return Wc(this,void 0,void 0,(function(){var n,r,i=this;return Yc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),Qc.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(e&&e.global){Qc.debug("user global sign out",t);var s=i._config.clientMetadata;t.getSession((function(e,s){if(e)return Qc.debug("failed to get the user session",e),o(e);t.globalSignOut({onSuccess:function(e){if(Qc.debug("global sign out success"),!r)return n();i.oAuthSignOutRedirect(n,o)},onFailure:function(e){return Qc.debug("global sign out failed",e),o(e)}})}),{clientMetadata:s})}else{if(Qc.debug("user sign out",t),t.signOut(),!r)return n();i.oAuthSignOutRedirect(n,o)}}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){st.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e("Signout timeout fail")}),3e3)},e.prototype.signOut=function(e){return Wc(this,void 0,void 0,(function(){var t;return Yc(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),Qc.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:Qc.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:Qc.debug("no Congito User pool"),n.label=8;case 8:return Xc("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return Wc(this,void 0,void 0,(function(){return Yc(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,s){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(Qc.debug("change password failure",e),s(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ou.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){Qc.debug("forgot password failure",t),Xc("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){Xc("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ou.EmptyUsername);if(!t)return this.rejectAuthError(ou.EmptyCode);if(!n)return this.rejectAuthError(ou.EmptyPassword);var i=this.createCognitoUser(e);return new Promise((function(o,s){i.confirmPassword(t,n,{onSuccess:function(){Xc("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o()},onFailure:function(t){Xc("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)}))},e.prototype.currentUserInfo=function(){return Wc(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return Yc(this,(function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return Qc.debug(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),Qc.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),Qc.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return Wc(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h;return Yc(this,(function(p){switch(p.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return gu(e)||(g=e)&&["customProvider"].find((function(e){return g.hasOwnProperty(e)}))||function(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}(e)||void 0===e?(r=e||{provider:ru.Cognito},a=gu(r)?r.provider:r.customProvider,gu(r),i=r.customState,this._config.userPoolId&&(o=vu(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,s=vu(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,s,o,a,i)),[3,4]):[3,1];case 1:a=e;try{(u=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Qc.warn("There is already a signed in user: "+u+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(v){}return c=t.token,l=t.identity_id,f=t.expires_at,[4,this.Credentials.set({provider:a,token:c,identity_id:l,user:n,expires_at:f},"federation")];case 2:return d=p.sent(),[4,this.currentAuthenticatedUser()];case 3:return h=p.sent(),Xc("signIn",h,"A user "+h.username+" has been signed in"),Qc.debug("federated sign in credentials",d),[2,d];case 4:return[2]}var g}))}))},e.prototype._handleAuthResponse=function(e){return Wc(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,h,p;return Yc(this,(function(g){switch(g.label){case 0:if(this.oAuthFlowInProgress)return Qc.debug("Skipping URL "+e+" current flow in progress"),[2];g.label=1;case 1:if(g.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Xc("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(st.browserOrNode().isBrowser?window.location.href:""),n=!!(Rt(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=Jc(e,1)[0];return"code"===t||"error"===t})),r=!!(Rt(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=Jc(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),g.label=2;case 2:return g.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=g.sent(),o=i.accessToken,s=i.idToken,a=i.refreshToken,u=i.state,c=new cc({IdToken:new sc({IdToken:s}),RefreshToken:new ac({RefreshToken:a}),AccessToken:new ic({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=g.sent(),Qc.debug("AWS credentials",l),g.label=5;case 5:return f=/-/.test(u),(d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Xc("signIn",d,"A user "+d.getUsername()+" has been signed in"),Xc("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),f&&(h=u.split("-").splice(1).join("-"),Xc("customOAuthState",h.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+d.getUsername())),[2,l];case 6:return p=g.sent(),Qc.debug("Error in cognito hosted auth response",p),Xc("signIn_failure",p,"The OAuth response flow failed"),Xc("cognitoHostedUI_failure",p,"A failure occurred when returning to the Cognito Hosted UI"),Xc("customState_failure",p,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t={};return e&&e.map((function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value})),t},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new mc(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?ou.NoConfig:ou.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new Vc(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Hc(e))},e}())(null);Ne.register(el);var tl={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new Fn).getStorage()};function nl(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function rl(){return(new Date).getTime()}function il(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var ol=new Pe("StorageCache"),sl=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){il(this.config.capacityInBytes)||(ol.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=tl.capacityInBytes),il(this.config.itemMaxSize)||(ol.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=tl.itemMaxSize),il(this.config.defaultTTL)||(ol.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=tl.defaultTTL),il(this.config.defaultPriority)||(ol.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=tl.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ol.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=tl.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(ol.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=tl.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(ol.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=tl.warningThreshold);this.config.capacityInBytes>5242880&&(ol.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=tl.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:rl(),visitedTime:rl(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=nl(JSON.stringify(r)),r.byteSize=nl(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&ol.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),al=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ul=new Pe("Cache"),cl=new(function(e){function t(t){var n=this,r=t?Object.assign({},tl,t):tl;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return al(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=rl(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return rl()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(n){this._decreaseCurSizeInBytes(t.byteSize),ul.error("Failed to set item "+n)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1}));for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){ul.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+rl()};if(i.priority<1||i.priority>5)ul.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)ul.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var u=this._sizeToPop(o.byteSize);this._popOutItems(a,u)}}this._setItem(r,o)}catch(c){ul.warn("setItem failed! "+c)}}}else ul.warn("The value of item should not be undefined!");else ul.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){ul.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return ul.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(s){return ul.warn("getItem failed! "+s),null}},t.prototype.removeItem=function(e){ul.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(r){ul.warn("removeItem failed! "+r)}},t.prototype.clear=function(){ul.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(r){ul.warn("clear failed! "+r)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==tl.keyPrefix||(ul.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=rl.toString()),new t(e)},t}(sl));Ne.register(cl);var ll=ct((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new n).update(e).digest()};var n=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=lt.__values(e),o=i.next();!o.done;o=i.next()){var s=o.value;this.checksum=this.checksum>>>8^r[255&(this.checksum^s)]}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=n;var r=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),fl=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&dl(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&dl(e),parseInt(Ct(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function dl(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var hl,pl,gl=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=Gn(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(g){t={error:g}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),f=0;try{for(var d=Gn(o),h=d.next();!h.done;h=d.next()){var p=h.value;l.set(p,f),f+=p.byteLength}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return l},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var s=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+s.byteLength));a.setUint8(0,7),a.setUint16(1,s.byteLength,!1);var u=new Uint8Array(a.buffer);return u.set(s,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(fl.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Cl.test(e.value))throw new Error("Invalid UUID received: "+e.value);var l=new Uint8Array(17);return l[0]=9,l.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in _t))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=_t[r]}return t}(e.value.replace(/\-/g,"")),1),l}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:vl,value:!0};break;case 1:t[i]={type:vl,value:!1};break;case 2:t[i]={type:yl,value:e.getInt8(n++)};break;case 3:t[i]={type:ml,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:bl,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:wl,value:new fl(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:Sl,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:_l,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:El,value:new Date(new fl(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var a=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:Al,value:Ct(a.subarray(0,4))+"-"+Ct(a.subarray(4,6))+"-"+Ct(a.subarray(6,8))+"-"+Ct(a.subarray(8,10))+"-"+Ct(a.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();(pl=hl||(hl={}))[pl.boolTrue=0]="boolTrue",pl[pl.boolFalse=1]="boolFalse",pl[pl.byte=2]="byte",pl[pl.short=3]="short",pl[pl.integer=4]="integer",pl[pl.long=5]="long",pl[pl.byteArray=6]="byteArray",pl[pl.string=7]="string",pl[pl.timestamp=8]="timestamp",pl[pl.uuid=9]="uuid";var vl="boolean",yl="byte",ml="short",bl="integer",wl="long",Sl="binary",_l="string",El="timestamp",Al="uuid",Cl=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Il=function(){function e(e,t){this.headerMarshaller=new gl(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),s=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new ll.Crc32;return s.setUint32(0,i,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),s.setUint32(i-4,a.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,n,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var s=i.getUint32(4,!1),a=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new ll.Crc32).update(new Uint8Array(r,n,8));if(a!==c.digest())throw new Error("The prelude checksum specified in the message ("+a+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(r,n+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(r,n+8+4,s),body:new Uint8Array(r,n+8+4+s,o-s-16)}}(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var Tl=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new Il(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var n,r,i,o,s,a,u;return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return Qn(this,arguments,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m;return $n(this,(function(b){switch(b.label){case 0:b.trys.push([0,12,13,18]),n=Zn(e),b.label=1;case 1:return[4,Jn(n.next())];case 2:if((r=b.sent()).done)return[3,11];if(i=r.value,o=t.eventMarshaller.unmarshall(i),"error"!==(s=o.headers[":message-type"].value))return[3,3];throw(a=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,a;case 3:return"exception"!==s?[3,5]:(u=o.headers[":exception-type"].value,(g={})[u]=o,c=g,[4,Jn(t.deserializer(c))]);case 4:if((l=b.sent()).$unknown)throw(f=new Error(t.toUtf8(o.body))).name=u,f;throw l[u];case 5:return"event"!==s?[3,9]:((v={})[o.headers[":event-type"].value]=o,d=v,[4,Jn(t.deserializer(d))]);case 6:return(h=b.sent()).$unknown?[3,10]:[4,Jn(h)];case 7:return[4,b.sent()];case 8:return b.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return p=b.sent(),y={error:p},[3,18];case 13:return b.trys.push([13,,16,17]),r&&!r.done&&(m=n.return)?[4,Jn(m.call(n))]:[3,15];case 14:b.sent(),b.label=15;case 15:return[3,17];case 16:if(y)throw y.error;return[7];case 17:return[7];case 18:return[2]}}))}))},n}((n=e,i=0,o=0,s=null,a=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);i=e,o=4,s=new Uint8Array(e),new DataView(s.buffer).setUint32(0,e,!1)},(r={})[Symbol.asyncIterator]=function(){return Qn(this,arguments,(function(){var e,t,r,c,l,f,d,h;return $n(this,(function(p){switch(p.label){case 0:e=n[Symbol.asyncIterator](),p.label=1;case 1:return[4,Jn(e.next())];case 2:return t=p.sent(),r=t.value,t.done?i?[3,4]:[4,Jn(void 0)]:[3,10];case 3:return[2,p.sent()];case 4:return i!==o?[3,7]:[4,Jn(s)];case 5:return[4,p.sent()];case 6:return p.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Jn(void 0)];case 9:return[2,p.sent()];case 10:c=r.length,l=0,p.label=11;case 11:if(!(l<c))return[3,15];if(!s){if(f=c-l,a||(a=new Uint8Array(4)),d=Math.min(4-o,f),a.set(r.slice(l,l+d),o),l+=d,(o+=d)<4)return[3,15];u(new DataView(a.buffer).getUint32(0,!1)),a=null}return h=Math.min(i-o,c-l),s.set(r.slice(l,l+h),o),o+=h,l+=h,i&&i===o?[4,Jn(s)]:[3,14];case 12:return[4,p.sent()];case 13:p.sent(),s=null,i=0,o=0,p.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},r),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return Qn(this,arguments,(function(){var n,i,o,s,a,u;return $n(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),n=Zn(e),c.label=1;case 1:return[4,Jn(n.next())];case 2:return(i=c.sent()).done?[3,6]:(o=i.value,[4,Jn(r.eventMarshaller.marshall(t(o)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return s=c.sent(),a={error:s},[3,13];case 8:return c.trys.push([8,,11,12]),i&&!i.done&&(u=n.return)?[4,Jn(u.call(n))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(a)throw a.error;return[7];case 12:return[7];case 13:return[4,Jn(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},n},e}(),kl=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new Il(t,n),this.universalMarshaller=new Tl({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n,r,i=Ol(e)?(n=e,(r={})[Symbol.asyncIterator]=function(){return Qn(this,arguments,(function(){var e,t,r,i;return $n(this,(function(o){switch(o.label){case 0:e=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Jn(e.read())];case 3:return t=o.sent(),r=t.done,i=t.value,r?[4,Jn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Jn(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))},r):e;return this.universalMarshaller.deserialize(i,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return Hn(this,void 0,void 0,(function(){var t,r,i;return $n(this,(function(o){switch(o.label){case 0:return[4,n.next()];case 1:return t=o.sent(),r=t.done,i=t.value,r?[2,e.close()]:(e.enqueue(i),[2])}}))}))}})):r},e}(),Ol=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},Pl=function(e,t){return(Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function xl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Pl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Nl=function(){return(Nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ll(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Ml(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var Ul="3.6.1";function Rl(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var s=e.size,a=0;function u(){a>=s?r():o.readAsArrayBuffer(e.slice(a,Math.min(s,a+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),a+=n.byteLength,u()})),u()}))}var Dl=[1732584193,4023233417,2562383102,271733878],jl=function(){function e(){this.state=Uint32Array.from(Dl),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){if("string"==typeof e)return ar(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return Hn(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return $n(this,(function(a){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%64>=56){for(s=this.bufferLength;s<64;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),s=0;s<4;s++)o.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=Fl(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=Fl(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=Fl(i,o,n,r,e.getUint32(8,!0),17,606105819),r=Fl(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=Fl(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=Fl(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=Fl(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=Fl(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=Fl(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=Fl(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=Fl(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=Fl(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=Fl(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=Fl(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=Fl(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=zl(n,r=Fl(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=zl(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=zl(i,o,n,r,e.getUint32(44,!0),14,643717713),r=zl(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=zl(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=zl(o,n,r,i,e.getUint32(40,!0),9,38016083),i=zl(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=zl(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=zl(n,r,i,o,e.getUint32(36,!0),5,568446438),o=zl(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=zl(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=zl(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=zl(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=zl(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=zl(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=ql(n,r=zl(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=ql(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=ql(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=ql(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=ql(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=ql(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=ql(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=ql(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=ql(n,r,i,o,e.getUint32(52,!0),4,681279174),o=ql(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=ql(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=ql(r,i,o,n,e.getUint32(24,!0),23,76029189),n=ql(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=ql(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=ql(i,o,n,r,e.getUint32(60,!0),16,530742520),n=Kl(n,r=ql(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=Kl(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=Kl(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=Kl(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=Kl(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=Kl(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=Kl(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=Kl(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=Kl(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=Kl(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=Kl(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=Kl(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=Kl(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=Kl(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=Kl(i,o,n,r,e.getUint32(8,!0),15,718787259),r=Kl(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function Bl(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function Fl(e,t,n,r,i,o,s){return Bl(t&n|~t&r,e,t,i,o,s)}function zl(e,t,n,r,i,o,s){return Bl(t&r|n&~r,e,t,i,o,s)}function ql(e,t,n,r,i,o,s){return Bl(t^n^r,e,t,i,o,s)}function Kl(e,t,n,r,i,o,s){return Bl(n^(t|~r),e,t,i,o,s)}var Vl=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Hl=new Set(["cn-north-1","cn-northwest-1"]),$l=new Set(["us-iso-east-1"]),Gl=new Set(["us-isob-east-1"]),Wl=new Set(["us-gov-east-1","us-gov-west-1"]),Yl={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Vl.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Hl.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),$l.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Gl.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Wl.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(Nl({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:zi,useArnRegion:!1},Jl=Nl(Nl({},Yl),{runtime:"browser",base64Decoder:Gr,base64Encoder:Wr,bodyLengthChecker:_i,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Ui({serviceId:Yl.serviceId,clientVersion:Ul}),eventStreamSerdeProvider:function(e){return new kl(e)},maxAttempts:3,md5:jl,region:Qr("Region is missing"),requestHandler:new Br,sha256:Lr.Sha256,streamCollector:Yr,streamHasher:function(e,t){return Hn(this,void 0,void 0,(function(){var n;return $n(this,(function(r){switch(r.label){case 0:return n=new e,[4,Rl(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))},utf8Decoder:ar,utf8Encoder:ur}),Ql=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},Zl=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Xl=/(\d+\.){3}\d+/,ef=/\.\./,tf=/\./,nf=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,rf=/^s3(-external-1)?\.amazonaws\.com$/,of=function(e){return af(e)?e.replace(/fips-|-fips/,""):e},sf=function(e){var t=e.match(nf);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},af=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},uf=function(e,t){return e===t||of(e)===t||e===of(t)},cf=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&tf.test(e))throw new Error("Invalid DNS label "+e)},lf=function(e){var t=e.isCustomEndpoint;e.baseHostname;var n=e.dualstackEndpoint,r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?df(Kn(Kn({},e),{isCustomEndpoint:t})):ff(Kn(Kn({},e),{isCustomEndpoint:t}))},ff=function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,i=Wn(n?[e.clientRegion,r]:(t=r,rf.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:sf(t)),2),o=i[0],s=i[1],a=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=void 0!==u&&u,l=e.accelerateEndpoint,f=void 0!==l&&l,d=e.tlsCompatible,h=void 0===d||d,p=e.useArnRegion,g=e.bucketName,v=e.clientPartition,y=void 0===v?"aws":v,m=e.clientSigningRegion,b=void 0===m?o:m;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:f,tlsCompatible:h});var w=g.service,S=g.partition,_=g.accountId,E=g.region,A=g.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(w),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(S,{clientPartition:y}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(_),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!uf(e,t.clientRegion)&&!uf(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&af(e))throw new Error("Endpoint does not support FIPS region")}(E,{useArnRegion:p,clientRegion:o,clientSigningRegion:b});var C=function(e){var t=e.includes(":")?":":"/",n=Wn(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Wn(i,3),s=o[0];return o[1],{outpostId:s,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(A),I=C.accesspointName,T=C.outpostId;cf(I+"-"+_,{tlsCompatible:h});var k=p?E:o,O=p?E:b;return T?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(w),cf(T,{tlsCompatible:h}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(c),function(e){if(af(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(k),{bucketEndpoint:!0,hostname:I+"-"+_+"."+T+(n?"":".s3-outposts."+k)+"."+s,signingRegion:O,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(w),{bucketEndpoint:!0,hostname:I+"-"+_+(n?"":".s3-accesspoint"+(c?".dualstack":"")+"."+k)+"."+s,signingRegion:O})},df=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,s=e.bucketName,a=e.dualstackEndpoint,u=void 0!==a&&a,c=e.pathStyleEndpoint,l=void 0!==c&&c,f=e.tlsCompatible,d=void 0===f||f,h=e.isCustomEndpoint,p=Wn(void 0!==h&&h?[i,o]:(t=o,rf.test(t)?["us-east-1","amazonaws.com"]:sf(t)),2),g=p[0],v=p[1];return l||!function(e){return Zl.test(e)&&!Xl.test(e)&&!ef.test(e)}(s)||d&&tf.test(s)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+g+"."+v:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+v:u&&(o="s3.dualstack."+g+"."+v),{bucketEndpoint:!0,hostname:s+"."+o})},hf=function(e){return function(t,n){return function(r){return Hn(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S;return $n(this,(function(_){switch(_.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,s=r.request,Ur.isInstance(s)?e.bucketEndpoint?(s.hostname=i,[3,7]):[3,1]:[3,8];case 1:return Ql(i)?(a=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=Wn(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),u=of,[4,e.region()]):[3,5];case 2:return y=u.apply(void 0,[_.sent()]),[4,e.regionInfoProvider(y)];case 3:return c=_.sent()||{},l=c.partition,f=c.signingRegion,d=void 0===f?y:f,[4,e.useArnRegion()];case 4:return h=_.sent(),p=lf({bucketName:a,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,useArnRegion:h,clientPartition:l,clientSigningRegion:d,clientRegion:y,isCustomEndpoint:e.isCustomEndpoint}),w=p.hostname,S=p.bucketEndpoint,g=p.signingRegion,v=p.signingService,g&&g!==d&&(n.signing_region=g),v&&"s3"!==v&&(n.signing_service=v),s.hostname=w,o=S,[3,7];case 5:return m=of,[4,e.region()];case 6:y=m.apply(void 0,[_.sent()]),b=lf({bucketName:i,clientRegion:y,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,isCustomEndpoint:e.isCustomEndpoint}),w=b.hostname,S=b.bucketEndpoint,s.hostname=w,o=S,_.label=7;case 7:o&&(s.path=s.path.replace(/^(\/)?[^\/]+/,""),""===s.path&&(s.path="/")),_.label=8;case 8:return[2,t(Kn(Kn({},r),{request:s}))]}}))}))}}},pf={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},gf=function(e){return{applyToStack:function(t){t.addRelativeTo(hf(e),pf)}}};var vf={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},yf=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Hn(t,void 0,void 0,(function(){var t;return $n(this,(function(i){return t=r.request,Ur.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Kn(Kn({},t.headers),{Expect:"100-continue"})),[2,n(Kn(Kn({},r),{request:t}))]}))}))}}}(e),vf)}}};var mf,bf,wf,Sf,_f,Ef,Af,Cf,If,Tf,kf,Of,Pf,xf,Nf,Lf,Mf,Uf,Rf,Df,jf,Bf,Ff,zf,qf,Kf,Vf,Hf,$f,Gf,Wf,Yf,Jf,Qf,Zf,Xf,ed,td,nd,rd,id,od,sd,ad,ud,cd,ld,fd,dd,hd,pd,gd,vd,yd,md,bd,wd,Sd,_d,Ed,Ad,Cd,Id,Td,kd,Od,Pd,xd,Nd,Ld,Md,Ud,Rd,Dd,jd,Bd,Fd,zd,qd,Kd,Vd,Hd,$d,Gd,Wd,Yd,Jd,Qd,Zd,Xd,eh,th,nh,rh,ih,oh,sh,ah,uh,ch,lh,fh,dh,hh,ph,gh,vh,yh,mh,bh,wh,Sh,_h,Eh,Ah,Ch,Ih,Th,kh,Oh,Ph,xh,Nh,Lh,Mh,Uh,Rh,Dh,jh,Bh,Fh,zh,qh,Kh,Vh,Hh,$h,Gh,Wh,Yh,Jh,Qh,Zh,Xh,ep,tp,np,rp,ip,op,sp,ap,up,cp,lp,fp,dp,hp,pp,gp,vp,yp,mp,bp,wp,Sp,_p,Ep,Ap,Cp,Ip,Tp,kp,Op,Pp,xp,Np,Lp,Mp,Up,Rp,Dp,jp,Bp,Fp,zp,qp,Kp,Vp,Hp,$p,Gp,Wp,Yp,Jp,Qp,Zp,Xp,eg,tg,ng,rg,ig,og,sg,ag,ug,cg,lg,fg,dg,hg,pg,gg,vg,yg,mg,bg,wg,Sg,_g,Eg,Ag,Cg,Ig,Tg,kg,Og,Pg,xg,Ng,Lg,Mg,Ug,Rg,Dg,jg,Bg,Fg,zg,qg,Kg,Vg,Hg,$g,Gg,Wg,Yg,Jg,Qg,Zg,Xg,ev,tv,nv,rv={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},iv=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return Hn(e,void 0,void 0,(function(){var e,r;return $n(this,(function(i){if("string"==typeof(e=n.input.Bucket)&&!Ql(e)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;return[2,t(Kn({},n))]}))}))}}}(),rv)}}},ov={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},sv=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Hn(void 0,void 0,void 0,(function(){var r,i;return $n(this,(function(o){switch(o.label){case 0:return r=n.request,!Ur.isInstance(r)||e.isCustomEndpoint?[2,t(Kn({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Kn({},n))]}}))}))}}}(e),ov)}}},av=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},uv=function(e,t){return av(e,t).then((function(e){return t.utf8Encoder(e)}))},cv={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},lv=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t){return function(n){return Hn(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c;return $n(this,(function(l){switch(l.label){case 0:return[4,t(n)];case 1:return r=l.sent(),i=r.response,Mr.isInstance(i)?(o=i.statusCode,s=i.body,o<200&&o>=300?[2,r]:[4,av(s,e)]):[2,r];case 2:return a=l.sent(),[4,uv(a,e)];case 3:if(u=l.sent(),0===a.length)throw(c=new Error("S3 aborted request")).name="InternalError",c;return u&&u.match("<Error>")&&(i.statusCode=400),i.body=a,[2,r]}}))}))}}}(e),cv)}}},fv=function(e){function t(t){var n,r,i,o,s,a,u,c,l,f,d,h,p=this,g=Nl(Nl({},Jl),t),v=Gi(g),y=Co(Vi(v)),m=wi(y),b=function(e){return Kn(Kn({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(Po((r=(n=m).bucketEndpoint,i=void 0!==r&&r,o=n.forcePathStyle,s=void 0!==o&&o,a=n.useAccelerateEndpoint,u=void 0!==a&&a,c=n.useDualstackEndpoint,l=void 0!==c&&c,f=n.useArnRegion,d=void 0!==f&&f,Kn(Kn({},n),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:u,useDualstackEndpoint:l,useArnRegion:"function"==typeof d?d:function(){return Promise.resolve(d)}}))));return(p=e.call(this,b)||this).config=b,p.middlewareStack.use((h=p.config,{applyToStack:function(e){e.addRelativeTo(ko(h),Oo)}})),p.middlewareStack.use(Xr(p.config)),p.middlewareStack.use(Ji(p.config)),p.middlewareStack.use(Zi(p.config)),p.middlewareStack.use(eo(p.config)),p.middlewareStack.use(iv(p.config)),p.middlewareStack.use(sv(p.config)),p.middlewareStack.use(yf(p.config)),p.middlewareStack.use(Mo(p.config)),p}return xl(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(jo);(mf||(mf={})).filterSensitiveLog=function(e){return Nl({},e)},(bf||(bf={})).filterSensitiveLog=function(e){return Nl({},e)},(wf||(wf={})).filterSensitiveLog=function(e){return Nl({},e)},(Sf||(Sf={})).filterSensitiveLog=function(e){return Nl({},e)},(_f||(_f={})).filterSensitiveLog=function(e){return Nl({},e)},(Ef||(Ef={})).filterSensitiveLog=function(e){return Nl({},e)},(Af||(Af={})).filterSensitiveLog=function(e){return Nl({},e)},(Cf||(Cf={})).filterSensitiveLog=function(e){return Nl({},e)},(If||(If={})).filterSensitiveLog=function(e){return Nl({},e)},(Tf||(Tf={})).filterSensitiveLog=function(e){return Nl({},e)},(kf||(kf={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea})},(Of||(Of={})).filterSensitiveLog=function(e){return Nl({},e)},(Pf||(Pf={})).filterSensitiveLog=function(e){return Nl({},e)},(xf||(xf={})).filterSensitiveLog=function(e){return Nl({},e)},(Nf||(Nf={})).filterSensitiveLog=function(e){return Nl({},e)},(Lf||(Lf={})).filterSensitiveLog=function(e){return Nl(Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea})},(Mf||(Mf={})).filterSensitiveLog=function(e){return Nl(Nl(Nl(Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea}),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:ea})},(Uf||(Uf={})).filterSensitiveLog=function(e){return Nl({},e)},(Rf||(Rf={})).filterSensitiveLog=function(e){return Nl({},e)},(Df||(Df={})).filterSensitiveLog=function(e){return Nl({},e)},(jf||(jf={})).filterSensitiveLog=function(e){return Nl({},e)},(Bf||(Bf={})).filterSensitiveLog=function(e){return Nl({},e)},(Ff||(Ff={})).filterSensitiveLog=function(e){return Nl({},e)},(zf||(zf={})).filterSensitiveLog=function(e){return Nl(Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea})},(qf||(qf={})).filterSensitiveLog=function(e){return Nl(Nl(Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea}),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea})},(Kf||(Kf={})).filterSensitiveLog=function(e){return Nl({},e)},(Vf||(Vf={})).filterSensitiveLog=function(e){return Nl({},e)},(Hf||(Hf={})).filterSensitiveLog=function(e){return Nl({},e)},($f||($f={})).filterSensitiveLog=function(e){return Nl({},e)},(Gf||(Gf={})).filterSensitiveLog=function(e){return Nl({},e)},(Wf||(Wf={})).filterSensitiveLog=function(e){return Nl({},e)},(Yf||(Yf={})).filterSensitiveLog=function(e){return Nl({},e)},(Jf||(Jf={})).filterSensitiveLog=function(e){return Nl({},e)},(Qf||(Qf={})).filterSensitiveLog=function(e){return Nl({},e)},(Zf||(Zf={})).filterSensitiveLog=function(e){return Nl({},e)},(Xf||(Xf={})).filterSensitiveLog=function(e){return Nl({},e)},(ed||(ed={})).filterSensitiveLog=function(e){return Nl({},e)},(td||(td={})).filterSensitiveLog=function(e){return Nl({},e)},(nd||(nd={})).filterSensitiveLog=function(e){return Nl({},e)},(rd||(rd={})).filterSensitiveLog=function(e){return Nl({},e)},(id||(id={})).filterSensitiveLog=function(e){return Nl({},e)},(od||(od={})).filterSensitiveLog=function(e){return Nl({},e)},(sd||(sd={})).filterSensitiveLog=function(e){return Nl({},e)},(ad||(ad={})).filterSensitiveLog=function(e){return Nl({},e)},(ud||(ud={})).filterSensitiveLog=function(e){return Nl({},e)},(cd||(cd={})).filterSensitiveLog=function(e){return Nl({},e)},(ld||(ld={})).filterSensitiveLog=function(e){return Nl({},e)},(fd||(fd={})).filterSensitiveLog=function(e){return Nl({},e)},(dd||(dd={})).filterSensitiveLog=function(e){return Nl({},e)},(hd||(hd={})).filterSensitiveLog=function(e){return Nl({},e)},(pd||(pd={})).filterSensitiveLog=function(e){return Nl({},e)},(gd||(gd={})).filterSensitiveLog=function(e){return Nl({},e)},(vd||(vd={})).filterSensitiveLog=function(e){return Nl({},e)},(yd||(yd={})).filterSensitiveLog=function(e){return Nl({},e)},(md||(md={})).filterSensitiveLog=function(e){return Nl({},e)},(wd=bd||(bd={})).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},wd.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yd.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:md.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Sd||(Sd={})).filterSensitiveLog=function(e){return Nl({},e)},(_d||(_d={})).filterSensitiveLog=function(e){return Nl({},e)},(Ed||(Ed={})).filterSensitiveLog=function(e){return Nl({},e)},(Ad||(Ad={})).filterSensitiveLog=function(e){return Nl({},e)},(Cd||(Cd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Filter&&{Filter:bd.filterSensitiveLog(e.Filter)})},(Id||(Id={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Cd.filterSensitiveLog(e.AnalyticsConfiguration)})},(Td||(Td={})).filterSensitiveLog=function(e){return Nl({},e)},(kd||(kd={})).filterSensitiveLog=function(e){return Nl({},e)},(Od||(Od={})).filterSensitiveLog=function(e){return Nl({},e)},(Pd||(Pd={})).filterSensitiveLog=function(e){return Nl({},e)},(xd||(xd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:ea})},(Nd||(Nd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:xd.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Ld||(Ld={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Nd.filterSensitiveLog(e)}))})},(Md||(Md={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ld.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(Ud||(Ud={})).filterSensitiveLog=function(e){return Nl({},e)},(Rd||(Rd={})).filterSensitiveLog=function(e){return Nl({},e)},(Dd||(Dd={})).filterSensitiveLog=function(e){return Nl({},e)},(jd||(jd={})).filterSensitiveLog=function(e){return Nl({},e)},(Bd||(Bd={})).filterSensitiveLog=function(e){return Nl({},e)},(Fd||(Fd={})).filterSensitiveLog=function(e){return Nl({},e)},(zd||(zd={})).filterSensitiveLog=function(e){return Nl({},e)},(qd||(qd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.KeyId&&{KeyId:ea})},(Kd||(Kd={})).filterSensitiveLog=function(e){return Nl({},e)},(Vd||(Vd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMS&&{SSEKMS:qd.filterSensitiveLog(e.SSEKMS)})},(Hd||(Hd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Encryption&&{Encryption:Vd.filterSensitiveLog(e.Encryption)})},($d||($d={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.S3BucketDestination&&{S3BucketDestination:Hd.filterSensitiveLog(e.S3BucketDestination)})},(Gd||(Gd={})).filterSensitiveLog=function(e){return Nl({},e)},(Wd||(Wd={})).filterSensitiveLog=function(e){return Nl({},e)},(Yd||(Yd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Destination&&{Destination:$d.filterSensitiveLog(e.Destination)})},(Jd||(Jd={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.InventoryConfiguration&&{InventoryConfiguration:Yd.filterSensitiveLog(e.InventoryConfiguration)})},(Qd||(Qd={})).filterSensitiveLog=function(e){return Nl({},e)},(Zd||(Zd={})).filterSensitiveLog=function(e){return Nl({},e)},(Xd||(Xd={})).filterSensitiveLog=function(e){return Nl({},e)},(th=eh||(eh={})).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},th.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yd.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Xd.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(nh||(nh={})).filterSensitiveLog=function(e){return Nl({},e)},(rh||(rh={})).filterSensitiveLog=function(e){return Nl({},e)},(ih||(ih={})).filterSensitiveLog=function(e){return Nl({},e)},(oh||(oh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Filter&&{Filter:eh.filterSensitiveLog(e.Filter)})},(sh||(sh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Rules&&{Rules:e.Rules.map((function(e){return oh.filterSensitiveLog(e)}))})},(ah||(ah={})).filterSensitiveLog=function(e){return Nl({},e)},(uh||(uh={})).filterSensitiveLog=function(e){return Nl({},e)},(ch||(ch={})).filterSensitiveLog=function(e){return Nl({},e)},(lh||(lh={})).filterSensitiveLog=function(e){return Nl({},e)},(fh||(fh={})).filterSensitiveLog=function(e){return Nl({},e)},(dh||(dh={})).filterSensitiveLog=function(e){return Nl({},e)},(hh||(hh={})).filterSensitiveLog=function(e){return Nl({},e)},(ph||(ph={})).filterSensitiveLog=function(e){return Nl({},e)},(vh=gh||(gh={})).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},vh.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yd.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:ph.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(yh||(yh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Filter&&{Filter:gh.filterSensitiveLog(e.Filter)})},(mh||(mh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.MetricsConfiguration&&{MetricsConfiguration:yh.filterSensitiveLog(e.MetricsConfiguration)})},(bh||(bh={})).filterSensitiveLog=function(e){return Nl({},e)},(wh||(wh={})).filterSensitiveLog=function(e){return Nl({},e)},(Sh||(Sh={})).filterSensitiveLog=function(e){return Nl({},e)},(_h||(_h={})).filterSensitiveLog=function(e){return Nl({},e)},(Eh||(Eh={})).filterSensitiveLog=function(e){return Nl({},e)},(Ah||(Ah={})).filterSensitiveLog=function(e){return Nl({},e)},(Ch||(Ch={})).filterSensitiveLog=function(e){return Nl({},e)},(Ih||(Ih={})).filterSensitiveLog=function(e){return Nl({},e)},(Th||(Th={})).filterSensitiveLog=function(e){return Nl({},e)},(kh||(kh={})).filterSensitiveLog=function(e){return Nl({},e)},(Oh||(Oh={})).filterSensitiveLog=function(e){return Nl({},e)},(Ph||(Ph={})).filterSensitiveLog=function(e){return Nl({},e)},(xh||(xh={})).filterSensitiveLog=function(e){return Nl({},e)},(Nh||(Nh={})).filterSensitiveLog=function(e){return Nl({},e)},(Lh||(Lh={})).filterSensitiveLog=function(e){return Nl({},e)},(Mh||(Mh={})).filterSensitiveLog=function(e){return Nl({},e)},(Uh||(Uh={})).filterSensitiveLog=function(e){return Nl({},e)},(Rh||(Rh={})).filterSensitiveLog=function(e){return Nl({},e)},(Dh||(Dh={})).filterSensitiveLog=function(e){return Nl({},e)},(jh||(jh={})).filterSensitiveLog=function(e){return Nl({},e)},(Bh||(Bh={})).filterSensitiveLog=function(e){return Nl({},e)},(Fh||(Fh={})).filterSensitiveLog=function(e){return Nl({},e)},(zh||(zh={})).filterSensitiveLog=function(e){return Nl({},e)},(qh||(qh={})).filterSensitiveLog=function(e){return Nl({},e)},(Kh||(Kh={})).filterSensitiveLog=function(e){return Nl({},e)},(Vh||(Vh={})).filterSensitiveLog=function(e){return Nl({},e)},($h=Hh||(Hh={})).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},$h.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yd.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Vh.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Gh||(Gh={})).filterSensitiveLog=function(e){return Nl({},e)},(Wh||(Wh={})).filterSensitiveLog=function(e){return Nl({},e)},(Yh||(Yh={})).filterSensitiveLog=function(e){return Nl({},e)},(Jh||(Jh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Filter&&{Filter:Hh.filterSensitiveLog(e.Filter)})},(Qh||(Qh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Jh.filterSensitiveLog(e)}))})},(Zh||(Zh={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Qh.filterSensitiveLog(e.ReplicationConfiguration)})},(Xh||(Xh={})).filterSensitiveLog=function(e){return Nl({},e)},(ep||(ep={})).filterSensitiveLog=function(e){return Nl({},e)},(tp||(tp={})).filterSensitiveLog=function(e){return Nl({},e)},(np||(np={})).filterSensitiveLog=function(e){return Nl({},e)},(rp||(rp={})).filterSensitiveLog=function(e){return Nl({},e)},(ip||(ip={})).filterSensitiveLog=function(e){return Nl({},e)},(op||(op={})).filterSensitiveLog=function(e){return Nl({},e)},(sp||(sp={})).filterSensitiveLog=function(e){return Nl({},e)},(ap||(ap={})).filterSensitiveLog=function(e){return Nl({},e)},(up||(up={})).filterSensitiveLog=function(e){return Nl({},e)},(cp||(cp={})).filterSensitiveLog=function(e){return Nl({},e)},(lp||(lp={})).filterSensitiveLog=function(e){return Nl({},e)},(fp||(fp={})).filterSensitiveLog=function(e){return Nl({},e)},(dp||(dp={})).filterSensitiveLog=function(e){return Nl({},e)},(hp||(hp={})).filterSensitiveLog=function(e){return Nl({},e)},(pp||(pp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea})},(gp||(gp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea})},(vp||(vp={})).filterSensitiveLog=function(e){return Nl({},e)},(yp||(yp={})).filterSensitiveLog=function(e){return Nl({},e)},(mp||(mp={})).filterSensitiveLog=function(e){return Nl({},e)},(bp||(bp={})).filterSensitiveLog=function(e){return Nl({},e)},(wp||(wp={})).filterSensitiveLog=function(e){return Nl({},e)},(Sp||(Sp={})).filterSensitiveLog=function(e){return Nl({},e)},(_p||(_p={})).filterSensitiveLog=function(e){return Nl({},e)},(Ep||(Ep={})).filterSensitiveLog=function(e){return Nl({},e)},(Ap||(Ap={})).filterSensitiveLog=function(e){return Nl({},e)},(Cp||(Cp={})).filterSensitiveLog=function(e){return Nl({},e)},(Ip||(Ip={})).filterSensitiveLog=function(e){return Nl({},e)},(Tp||(Tp={})).filterSensitiveLog=function(e){return Nl({},e)},(kp||(kp={})).filterSensitiveLog=function(e){return Nl({},e)},(Op||(Op={})).filterSensitiveLog=function(e){return Nl({},e)},(Pp||(Pp={})).filterSensitiveLog=function(e){return Nl({},e)},(xp||(xp={})).filterSensitiveLog=function(e){return Nl({},e)},(Np||(Np={})).filterSensitiveLog=function(e){return Nl({},e)},(Lp||(Lp={})).filterSensitiveLog=function(e){return Nl({},e)},(Mp||(Mp={})).filterSensitiveLog=function(e){return Nl({},e)},(Up||(Up={})).filterSensitiveLog=function(e){return Nl({},e)},(Rp||(Rp={})).filterSensitiveLog=function(e){return Nl({},e)},(Dp||(Dp={})).filterSensitiveLog=function(e){return Nl({},e)},(jp||(jp={})).filterSensitiveLog=function(e){return Nl({},e)},(Bp||(Bp={})).filterSensitiveLog=function(e){return Nl({},e)},(Fp||(Fp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea})},(zp||(zp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea})},(qp||(qp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((function(e){return Cd.filterSensitiveLog(e)}))})},(Kp||(Kp={})).filterSensitiveLog=function(e){return Nl({},e)},(Vp||(Vp={})).filterSensitiveLog=function(e){return Nl({},e)},(Hp||(Hp={})).filterSensitiveLog=function(e){return Nl({},e)},($p||($p={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((function(e){return Yd.filterSensitiveLog(e)}))})},(Gp||(Gp={})).filterSensitiveLog=function(e){return Nl({},e)},(Wp||(Wp={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((function(e){return yh.filterSensitiveLog(e)}))})},(Yp||(Yp={})).filterSensitiveLog=function(e){return Nl({},e)},(Jp||(Jp={})).filterSensitiveLog=function(e){return Nl({},e)},(Qp||(Qp={})).filterSensitiveLog=function(e){return Nl({},e)},(Zp||(Zp={})).filterSensitiveLog=function(e){return Nl({},e)},(Xp||(Xp={})).filterSensitiveLog=function(e){return Nl({},e)},(eg||(eg={})).filterSensitiveLog=function(e){return Nl({},e)},(tg||(tg={})).filterSensitiveLog=function(e){return Nl({},e)},(ng||(ng={})).filterSensitiveLog=function(e){return Nl({},e)},(rg||(rg={})).filterSensitiveLog=function(e){return Nl({},e)},(ig||(ig={})).filterSensitiveLog=function(e){return Nl({},e)},(og||(og={})).filterSensitiveLog=function(e){return Nl({},e)},(sg||(sg={})).filterSensitiveLog=function(e){return Nl({},e)},(ag||(ag={})).filterSensitiveLog=function(e){return Nl({},e)},(ug||(ug={})).filterSensitiveLog=function(e){return Nl({},e)},(cg||(cg={})).filterSensitiveLog=function(e){return Nl({},e)},(lg||(lg={})).filterSensitiveLog=function(e){return Nl({},e)},(fg||(fg={})).filterSensitiveLog=function(e){return Nl({},e)},(dg||(dg={})).filterSensitiveLog=function(e){return Nl({},e)},(hg||(hg={})).filterSensitiveLog=function(e){return Nl({},e)},(pg||(pg={})).filterSensitiveLog=function(e){return Nl({},e)},(gg||(gg={})).filterSensitiveLog=function(e){return Nl({},e)},(vg||(vg={})).filterSensitiveLog=function(e){return Nl({},e)},(yg||(yg={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Cd.filterSensitiveLog(e.AnalyticsConfiguration)})},(mg||(mg={})).filterSensitiveLog=function(e){return Nl({},e)},(bg||(bg={})).filterSensitiveLog=function(e){return Nl({},e)},(wg||(wg={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ld.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(Sg||(Sg={})).filterSensitiveLog=function(e){return Nl({},e)},(_g||(_g={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.InventoryConfiguration&&{InventoryConfiguration:Yd.filterSensitiveLog(e.InventoryConfiguration)})},(Eg||(Eg={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Rules&&{Rules:e.Rules.map((function(e){return oh.filterSensitiveLog(e)}))})},(Ag||(Ag={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:Eg.filterSensitiveLog(e.LifecycleConfiguration)})},(Cg||(Cg={})).filterSensitiveLog=function(e){return Nl({},e)},(Ig||(Ig={})).filterSensitiveLog=function(e){return Nl({},e)},(Tg||(Tg={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.MetricsConfiguration&&{MetricsConfiguration:yh.filterSensitiveLog(e.MetricsConfiguration)})},(kg||(kg={})).filterSensitiveLog=function(e){return Nl({},e)},(Og||(Og={})).filterSensitiveLog=function(e){return Nl({},e)},(Pg||(Pg={})).filterSensitiveLog=function(e){return Nl({},e)},(xg||(xg={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Qh.filterSensitiveLog(e.ReplicationConfiguration)})},(Ng||(Ng={})).filterSensitiveLog=function(e){return Nl({},e)},(Lg||(Lg={})).filterSensitiveLog=function(e){return Nl({},e)},(Mg||(Mg={})).filterSensitiveLog=function(e){return Nl({},e)},(Ug||(Ug={})).filterSensitiveLog=function(e){return Nl({},e)},(Rg||(Rg={})).filterSensitiveLog=function(e){return Nl({},e)},(Dg||(Dg={})).filterSensitiveLog=function(e){return Nl({},e)},(jg||(jg={})).filterSensitiveLog=function(e){return Nl({},e)},(Bg||(Bg={})).filterSensitiveLog=function(e){return Nl({},e)},(Fg||(Fg={})).filterSensitiveLog=function(e){return Nl(Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea})},(zg||(zg={})).filterSensitiveLog=function(e){return Nl(Nl(Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea}),e.SSEKMSKeyId&&{SSEKMSKeyId:ea}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ea})},(qg||(qg={})).filterSensitiveLog=function(e){return Nl({},e)},(Kg||(Kg={})).filterSensitiveLog=function(e){return Nl({},e)},(Vg||(Vg={})).filterSensitiveLog=function(e){return Nl({},e)},(Hg||(Hg={})).filterSensitiveLog=function(e){return Nl({},e)},($g||($g={})).filterSensitiveLog=function(e){return Nl({},e)},(Gg||(Gg={})).filterSensitiveLog=function(e){return Nl({},e)},(Wg||(Wg={})).filterSensitiveLog=function(e){return Nl({},e)},(Yg||(Yg={})).filterSensitiveLog=function(e){return Nl({},e)},(Jg||(Jg={})).filterSensitiveLog=function(e){return Nl({},e)},(Qg||(Qg={})).filterSensitiveLog=function(e){return Nl({},e)},(Zg||(Zg={})).filterSensitiveLog=function(e){return Nl({},e)},(Xg||(Xg={})).filterSensitiveLog=function(e){return Nl({},e)},(ev||(ev={})).filterSensitiveLog=function(e){return Nl({},e)},(tv||(tv={})).filterSensitiveLog=function(e){return Nl({},e)},(nv||(nv={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.KMSKeyId&&{KMSKeyId:ea})};var dv=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=Gn(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+((""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"'))}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}();var hv=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}(),pv=ct((function(e,t){const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){const t=i.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=r}));const gv=function(e,t,n){const r={};if((!e.child||pv.isEmptyObject(e.child))&&(!e.attrsMap||pv.isEmptyObject(e.attrsMap)))return pv.isExist(e.val)?e.val:"";if(pv.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=pv.isTagNameInArrayMode(e.tagname,t.arrayMode,n);r[t.textNodeName]=i?[e.val]:e.val}pv.merge(r,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let o=0;o<i.length;o++){const s=i[o];if(e.child[s]&&e.child[s].length>1){r[s]=[];for(let n in e.child[s])e.child[s].hasOwnProperty(n)&&r[s].push(gv(e.child[s][n],t,s))}else{const i=gv(e.child[s][0],t,s),o=!0===t.arrayMode&&"object"==typeof i||pv.isTagNameInArrayMode(s,t.arrayMode,n);r[s]=o?[i]:i}}return r};var vv={convertToJson:gv},yv=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const mv=pv.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,pv.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const bv={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var wv=bv;const Sv=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var _v=Sv;function Ev(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=Cv(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function Av(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function Cv(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return pv.isExist(e)?e:""}const Iv=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function Tv(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=pv.getAllMatches(e,Iv),r=n.length,i={};for(let e=0;e<r;e++){const r=Av(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),i[t.attributeNamePrefix+r]=Cv(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function kv(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function Ov(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}var Pv={defaultOptions:wv,props:_v,getTraversalObj:function(e,t){e=e.replace(/\r\n?/g,"\n"),t=mv(t,bv,Sv);const n=new yv("!xml");let r=n,i="";for(let o=0;o<e.length;o++){if("<"===e[o])if("/"===e[o+1]){const n=Ov(e,">",o,"Closing Tag is not closed.");let s=e.substring(o+2,n).trim();if(t.ignoreNameSpace){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1))}r&&(r.val?r.val=pv.getValue(r.val)+""+Ev(s,i,t):r.val=Ev(s,i,t)),t.stopNodes.length&&t.stopNodes.includes(r.tagname)&&(r.child=[],null==r.attrsMap&&(r.attrsMap={}),r.val=e.substr(r.startIndex+1,o-r.startIndex-1)),r=r.parent,i="",o=n}else if("?"===e[o+1])o=Ov(e,"?>",o,"Pi Tag is not closed.");else if("!--"===e.substr(o+1,3))o=Ov(e,"--\x3e",o,"Comment is not closed.");else if("!D"===e.substr(o+1,2)){const t=Ov(e,">",o,"DOCTYPE is not closed.");o=e.substring(o,t).indexOf("[")>=0?e.indexOf("]>",o)+1:t}else if("!["===e.substr(o+1,2)){const n=Ov(e,"]]>",o,"CDATA is not closed.")-2,s=e.substring(o+9,n);if(i&&(r.val=pv.getValue(r.val)+""+Ev(r.tagname,i,t),i=""),t.cdataTagName){const e=new yv(t.cdataTagName,r,s);r.addChild(e),r.val=pv.getValue(r.val)+t.cdataPositionChar,s&&(e.val=s)}else r.val=(r.val||"")+(s||"");o=n+2}else{const n=kv(e,o+1);let s=n.data;const a=n.index,u=s.indexOf(" ");let c=s,l=!0;if(-1!==u&&(c=s.substr(0,u).replace(/\s\s*$/,""),s=s.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),l=c!==n.data.substr(e+1))}if(r&&i&&"!xml"!==r.tagname&&(r.val=pv.getValue(r.val)+""+Ev(r.tagname,i,t)),s.length>0&&s.lastIndexOf("/")===s.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),s=c):s=s.substr(0,s.length-1);const e=new yv(c,r,"");c!==s&&(e.attrsMap=Tv(s,t)),r.addChild(e)}else{const e=new yv(c,r);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=a),c!==s&&l&&(e.attrsMap=Tv(s,t)),r.addChild(e),r=e}i="",o=a}else i+=e[o]}return n}};const xv={allowBooleanAttributes:!1},Nv=["allowBooleanAttributes"];function Lv(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return Bv("InvalidXml","XML declaration allowed only at the start of the document.",zv(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function Mv(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Uv(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const Rv=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Dv(e,t){const n=pv.getAllMatches(e,Rv),r={};for(let i=0;i<n.length;i++){if(0===n[i][1].length)return Bv("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",qv(e,n[i][0]));if(void 0===n[i][3]&&!t.allowBooleanAttributes)return Bv("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",qv(e,n[i][0]));const o=n[i][2];if(!Fv(o))return Bv("InvalidAttr","Attribute '"+o+"' is an invalid name.",qv(e,n[i][0]));if(r.hasOwnProperty(o))return Bv("InvalidAttr","Attribute '"+o+"' is repeated.",qv(e,n[i][0]));r[o]=1}return!0}function jv(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function Bv(e,t,n){return{err:{code:e,msg:t,line:n}}}function Fv(e){return pv.isName(e)}function zv(e,t){return e.substring(0,t).split(/\r?\n/).length}function qv(e,t){return e.indexOf(t)+t.length}var Kv=function(e,t){t=pv.buildOptions(t,xv,Nv);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=Lv(e,s),s.err)return s}else{if("<"!==e[s]){if(" "===e[s]||"\t"===e[s]||"\n"===e[s]||"\r"===e[s])continue;return Bv("InvalidChar","char '"+e[s]+"' is not expected.",zv(e,s))}if(s++,"!"===e[s]){s=Mv(e,s);continue}{let a=!1;"/"===e[s]&&(a=!0,s++);let u="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)u+=e[s];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),s--),o=u,!pv.isName(o)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",Bv("InvalidTag",t,zv(e,s))}const c=Uv(e,s);if(!1===c)return Bv("InvalidAttr","Attributes for '"+u+"' have open quote.",zv(e,s));let l=c.value;if(s=c.index,"/"===l[l.length-1]){l=l.substring(0,l.length-1);const n=Dv(l,t);if(!0!==n)return Bv(n.err.code,n.err.msg,zv(e,s-l.length+n.err.line));r=!0}else if(a){if(!c.tagClosed)return Bv("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",zv(e,s));if(l.trim().length>0)return Bv("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",zv(e,s));{const t=n.pop();if(u!==t)return Bv("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",zv(e,s));0==n.length&&(i=!0)}}else{const o=Dv(l,t);if(!0!==o)return Bv(o.err.code,o.err.msg,zv(e,s-l.length+o.err.line));if(!0===i)return Bv("InvalidXml","Multiple possible root nodes found.",zv(e,s));n.push(u),r=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=Mv(e,s);continue}if("?"!==e[s+1])break;if(s=Lv(e,++s),s.err)return s}else if("&"===e[s]){const t=jv(e,s);if(-1==t)return Bv("InvalidChar","char '&' is not expected.",zv(e,s));s=t}"<"===e[s]&&s--}}var o;return r?!(n.length>0)||Bv("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):Bv("InvalidXml","Start tag expected.",1)};const Vv=function(e){return String.fromCharCode(e)},Hv={nilChar:Vv(176),missingChar:Vv(201),nilPremitive:Vv(175),missingPremitive:Vv(200),emptyChar:Vv(178),emptyValue:Vv(177),boundryChar:Vv(179),objStart:Vv(198),arrStart:Vv(204),arrayEnd:Vv(185)},$v=[Hv.nilChar,Hv.nilPremitive,Hv.missingChar,Hv.missingPremitive,Hv.boundryChar,Hv.emptyChar,Hv.emptyValue,Hv.arrayEnd,Hv.objStart,Hv.arrStart],Gv=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?Wv(e[0].val):Wv(e);{const i=void 0===(r=e)?Hv.missingChar:null===r?Hv.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||Hv.emptyChar;if(!0===i){let r="";if(Array.isArray(t)){r+=Hv.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const n=Wv(e[t].val);r=Yv(r,n)}else for(let t=0;t<o;t++){const o=Gv(e[t],i,n);r=Yv(r,o)}r+=Hv.arrayEnd}else{r+=Hv.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const s=i[o];let a;a=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[s]?Gv(e.attrsMap[s],t[s],n):s===n.textNodeName?Gv(e.val,t[s],n):Gv(e.child[s],t[s],n),r=Yv(r,a)}}return r}return i}var r},Wv=function(e){switch(e){case void 0:return Hv.missingPremitive;case null:return Hv.nilPremitive;case"":return Hv.emptyValue;default:return e}},Yv=function(e,t){return Jv(t[0])||Jv(e[e.length-1])||(e+=Hv.boundryChar),e+t},Jv=function(e){return-1!==$v.indexOf(e)};const Qv=pv.buildOptions;var Zv={convert2nimn:function(e,t,n){return n=Qv(n,Pv.defaultOptions,Pv.props),Gv(e,t,n)}};const Xv=pv.buildOptions,ey=function(e,t,n){let r="{";const i=Object.keys(e.child);for(let u=0;u<i.length;u++){var o=i[u];if(e.child[o]&&e.child[o].length>1){for(var s in r+='"'+o+'" : [ ',e.child[o])r+=ey(e.child[o][s],t)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+o+'" : '+ey(e.child[o][0],t)+" ,"}return pv.merge(r,e.attrsMap),pv.isEmptyObject(r)?pv.isExist(e.val)?e.val:"":(pv.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(r+='"'+t.textNodeName+'" : '+(!0!==(a=e.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}");var a};var ty={convertToJsonString:function(e,t){return(t=Xv(t,Pv.defaultOptions,Pv.props)).indentBy=t.indentBy||"",ey(e,t)}};const ny=pv.buildOptions,ry={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},iy=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function oy(e){this.options=ny(e,ry,iy),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=hy),this.options.cdataTagName?this.isCDATA=py:this.isCDATA=function(){return!1},this.replaceCDATAstr=sy,this.replaceCDATAarr=ay,this.options.format?(this.indentate=dy,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=fy,this.buildObjNode=cy):(this.buildTextNode=ly,this.buildObjNode=uy),this.buildTextValNode=ly,this.buildObjectNode=uy}function sy(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function ay(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function uy(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function cy(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function ly(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function fy(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function dy(e){return this.options.indentBy.repeat(e)}function hy(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function py(e){return e===this.options.cdataTagName}oy.prototype.parse=function(e){return this.j2x(e,0).val},oy.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let s=0;s<o;s++){const o=i[s];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}};var gy=oy,vy=ct((function(e,t){const n=Pv,r=pv.buildOptions;t.parse=function(e,t,i){if(i){!0===i&&(i={});const t=Kv(e,i);if(!0!==t)throw Error(t.err.msg)}t=r(t,n.defaultOptions,n.props);const o=Pv.getTraversalObj(e,t);return vv.convertToJson(o,t)},t.convertTonimn=Zv.convert2nimn,t.getTraversalObj=Pv.getTraversalObj,t.convertToJson=vv.convertToJson,t.convertToJsonString=ty.convertToJsonString,t.validate=Kv,t.j2xParser=gy,t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}})),yy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Ml(this,(function(l){switch(l.label){case 0:return r=[Nl({},e)],c={},[4,Fy(e.body,t)];case 1:switch(n=Nl.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=zy(e,n.body),o){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,Oy(n)];case 3:return i=Nl.apply(void 0,[Nl.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:Dy(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=Nl(Nl({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:Dy(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},my=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},by=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},wy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},Sy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:return r=[Nl({},e)],l={},[4,Fy(e.body,t)];case 1:switch(n=Nl.apply(void 0,r.concat([(l.body=f.sent(),l)])),o="UnknownError",o=zy(e,n.body),o){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return s=[{}],[4,Iy(n)];case 3:return i=Nl.apply(void 0,[Nl.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Dy(e)}]),[3,7];case 4:return a=[{}],[4,ky(n)];case 5:return i=Nl.apply(void 0,[Nl.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Dy(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=Nl(Nl({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Dy(e)}),f.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},_y=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Ml(this,(function(l){switch(l.label){case 0:return r=[Nl({},e)],c={},[4,Fy(e.body,t)];case 1:switch(n=Nl.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=zy(e,n.body),o){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,Ty(n)];case 3:return i=Nl.apply(void 0,[Nl.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:Dy(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=Nl(Nl({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:Dy(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Ey=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},Ay=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},Cy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ml(this,(function(c){switch(c.label){case 0:return r=[Nl({},e)],u={},[4,Fy(e.body,t)];case 1:return n=Nl.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=zy(e,n.body),s=n.body,o=s.code||s.Code||o,i=Nl(Nl({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Dy(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},Iy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var t,n;return Ml(this,(function(r){return t={name:"InvalidObjectState",$fault:"client",$metadata:Dy(e),AccessTier:void 0,StorageClass:void 0},void 0!==(n=e.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]}))}))},Ty=function(e,t){return Ll(void 0,void 0,void 0,(function(){var t;return Ml(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:Dy(e)},e.body,[2,t]}))}))},ky=function(e,t){return Ll(void 0,void 0,void 0,(function(){var t;return Ml(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:Dy(e)},e.body,[2,t]}))}))},Oy=function(e,t){return Ll(void 0,void 0,void 0,(function(){var t;return Ml(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:Dy(e)},e.body,[2,t]}))}))},Py=function(e,t){var n=new dv("CompletedMultipartUpload");void 0!==e.Parts&&null!==e.Parts&&xy(e.Parts).map((function(e){e=e.withName("Part"),n.addChildNode(e)}));return n},xy=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new dv("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var r=new dv("ETag").addChildNode(new hv(e.ETag)).withName("ETag");n.addChildNode(r)}void 0!==e.PartNumber&&null!==e.PartNumber&&(r=new dv("PartNumber").addChildNode(new hv(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r));return n}(e).withName("member")}))},Ny=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e)}))},Ly=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},My=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=Uy(e.Owner)),n}(e)}))},Uy=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Ry=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n}(e)}))},Dy=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},jy=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},By=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Fy=function(e,t){return function(e,t){return jy(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){if(e.length){var t=vy.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),qo(r)}return{}}))},zy=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},qy=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:wf.filterSensitiveLog,outputFilterSensitiveLog:bf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl({},By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n;return Ml(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,yy(e,t)]:(n={$metadata:Dy(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,jy(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo),Ky=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(lv(t)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:xf.filterSensitiveLog,outputFilterSensitiveLog:kf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return Ml(this,(function(h){switch(h.label){case 0:if(n=Nl(Nl({"content-type":"application/xml"},By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(a=Py(e.MultipartUpload),s='<?xml version="1.0" encoding="UTF-8"?>',a.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=a.toString()),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ur({protocol:f,hostname:c,port:d,method:"POST",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r;return Ml(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,my(e,t)]:(n={$metadata:Dy(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Fy(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo);var Vy,Hy,$y,Gy,Wy,Yy,Jy,Qy,Zy,Xy,em,tm,nm,rm,im,om,sm,am,um,cm,lm,fm,dm,hm,pm,gm,vm,ym,mm,bm,wm,Sm,_m,Em,Am,Cm,Im,Tm,km={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Om=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Hn(t,void 0,void 0,(function(){var t,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b;return $n(this,(function(w){switch(w.label){case 0:t=Kn({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=Gn(i),s=o.next(),w.label=2;case 2:return s.done?[3,5]:(a=s.value,(u=t[a.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),l=e.base64Encoder(c),(f=new e.md5).update(c),d=[Kn({},t)],(b={})[a.target]=l,h=a.hash,g=(p=e).base64Encoder,[4,f.digest()]):[3,4]);case 3:t=Kn.apply(void 0,d.concat([(b[h]=g.apply(p,[w.sent()]),b)])),w.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return v=w.sent(),y={error:v},[3,8];case 7:try{s&&!s.done&&(m=o.return)&&m.call(o)}finally{if(y)throw y.error}return[7];case 8:return[2,n(Kn(Kn({},r),{input:t}))]}}))}))}}}(e),km)}}},Pm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(Om(t)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:qf.filterSensitiveLog,outputFilterSensitiveLog:zf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl({},By(e.ACL)&&{"x-amz-acl":e.ACL}),By(e.CacheControl)&&{"cache-control":e.CacheControl}),By(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),By(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),By(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),By(e.ContentType)&&{"content-type":e.ContentType}),By(e.Expires)&&{expires:$o(e.Expires).toString()}),By(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),By(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),By(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),By(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),By(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),By(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),By(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),By(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),By(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),By(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),By(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),By(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),By(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.Tagging)&&{"x-amz-tagging":e.Tagging}),By(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),By(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),By(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Nl(Nl({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o={uploads:""},[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"POST",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r;return Ml(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,by(e,t)]:(n={$metadata:Dy(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Fy(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo),xm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:rd.filterSensitiveLog,outputFilterSensitiveLog:nd.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl(Nl(Nl({},By(e.MFA)&&{"x-amz-mfa":e.MFA}),By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n;return Ml(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,wy(e,t)]:(n={$metadata:Dy(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,jy(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo),Nm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(Om(t)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:gp.filterSensitiveLog,outputFilterSensitiveLog:pp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl({},By(e.IfMatch)&&{"if-match":e.IfMatch}),By(e.IfModifiedSince)&&{"if-modified-since":$o(e.IfModifiedSince).toString()}),By(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),By(e.IfUnmodifiedSince)&&{"if-unmodified-since":$o(e.IfUnmodifiedSince).toString()}),By(e.Range)&&{range:e.Range}),By(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),By(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),By(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r;return Ml(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,Sy(e,t)]:(n={$metadata:Dy(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(Bo),Lm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:og.filterSensitiveLog,outputFilterSensitiveLog:ig.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl({},By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Fo(i)),o=Nl(Nl(Nl(Nl(Nl({},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r;return Ml(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,_y(e,t)]:(n={$metadata:Dy(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Fy(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=Ny(zo(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=My(zo(r.Contents))),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(n.Marker=r.Marker),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextMarker&&(n.NextMarker=r.NextMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo),Mm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:pg.filterSensitiveLog,outputFilterSensitiveLog:hg.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ml(this,(function(f){switch(f.label){case 0:if(n=Nl(Nl({},By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl(Nl(Nl({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ur({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r;return Ml(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ey(e,t)]:(n={$metadata:Dy(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Fy(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=Ly(r.Initiator)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(n.Owner=Uy(r.Owner)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=Ry(zo(r.Part))),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo),Um=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(Om(t)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:zg.filterSensitiveLog,outputFilterSensitiveLog:Fg.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return Ml(this,(function(h){switch(h.label){case 0:if(n=Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl(Nl({"content-type":"application/octet-stream"},By(e.ACL)&&{"x-amz-acl":e.ACL}),By(e.CacheControl)&&{"cache-control":e.CacheControl}),By(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),By(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),By(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),By(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),By(e.ContentMD5)&&{"content-md5":e.ContentMD5}),By(e.ContentType)&&{"content-type":e.ContentType}),By(e.Expires)&&{expires:$o(e.Expires).toString()}),By(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),By(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),By(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),By(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),By(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),By(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),By(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),By(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),By(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),By(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),By(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),By(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),By(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.Tagging)&&{"x-amz-tagging":e.Tagging}),By(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),By(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),By(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Nl(Nl({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ur({protocol:f,hostname:c,port:d,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n;return Ml(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ay(e,t)]:(n={$metadata:Dy(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,jy(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo);(Vy||(Vy={})).filterSensitiveLog=function(e){return Nl({},e)},(Hy||(Hy={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Encryption&&{Encryption:nv.filterSensitiveLog(e.Encryption)})},($y||($y={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.S3&&{S3:Hy.filterSensitiveLog(e.S3)})},(Wy=Gy||(Gy={})).IGNORE="IGNORE",Wy.NONE="NONE",Wy.USE="USE",(Yy||(Yy={})).filterSensitiveLog=function(e){return Nl({},e)},(Qy=Jy||(Jy={})).DOCUMENT="DOCUMENT",Qy.LINES="LINES",(Zy||(Zy={})).filterSensitiveLog=function(e){return Nl({},e)},(Xy||(Xy={})).filterSensitiveLog=function(e){return Nl({},e)},(em||(em={})).filterSensitiveLog=function(e){return Nl({},e)},(nm=tm||(tm={})).ALWAYS="ALWAYS",nm.ASNEEDED="ASNEEDED",(rm||(rm={})).filterSensitiveLog=function(e){return Nl({},e)},(im||(im={})).filterSensitiveLog=function(e){return Nl({},e)},(om||(om={})).filterSensitiveLog=function(e){return Nl({},e)},(sm||(sm={})).filterSensitiveLog=function(e){return Nl({},e)},(am||(am={})).SELECT="SELECT",(um||(um={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.OutputLocation&&{OutputLocation:$y.filterSensitiveLog(e.OutputLocation)})},(cm||(cm={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.RestoreRequest&&{RestoreRequest:um.filterSensitiveLog(e.RestoreRequest)})},(lm||(lm={})).filterSensitiveLog=function(e){return Nl({},e)},(fm||(fm={})).filterSensitiveLog=function(e){return Nl({},e)},(dm||(dm={})).filterSensitiveLog=function(e){return Nl({},e)},(hm||(hm={})).filterSensitiveLog=function(e){return Nl({},e)},(pm||(pm={})).filterSensitiveLog=function(e){return Nl({},e)},(gm||(gm={})).filterSensitiveLog=function(e){return Nl({},e)},(vm||(vm={})).filterSensitiveLog=function(e){return Nl({},e)},(mm=ym||(ym={})).visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},mm.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:pm.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:vm.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:hm.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:lm.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:fm.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(bm||(bm={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(wm||(wm={})).filterSensitiveLog=function(e){return Nl({},e)},(Sm||(Sm={})).filterSensitiveLog=function(e){return Nl({},e)},(_m||(_m={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea})},(Em||(Em={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea})},(Am||(Am={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea})},(Cm||(Cm={})).filterSensitiveLog=function(e){return Nl({},e)},(Im||(Im={})).filterSensitiveLog=function(e){return Nl(Nl({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ea})},(Tm||(Tm={})).filterSensitiveLog=function(e){return Nl(Nl(Nl({},e),e.SSECustomerKey&&{SSECustomerKey:ea}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:ea})};var Rm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return xl(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ua(t,this.serialize,this.deserialize)),this.middlewareStack.use(Om(t)),this.middlewareStack.use(gf(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Am.filterSensitiveLog,outputFilterSensitiveLog:Em.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return Ml(this,(function(h){switch(h.label){case 0:if(n=Nl(Nl(Nl(Nl(Nl(Nl(Nl({"content-type":"application/octet-stream"},By(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),By(e.ContentMD5)&&{"content-md5":e.ContentMD5}),By(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),By(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),By(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),By(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),By(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Fo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Fo(e)})).join("/")),o=Nl(Nl({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ur({protocol:f,hostname:c,port:d,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ll(void 0,void 0,void 0,(function(){var n;return Ml(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Cy(e,t)]:(n={$metadata:Dy(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,jy(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Bo);function Dm(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(o+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);var s=n?jr(n):"";return s&&"?"!==s[0]&&(s="?"+s),r+"//"+o+i+s}function jm(e,t){return Hn(this,void 0,void 0,(function(){var n,r,i=this;return $n(this,(function(o){switch(o.label){case 0:return n=function(e){return function(e){return Hn(i,void 0,void 0,(function(){return $n(this,(function(t){return[2,{output:{request:e.request},response:void 0}]}))}))}},(r=e.middlewareStack.clone()).add(n,{step:"build",priority:"low"}),[4,t.resolveMiddleware(r,e.config,void 0)(t).then((function(e){return e.output.request}))];case 1:return[2,o.sent()]}}))}))}var Bm=function(){function e(e){var t=Kn({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new wo(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,r=void 0===n?new Set:n,i=t.unhoistableHeaders,o=void 0===i?new Set:i,s=Vn(t,["unsignableHeaders","unhoistableHeaders"]);return Hn(this,void 0,void 0,(function(){return $n(this,(function(t){return r.add("content-type"),Object.keys(e.headers).map((function(e){return e.toLowerCase()})).filter((function(e){return e.startsWith("x-amz-server-side-encryption")})).forEach((function(e){o.add(e)})),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",e.headers.host||(e.headers.host=e.hostname),[2,this.signer.presign(e,Kn({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o},s))]}))}))},e}(),Fm=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},zm=Object.prototype.toString;function qm(e){return"[object Array]"===zm.call(e)}function Km(e){return void 0===e}function Vm(e){return null!==e&&"object"==typeof e}function Hm(e){if("[object Object]"!==zm.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function $m(e){return"[object Function]"===zm.call(e)}function Gm(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),qm(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var Wm={isArray:qm,isArrayBuffer:function(e){return"[object ArrayBuffer]"===zm.call(e)},isBuffer:function(e){return null!==e&&!Km(e)&&null!==e.constructor&&!Km(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Vm,isPlainObject:Hm,isUndefined:Km,isDate:function(e){return"[object Date]"===zm.call(e)},isFile:function(e){return"[object File]"===zm.call(e)},isBlob:function(e){return"[object Blob]"===zm.call(e)},isFunction:$m,isStream:function(e){return Vm(e)&&$m(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Gm,merge:function e(){var t={};function n(n,r){Hm(t[r])&&Hm(n)?t[r]=e(t[r],n):Hm(n)?t[r]=e({},n):qm(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)Gm(arguments[r],n);return t},extend:function(e,t,n){return Gm(t,(function(t,r){e[r]=n&&"function"==typeof t?Fm(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function Ym(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Jm=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(Wm.isURLSearchParams(t))r=t.toString();else{var i=[];Wm.forEach(t,(function(e,t){null!=e&&(Wm.isArray(e)?t+="[]":e=[e],Wm.forEach(e,(function(e){Wm.isDate(e)?e=e.toISOString():Wm.isObject(e)&&(e=JSON.stringify(e)),i.push(Ym(t)+"="+Ym(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function Qm(){this.handlers=[]}Qm.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Qm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Qm.prototype.forEach=function(e){Wm.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Zm=Qm,Xm=function(e,t,n){return Wm.forEach(n,(function(n){e=n(e,t)})),e},eb=function(e){return!(!e||!e.__CANCEL__)},tb=function(e,t){Wm.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},nb=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,i)},rb=Wm.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),Wm.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Wm.isString(r)&&s.push("path="+r),Wm.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ib=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ob=Wm.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Wm.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},sb=function(e){return new Promise((function(t,n){var r=e.data,i=e.headers;Wm.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(s+":"+a)}var u,c,l=(u=e.baseURL,c=e.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,c):c);if(o.open(e.method.toUpperCase(),Jm(l,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(e){var t,n,r,i={};return e?(Wm.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=Wm.trim(e.substr(0,r)).toLowerCase(),n=Wm.trim(e.substr(r+1)),t){if(i[t]&&ib.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}(o.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(nb("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,i),o=null}},o.onabort=function(){o&&(n(nb("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(nb("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(nb(t,e,"ECONNABORTED",o)),o=null},Wm.isStandardBrowserEnv()){var f=(e.withCredentials||ob(l))&&e.xsrfCookieName?rb.read(e.xsrfCookieName):void 0;f&&(i[e.xsrfHeaderName]=f)}if("setRequestHeader"in o&&Wm.forEach(i,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)})),Wm.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),r||(r=null),o.send(r)}))},ab={"Content-Type":"application/x-www-form-urlencoded"};function ub(e,t){!Wm.isUndefined(e)&&Wm.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var cb,lb={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(cb=sb),cb),transformRequest:[function(e,t){return tb(t,"Accept"),tb(t,"Content-Type"),Wm.isFormData(e)||Wm.isArrayBuffer(e)||Wm.isBuffer(e)||Wm.isStream(e)||Wm.isFile(e)||Wm.isBlob(e)?e:Wm.isArrayBufferView(e)?e.buffer:Wm.isURLSearchParams(e)?(ub(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Wm.isObject(e)?(ub(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};lb.headers={common:{Accept:"application/json, text/plain, */*"}},Wm.forEach(["delete","get","head"],(function(e){lb.headers[e]={}})),Wm.forEach(["post","put","patch"],(function(e){lb.headers[e]=Wm.merge(ab)}));var fb=lb;function db(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var hb=function(e){return db(e),e.headers=e.headers||{},e.data=Xm(e.data,e.headers,e.transformRequest),e.headers=Wm.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Wm.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||fb.adapter)(e).then((function(t){return db(e),t.data=Xm(t.data,t.headers,e.transformResponse),t}),(function(t){return eb(t)||(db(e),t&&t.response&&(t.response.data=Xm(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},pb=function(e,t){t=t||{};var n={},r=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return Wm.isPlainObject(e)&&Wm.isPlainObject(t)?Wm.merge(e,t):Wm.isPlainObject(t)?Wm.merge({},t):Wm.isArray(t)?t.slice():t}function u(r){Wm.isUndefined(t[r])?Wm.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}Wm.forEach(r,(function(e){Wm.isUndefined(t[e])||(n[e]=a(void 0,t[e]))})),Wm.forEach(i,u),Wm.forEach(o,(function(r){Wm.isUndefined(t[r])?Wm.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])})),Wm.forEach(s,(function(r){r in t?n[r]=a(e[r],t[r]):r in e&&(n[r]=a(void 0,e[r]))}));var c=r.concat(i).concat(o).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return Wm.forEach(l,u),n};function gb(e){this.defaults=e,this.interceptors={request:new Zm,response:new Zm}}gb.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=pb(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[hb,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},gb.prototype.getUri=function(e){return e=pb(this.defaults,e),Jm(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Wm.forEach(["delete","get","head","options"],(function(e){gb.prototype[e]=function(t,n){return this.request(pb(n||{},{method:e,url:t,data:(n||{}).data}))}})),Wm.forEach(["post","put","patch"],(function(e){gb.prototype[e]=function(t,n,r){return this.request(pb(r||{},{method:e,url:t,data:n}))}}));var vb=gb;function yb(e){this.message=e}yb.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},yb.prototype.__CANCEL__=!0;var mb=yb;function bb(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new mb(e),t(n.reason))}))}bb.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},bb.source=function(){var e;return{token:new bb((function(t){e=t})),cancel:e}};var wb=bb;function Sb(e){var t=new vb(e),n=Fm(vb.prototype.request,t);return Wm.extend(n,vb.prototype,t),Wm.extend(n,t),n}var _b=Sb(fb);_b.Axios=vb,_b.create=function(e){return Sb(pb(_b.defaults,e))},_b.Cancel=mb,_b.CancelToken=wb,_b.isCancel=eb,_b.all=function(e){return Promise.all(e)},_b.spread=function(e){return function(t){return e.apply(null,t)}},_b.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var Eb=_b,Ab=_b;Eb.default=Ab;var Cb=Eb,Ib=new Pe("axios-http-handler"),Tb=function(){function e(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;if(e.query){var o=jr(e.query);o&&(i+="?"+o)}var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,delete u.headers.host,e.body?u.data=e.body:u.headers["Content-Type"]&&(u.data=null),r&&(u.onUploadProgress=function(e){r.emit("sendProgress",e),Ib.debug(e)}),u.responseType="blob";var c=[Cb.request(u).then((function(e){return{response:new Mr({headers:e.headers,statusCode:e.status,body:e.data})}})).catch((function(e){throw Ib.error(e),e})),kb(n)];return Promise.race(c)},e}();function kb(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)}),e)}))}var Ob,Pb="object"==typeof Reflect?Reflect:null,xb=Pb&&"function"==typeof Pb.apply?Pb.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Ob=Pb&&"function"==typeof Pb.ownKeys?Pb.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Nb=Number.isNaN||function(e){return e!=e};function Lb(){Lb.init.call(this)}var Mb=Lb,Ub=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}Hb(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&Hb(e,"error",t,n)}(e,i,{once:!0})}))};Lb.EventEmitter=Lb,Lb.prototype._events=void 0,Lb.prototype._eventsCount=0,Lb.prototype._maxListeners=void 0;var Rb=10;function Db(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function jb(e){return void 0===e._maxListeners?Lb.defaultMaxListeners:e._maxListeners}function Bb(e,t,n,r){var i,o,s,a;if(Db(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=jb(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function Fb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zb(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Fb.bind(r);return i.listener=n,r.wrapFn=i,i}function qb(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):Vb(i,i.length)}function Kb(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function Vb(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Hb(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(Lb,"defaultMaxListeners",{enumerable:!0,get:function(){return Rb},set:function(e){if("number"!=typeof e||e<0||Nb(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Rb=e}}),Lb.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Lb.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Nb(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Lb.prototype.getMaxListeners=function(){return jb(this)},Lb.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)xb(a,this,t);else{var u=a.length,c=Vb(a,u);for(n=0;n<u;++n)xb(c[n],this,t)}return!0},Lb.prototype.addListener=function(e,t){return Bb(this,e,t,!1)},Lb.prototype.on=Lb.prototype.addListener,Lb.prototype.prependListener=function(e,t){return Bb(this,e,t,!0)},Lb.prototype.once=function(e,t){return Db(t),this.on(e,zb(this,e,t)),this},Lb.prototype.prependOnceListener=function(e,t){return Db(t),this.prependListener(e,zb(this,e,t)),this},Lb.prototype.removeListener=function(e,t){var n,r,i,o,s;if(Db(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},Lb.prototype.off=Lb.prototype.removeListener,Lb.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},Lb.prototype.listeners=function(e){return qb(this,e,!0)},Lb.prototype.rawListeners=function(e){return qb(this,e,!1)},Lb.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Kb.call(e,t)},Lb.prototype.listenerCount=Kb,Lb.prototype.eventNames=function(){return this._eventsCount>0?Ob(this._events):[]},Mb.once=Ub;var $b=function(){return($b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Gb=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Wb=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Yb=new Pe("AWSS3ProviderManagedUpload"),Jb=function(){function e(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}return e.prototype.upload=function(){return Gb(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Wb(this,(function(s){switch(s.label){case 0:return e=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return e.body=s.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new Um(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,s.sent().send(t)];case 3:return[4,this.createMultiPartUpload()];case 4:n=s.sent(),r=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,s.label=5;case 5:return i<r?[4,this.checkIfUploadCancelled(n)]:[3,10];case 6:return s.sent(),o=this.createParts(i),[4,this.uploadParts(n,o)];case 7:return s.sent(),[4,this.checkIfUploadCancelled(n)];case 8:s.sent(),s.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(n)];case 11:return[2,s.sent()]}}))}))},e.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new Mb.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},e.prototype.createMultiPartUpload=function(){return Gb(this,void 0,void 0,(function(){var e,t,n,r=this;return Wb(this,(function(i){switch(i.label){case 0:return e=new Pm(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(t=i.sent()).middlewareStack.add((function(e){return function(t){return r.params.ContentType&&t&&t.request&&t.request.headers&&(t.request.headers["Content-Type"]=r.params.ContentType),e(t)}}),{step:"build"}),[4,t.send(e)];case 2:return n=i.sent(),Yb.debug(n.UploadId),[2,n.UploadId]}}))}))},e.prototype.uploadParts=function(e,t){return Gb(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p;return Wb(this,(function(g){switch(g.label){case 0:n=[],g.label=1;case 1:g.trys.push([1,6,7,8]),r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=r.next(),g.label=2;case 2:return i.done?[3,5]:(o=i.value,this.setupEventListener(o),s={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:e,Key:this.params.Key,Bucket:this.params.Bucket},a=new Rm(s),[4,this._createNewS3Client(this.opts,o.emitter)]);case 3:u=g.sent(),n.push(u.send(a)),g.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return c=g.sent(),h={error:c},[3,8];case 7:try{i&&!i.done&&(p=r.return)&&p.call(r)}finally{if(h)throw h.error}return[7];case 8:return g.trys.push([8,10,,11]),[4,Promise.all(n)];case 9:for(l=g.sent(),f=0;f<l.length;f++)this.multiPartMap.push({PartNumber:t[f].partNumber,ETag:l[f].ETag});return[3,11];case 10:return d=g.sent(),Yb.error("error happened while uploading a part. Cancelling the multipart upload",d),this.cancelUpload(),[2];case 11:return[2]}}))}))},e.prototype.finishMultiPartUpload=function(e){return Gb(this,void 0,void 0,(function(){var t,n,r,i;return Wb(this,(function(o){switch(o.label){case 0:return t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e,MultipartUpload:{Parts:this.multiPartMap}},n=new Ky(t),[4,this._createNewS3Client(this.opts)];case 1:r=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,r.send(n)];case 3:return[2,o.sent().Key];case 4:return i=o.sent(),Yb.error("error happened while finishing the upload. Cancelling the multipart upload",i),this.cancelUpload(),[2];case 5:return[2]}}))}))},e.prototype.checkIfUploadCancelled=function(e){return Gb(this,void 0,void 0,(function(){var t,n;return Wb(this,(function(r){switch(r.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cleanup(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}}))}))},e.prototype.cancelUpload=function(){this.cancel=!0},e.prototype.cleanup=function(e){return Gb(this,void 0,void 0,(function(){var t,n,r;return Wb(this,(function(i){switch(i.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e},[4,this._createNewS3Client(this.opts)];case 1:return[4,(n=i.sent()).send(new qy(t))];case 2:return i.sent(),[4,n.send(new Mm(t))];case 3:if((r=i.sent())&&r.Parts&&r.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}}))}))},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on("sendProgress",(function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded}))},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit("sendProgress",{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){return Gb(this,void 0,void 0,(function(){return Wb(this,(function(t){switch(t.label){case 0:return this.isGenericObject(e)?[2,JSON.stringify(e)]:[3,1];case 1:return this.isBlob(e)?Le.isReactNative?[4,Yr(e)]:[3,3]:[3,4];case 2:return[2,t.sent()];case 3:case 4:return[2,e]}}))}))},e.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},e.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(this.byteLength(e)>=0)}catch(t){return!0}return!1},e.prototype._createNewS3Client=function(e,t){return Gb(this,void 0,void 0,(function(){var n,r,i,o,s;return Wb(this,(function(a){switch(a.label){case 0:return[4,this._getCredentials()];case 1:return n=a.sent(),r=e.region,i=e.dangerouslyConnectToHttpEndpointForTesting,o={},i&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),(s=new fv($b($b({region:r,credentials:n},o),{requestHandler:new Tb({},t),customUserAgent:Me()}))).middlewareStack.remove("contentLengthMiddleware"),[2,s]}}))}))},e.prototype._getCredentials=function(){return Wa.get().then((function(e){if(!e)return!1;var t=Wa.shear(e);return Yb.debug("set credentials for storage",t),t})).catch((function(e){return Yb.warn("ensure credentials error",e),!1}))},e}(),Qb=function(){return(Qb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Zb=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Xb=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ew=new Pe("AWSS3Provider"),tw="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",nw=function(e,t,n,r,i){if(e){var o={attrs:n};r&&(o.metrics=r),Fe.dispatch("storage",{event:t,data:o,message:i},"Storage",tw)}},rw=function(){function e(e){this._config=e||{},ew.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(ew.debug("configure Storage",e),!e)return this._config;var t=Cn.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||ew.debug("Do not have bucket yet"),this._config},e.prototype.get=function(e,t){return Zb(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E;return Xb(this,(function(A){switch(A.label){case 0:return[4,this._ensureCredentials()];case 1:if(!A.sent())return[2,Promise.reject("No credentials")];if(n=Object.assign({},this._config,t),r=n.bucket,i=n.download,o=n.cacheControl,s=n.contentDisposition,a=n.contentEncoding,u=n.contentLanguage,c=n.contentType,l=n.expires,f=n.track,d=this._prefix(n),h=d+e,p=this._createNewS3Client(n),ew.debug("get "+e+" from "+h),g={Bucket:r,Key:h},o&&(g.ResponseCacheControl=o),s&&(g.ResponseContentDisposition=s),a&&(g.ResponseContentEncoding=a),u&&(g.ResponseContentLanguage=u),c&&(g.ResponseContentType=c),!0!==i)return[3,5];v=new Nm(g),A.label=2;case 2:return A.trys.push([2,4,,5]),[4,p.send(v)];case 3:return y=A.sent(),nw(f,"download",{method:"get",result:"success"},{fileSize:Number(y.Body.size||y.Body.length)},"Download success for "+e),[2,y];case 4:throw m=A.sent(),nw(f,"download",{method:"get",result:"failed"},null,"Download failed with "+m.message),m;case 5:g.Expires=l||900,A.label=6;case 6:return A.trys.push([6,9,,10]),b=new Bm(Qb({},p.config)),[4,jm(p,new Nm(g))];case 7:return w=A.sent(),_=Dm,[4,b.presign(w,{expiresIn:g.Expires})];case 8:return S=_.apply(void 0,[A.sent()]),nw(f,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+S),[2,S];case 9:throw E=A.sent(),ew.warn("get signed url error",E),nw(f,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+e),E;case 10:return[2]}}))}))},e.prototype.put=function(e,t,n){return Zb(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E,A,C,I;return Xb(this,(function(T){switch(T.label){case 0:return[4,this._ensureCredentials()];case 1:if(!T.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,n),i=r.bucket,o=r.track,s=r.progressCallback,a=r.contentType,u=r.contentDisposition,c=r.cacheControl,l=r.expires,f=r.metadata,d=r.tagging,h=r.acl,p=r.serverSideEncryption,g=r.SSECustomerAlgorithm,v=r.SSECustomerKey,y=r.SSECustomerKeyMD5,m=r.SSEKMSKeyId,b=a||"binary/octet-stream",w=this._prefix(r),S=w+e,ew.debug("put "+e+" to "+S),_={Bucket:i,Key:S,Body:t,ContentType:b},c&&(_.CacheControl=c),u&&(_.ContentDisposition=u),l&&(_.Expires=l),f&&(_.Metadata=f),d&&(_.Tagging=d),p&&(_.ServerSideEncryption=p,g&&(_.SSECustomerAlgorithm=g),v&&(_.SSECustomerKey=v),y&&(_.SSECustomerKeyMD5=y),m&&(_.SSEKMSKeyId=m)),E=new Mb.EventEmitter,A=new Jb(_,r,E),h&&(_.ACL=h),T.label=2;case 2:return T.trys.push([2,4,,5]),E.on("sendProgress",(function(e){s&&("function"==typeof s?s(e):ew.warn("progressCallback should be a function, not a "+typeof s))})),[4,A.upload()];case 3:return C=T.sent(),ew.debug("upload result",C),nw(o,"upload",{method:"put",result:"success"},null,"Upload success for "+e),[2,{key:e}];case 4:throw I=T.sent(),ew.warn("error uploading",I),nw(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+e),I;case 5:return[2]}}))}))},e.prototype.remove=function(e,t){return Zb(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Xb(this,(function(f){switch(f.label){case 0:return[4,this._ensureCredentials()];case 1:if(!f.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=this._prefix(n),s=o+e,a=this._createNewS3Client(n),ew.debug("remove "+e+" from "+s),u=new xm({Bucket:r,Key:s}),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=f.sent(),nw(i,"delete",{method:"remove",result:"success"},null,"Deleted "+e+" successfully"),[2,c];case 4:throw l=f.sent(),nw(i,"delete",{method:"remove",result:"failed"},null,"Deletion of "+e+" failed with "+l),l;case 5:return[2]}}))}))},e.prototype.list=function(e,t){return Zb(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return Xb(this,(function(h){switch(h.label){case 0:return[4,this._ensureCredentials()];case 1:if(!h.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=n.maxKeys,s=this._prefix(n),a=s+e,u=this._createNewS3Client(n),ew.debug("list "+e+" from "+a),c=new Lm({Bucket:r,Prefix:a,MaxKeys:o}),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,u.send(c)];case 3:return l=h.sent(),f=[],l&&l.Contents&&(f=l.Contents.map((function(e){return{key:e.Key.substr(s.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}}))),nw(i,"list",{method:"list",result:"success"},null,f.length+" items returned from list operation"),ew.debug("list",f),[2,f];case 4:throw d=h.sent(),ew.warn("list error",d),nw(i,"list",{method:"list",result:"failed"},null,"Listing items failed: "+d.message),d;case 5:return[2]}}))}))},e.prototype._ensureCredentials=function(){var e=this;return Wa.get().then((function(t){if(!t)return!1;var n=Wa.shear(t);return ew.debug("set credentials for storage",n),e._config.credentials=n,!0})).catch((function(e){return ew.warn("ensure credentials error",e),!1}))},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},e.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new fv(Qb(Qb({region:n,credentials:r,customUserAgent:Me()},i),{requestHandler:new Tb({},t)}))},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),iw=function(){return(iw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ow=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},sw=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},aw=new Pe("StorageClass"),uw=function(){function e(){this._config={},this._pluggables=[],aw.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));return void 0===t?(aw.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this;if(aw.debug("configure Storage"),!e)return this._config;var n=Cn.parseMobilehubConfig(e),r=Object.keys(n.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],o=function(e){return i.some((function(t){return t===e}))};return r&&r.find((function(e){return o(e)}))&&!n.Storage.AWSS3&&(n.Storage.AWSS3={}),Object.entries(n.Storage).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),r=t[0],i=t[1];r&&o(r)&&void 0!==i&&(n.Storage.AWSS3[r]=i,delete n.Storage[r])})),Object.keys(n.Storage).forEach((function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=iw(iw({},t._config[e]),n.Storage[e]))})),this._pluggables.forEach((function(e){e.configure(t._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new rw),this._config},e.prototype.get=function(e,t){return ow(this,void 0,void 0,(function(){var n,r,i;return sw(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(aw.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.get(e,t)]}))}))},e.prototype.put=function(e,t,n){return ow(this,void 0,void 0,(function(){var r,i,o;return sw(this,(function(s){return r=(n||{}).provider,i=void 0===r?"AWSS3":r,void 0===(o=this._pluggables.find((function(e){return e.getProviderName()===i})))&&(aw.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider")),[2,o.put(e,t,n)]}))}))},e.prototype.remove=function(e,t){return ow(this,void 0,void 0,(function(){var n,r,i;return sw(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(aw.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.remove(e,t)]}))}))},e.prototype.list=function(e,t){return ow(this,void 0,void 0,(function(){var n,r,i;return sw(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(aw.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.list(e,t)]}))}))},e}(),cw=function(){return(cw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},lw=new Pe("Storage"),fw=null,dw=function(){if(fw)return fw;lw.debug("Create Storage Instance, debug"),(fw=new uw).vault=new uw;var e=fw.configure;return fw.configure=function(t){lw.debug("storage configure called");var n=cw({},e.call(fw,t));Object.keys(n).forEach((function(e){"string"!=typeof n[e]&&(n[e]=cw(cw({},n[e]),{level:"private"}))})),lw.debug("storage vault configure called"),fw.vault.configure(n)},fw}();Ne.register(dw);var hw=function(){return(hw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},pw=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},gw=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},vw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},yw=new Pe("RestClient"),mw=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=Wa,this._options=e,yw.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return pw(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h,p,g,v,y=this;return gw(this,(function(m){switch(m.label){case 0:return yw.debug(t,e),o="us-east-1",s="execute-api",a=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,a=e.custom_header,o=e.region,s=e.service,r=this._parseUrl(e.endpoint)),u={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},c={},Le.isReactNative&&(l=Le.userAgent||"aws-amplify/0.1.x",c={"User-Agent":l}),f=Object.assign({},n),d=f.response,f.body&&("function"==typeof FormData&&f.body instanceof FormData?(c["Content-Type"]="multipart/form-data",u.data=f.body):(c["Content-Type"]="application/json; charset=UTF-8",u.data=JSON.stringify(f.body))),f.responseType&&(u.responseType=f.responseType),f.withCredentials&&(u.withCredentials=f.withCredentials),f.timeout&&(u.timeout=f.timeout),f.cancellableToken&&(u.cancelToken=f.cancellableToken.token),u.signerServiceInfo=f.signerServiceInfo,"function"!=typeof a?[3,2]:[4,a()];case 1:return p=m.sent(),[3,3];case 2:p=void 0,m.label=3;case 3:return h=p,u.headers=hw(hw(hw({},c),h),f.headers),(g=Rt(i,!0,!0)).search,v=vw(g,["search"]),u.url=Dt(hw(hw({},v),{query:hw(hw({},v.query),f.queryStringParameters||{})})),void 0!==u.headers.Authorization?(u.headers=Object.keys(u.headers).reduce((function(e,t){return u.headers[t]&&(e[t]=u.headers[t]),e}),{}),[2,this._request(u,d)]):[2,this.Credentials.get().then((function(r){return y._signed(hw({},u),r,d,{region:o,service:s}).catch((function(r){if(ln.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),s=new Date(o),a=ln.getDateFromHeaderString(u.headers["x-amz-date"]);if(ln.isClockSkewed(a,s))return ln.setClockOffset(s.getTime()-a.getTime()),y.ajax(e,t,n)}throw r}))}),(function(e){return yw.debug("No credentials available, the request will be unsigned"),y._request(u,d)}))]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},e.prototype.isCancel=function(e){return Cb.isCancel(e)},e.prototype.getCancellableToken=function(){return Cb.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,a=vw(e,["signerServiceInfo"]),u=o||this._region||this._options.region,c=i||this._service||this._options.service,l={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},f={region:u,service:c},d=Object.assign(f,s),h=_n.sign(a,l,d);return h.data&&(h.body=h.data),yw.debug("Signed Request: ",h),delete h.headers.host,Cb(h).then((function(e){return n?e:e.data})).catch((function(e){throw yw.debug(e),e}))},e.prototype._request=function(e,t){return void 0===t&&(t=!1),Cb(e).then((function(e){return t?e:e.data})).catch((function(e){throw yw.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),bw=function(){return(bw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ww=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Sw=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_w=new Pe("RestAPI"),Ew=function(){function e(e){this._api=null,this.Credentials=Wa,this._options=e,_w.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=bw(bw({},i),r);if(_w.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"==typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach((function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(_w.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return _w.debug("create Rest API instance"),this._api=new mw(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(PE){return Promise.reject(PE.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.endpoint=function(e){return ww(this,void 0,void 0,(function(){return Sw(this,(function(t){return[2,this._api.endpoint(e)]}))}))},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find((function(t){return t.name===e}));if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),Aw=new Ew(null);function Cw(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function Iw(e,t){var n=e.locationOffset.column-1,r=Tw(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,u=t.column+a,c=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(u,")\n")+function(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=0,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value[0];n=Math.max(n,u.length)}}catch(PE){i=!0,o=PE}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t.map((function(e){var t=e[0],r=e[1];return function(e,t){return Tw(e-t.length)+t}(n,t)+r})).join("\n")}([["".concat(s-1,": "),c[i-1]],["".concat(s,": "),c[i]],["",Tw(u-1)+"^"],["".concat(s+1,": "),c[i+1]]])}function Tw(e){return Array(e+1).join(" ")}function kw(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,u=n;if(!u&&a){var c=a[0];u=c&&c.loc&&c.loc.source}var l,f=r;!f&&a&&(f=a.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),f&&0===f.length&&(f=void 0),r&&n?l=r.map((function(e){return Cw(n,e)})):a&&(l=a.reduce((function(e,t){return t.loc&&e.push(Cw(t.loc.source,t.loc.start)),e}),[]));var d=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:u||void 0},positions:{value:f||void 0},originalError:{value:o},extensions:{value:d||void 0,enumerable:Boolean(d)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,kw):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}Ne.register(Aw),kw.prototype=Object.create(Error.prototype,{constructor:{value:kw},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(Iw(a.loc.source,Cw(a.loc.source,a.loc.start)))}}catch(PE){r=!0,i=PE}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var u=e.source,c=!0,l=!1,f=void 0;try{for(var d,h=e.locations[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;t.push(Iw(u,p))}}catch(PE){l=!0,f=PE}finally{try{c||null==h.return||h.return()}finally{if(l)throw f}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var Ow={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Pw={};function xw(e){return Boolean(e&&"string"==typeof e.kind)}function Nw(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function Lw(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ow,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],u=void 0,c=void 0,l=void 0,f=[],d=[],h=e;do{var p=++s===o.length,g=p&&0!==a.length;if(p){if(c=0===d.length?void 0:f[f.length-1],u=l,l=d.pop(),g){if(i)u=u.slice();else{var v={};for(var y in u)u.hasOwnProperty(y)&&(v[y]=u[y]);u=v}for(var m=0,b=0;b<a.length;b++){var w=a[b][0],S=a[b][1];i&&(w-=m),i&&null===S?(u.splice(w,1),m++):u[w]=S}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(c=l?i?s:o[s]:void 0,null==(u=l?l[c]:h))continue;l&&f.push(c)}var _=void 0;if(!Array.isArray(u)){if(!xw(u))throw new Error("Invalid AST Node: "+JSON.stringify(u));var E=Nw(t,u.kind,p);if(E){if((_=E.call(t,u,c,l,f,d))===Pw)break;if(!1===_){if(!p){f.pop();continue}}else if(void 0!==_&&(a.push([c,_]),!p)){if(!xw(_)){f.pop();continue}u=_}}}void 0===_&&g&&a.push([c,u]),p?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(u))?u:n[u.kind]||[],s=-1,a=[],l&&d.push(l),l=u)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:Mw})}var Mw={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Rw(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=jw("(",Rw(e.variableDefinitions,", "),")"),i=Rw(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?Rw([t,Rw([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+jw(" = ",r)+jw(" ",Rw(i," "))},SelectionSet:function(e){return Dw(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet;return Rw([jw("",t,": ")+n+jw("(",Rw(r,", "),")"),Rw(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+jw(" ",Rw(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return Rw(["...",jw("on ",t),Rw(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(jw("(",Rw(r,", "),")")," ")+"on ".concat(n," ").concat(jw("",Rw(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){var n=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(t?n:Bw(n),'\n"""'):'"""'.concat(n.replace(/"$/,'"\n'),'"""')}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+Rw(e.values,", ")+"]"},ObjectValue:function(e){return"{"+Rw(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+jw("(",Rw(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return Rw(["schema",Rw(t," "),Dw(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:Uw((function(e){return Rw(["scalar",e.name,Rw(e.directives," ")]," ")})),ObjectTypeDefinition:Uw((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return Rw(["type",t,jw("implements ",Rw(n," & ")),Rw(r," "),Dw(i)]," ")})),FieldDefinition:Uw((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(n.every((function(e){return-1===e.indexOf("\n")}))?jw("(",Rw(n,", "),")"):jw("(\n",Bw(Rw(n,"\n")),"\n)"))+": "+r+jw(" ",Rw(i," "))})),InputValueDefinition:Uw((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return Rw([t+": "+n,jw("= ",r),Rw(i," ")]," ")})),InterfaceTypeDefinition:Uw((function(e){var t=e.name,n=e.directives,r=e.fields;return Rw(["interface",t,Rw(n," "),Dw(r)]," ")})),UnionTypeDefinition:Uw((function(e){var t=e.name,n=e.directives,r=e.types;return Rw(["union",t,Rw(n," "),r&&0!==r.length?"= "+Rw(r," | "):""]," ")})),EnumTypeDefinition:Uw((function(e){var t=e.name,n=e.directives,r=e.values;return Rw(["enum",t,Rw(n," "),Dw(r)]," ")})),EnumValueDefinition:Uw((function(e){return Rw([e.name,Rw(e.directives," ")]," ")})),InputObjectTypeDefinition:Uw((function(e){var t=e.name,n=e.directives,r=e.fields;return Rw(["input",t,Rw(n," "),Dw(r)]," ")})),DirectiveDefinition:Uw((function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every((function(e){return-1===e.indexOf("\n")}))?jw("(",Rw(n,", "),")"):jw("(\n",Bw(Rw(n,"\n")),"\n)"))+" on "+Rw(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return Rw(["extend schema",Rw(t," "),Dw(n)]," ")},ScalarTypeExtension:function(e){return Rw(["extend scalar",e.name,Rw(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return Rw(["extend type",t,jw("implements ",Rw(n," & ")),Rw(r," "),Dw(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Rw(["extend interface",t,Rw(n," "),Dw(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return Rw(["extend union",t,Rw(n," "),r&&0!==r.length?"= "+Rw(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return Rw(["extend enum",t,Rw(n," "),Dw(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Rw(["extend input",t,Rw(n," "),Dw(r)]," ")}};function Uw(e){return function(t){return Rw([t.description,e(t)],"\n")}}function Rw(e,t){return e?e.filter((function(e){return e})).join(t||""):""}function Dw(e){return e&&0!==e.length?"{\n"+Bw(Rw(e,"\n"))+"\n}":""}function jw(e,t,n){return t?e+t+(n||""):""}function Bw(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function Fw(e){return(Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zw(e){return e&&"object"===Fw(e)?"function"==typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(zw).join(", ")+"]":"{"+Object.keys(e).map((function(t){return"".concat(t,": ").concat(zw(e[t]))})).join(", ")+"}":"string"==typeof e?'"'+e+'"':"function"==typeof e?"[function ".concat(e.name,"]"):String(e)}function qw(e,t){if(!e)throw new Error(t)}function Kw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vw,Hw=function(e,t,n){Kw(this,"body",void 0),Kw(this,"name",void 0),Kw(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||qw(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||qw(0,"column in locationOffset is 1-indexed and must be positive")};function $w(e,t,n){return new kw("Syntax Error: ".concat(n),void 0,e,[t])}function Gw(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=Ww(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;t.length>0&&Yw(t[0]);)t.shift();for(;t.length>0&&Yw(t[t.length-1]);)t.pop();return t.join("\n")}function Ww(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function Yw(e){return Ww(e)===e.length}function Jw(){return this.lastToken=this.token,this.token=this.lookahead()}function Qw(){var e=this.token;if(e.kind!==Zw.EOF)do{e=e.next||(e.next=iS(this,e))}while(e.kind===Zw.COMMENT);return e}Vw=Hw,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Vw.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Zw=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Xw(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var eS=String.prototype.charCodeAt,tS=String.prototype.slice;function nS(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function rS(e){return isNaN(e)?Zw.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function iS(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=eS.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===eS.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(o>=i)return new nS(Zw.EOF,i,i,s,a,t);var u=eS.call(r,o);switch(u){case 33:return new nS(Zw.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do{o=eS.call(s,++a)}while(null!==o&&(o>31||9===o));return new nS(Zw.COMMENT,t,a,n,r,i,tS.call(s,t+1,a))}(n,o,s,a,t);case 36:return new nS(Zw.DOLLAR,o,o+1,s,a,t);case 38:return new nS(Zw.AMP,o,o+1,s,a,t);case 40:return new nS(Zw.PAREN_L,o,o+1,s,a,t);case 41:return new nS(Zw.PAREN_R,o,o+1,s,a,t);case 46:if(46===eS.call(r,o+1)&&46===eS.call(r,o+2))return new nS(Zw.SPREAD,o,o+3,s,a,t);break;case 58:return new nS(Zw.COLON,o,o+1,s,a,t);case 61:return new nS(Zw.EQUALS,o,o+1,s,a,t);case 64:return new nS(Zw.AT,o,o+1,s,a,t);case 91:return new nS(Zw.BRACKET_L,o,o+1,s,a,t);case 93:return new nS(Zw.BRACKET_R,o,o+1,s,a,t);case 123:return new nS(Zw.BRACE_L,o,o+1,s,a,t);case 124:return new nS(Zw.PIPE,o,o+1,s,a,t);case 125:return new nS(Zw.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=eS.call(o,a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new nS(Zw.NAME,t,a,n,r,i,tS.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,c=!1;45===a&&(a=eS.call(s,++u));if(48===a){if((a=eS.call(s,++u))>=48&&a<=57)throw $w(e,u,"Invalid number, unexpected digit after 0: ".concat(rS(a),"."))}else u=oS(e,u,a),a=eS.call(s,u);46===a&&(c=!0,a=eS.call(s,++u),u=oS(e,u,a),a=eS.call(s,u));69!==a&&101!==a||(c=!0,43!==(a=eS.call(s,++u))&&45!==a||(a=eS.call(s,++u)),u=oS(e,u,a));return new nS(c?Zw.FLOAT:Zw.INT,t,u,r,i,o,tS.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===eS.call(r,o+1)&&34===eS.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=eS.call(o,s));){if(34===u&&34===eS.call(o,s+1)&&34===eS.call(o,s+2))return c+=tS.call(o,a,s),new nS(Zw.BLOCK_STRING,t,s+3,n,r,i,Gw(c));if(u<32&&9!==u&&10!==u&&13!==u)throw $w(e,s,"Invalid character within String: ".concat(rS(u),"."));92===u&&34===eS.call(o,s+1)&&34===eS.call(o,s+2)&&34===eS.call(o,s+3)?(c+=tS.call(o,a,s)+'"""',a=s+=4):++s}throw $w(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=eS.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=tS.call(o,a,s),new nS(Zw.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw $w(e,s,"Invalid character within String: ".concat(rS(u),"."));if(++s,92===u){switch(c+=tS.call(o,a,s-1),u=eS.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=sS(eS.call(o,s+1),eS.call(o,s+2),eS.call(o,s+3),eS.call(o,s+4));if(l<0)throw $w(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw $w(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw $w(e,s,"Unterminated string.")}(n,o,s,a,t)}throw $w(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(rS(e),".");if(39===e)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character ".concat(rS(e),".")}(u))}function oS(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=eS.call(r,++i)}while(o>=48&&o<=57);return i}throw $w(e,i,"Invalid number, expected digit but got: ".concat(rS(o),"."))}function sS(e,t,n,r){return aS(e)<<12|aS(t)<<8|aS(n)<<4|aS(r)}function aS(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}nS.prototype.toJSON=nS.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var uS=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),cS=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function lS(e,t){var n="string"==typeof e?new Hw(e):e;if(!(n instanceof Hw))throw new TypeError("Must provide Source. Received: ".concat(zw(n)));return function(e){var t=e.token;return{kind:uS.DOCUMENT,definitions:n_(e,Zw.SOF,dS,Zw.EOF),loc:WS(e,t)}}(function(e,t){var n=new nS(Zw.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:Jw,lookahead:Qw}}(n,t||{}))}function fS(e){var t=ZS(e,Zw.NAME);return{kind:uS.NAME,value:t.value,loc:WS(e,t)}}function dS(e){if(JS(e,Zw.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return hS(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return MS(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Zw.NAME)switch(t.value){case"schema":return function(e){var t=e.token;XS(e,"extend"),XS(e,"schema");var n=PS(e,!0),r=JS(e,Zw.BRACE_L)?n_(e,Zw.BRACE_L,DS,Zw.BRACE_R):[];if(0===n.length&&0===r.length)throw e_(e);return{kind:uS.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:WS(e,t)}}(e);case"scalar":return function(e){var t=e.token;XS(e,"extend"),XS(e,"scalar");var n=fS(e),r=PS(e,!0);if(0===r.length)throw e_(e);return{kind:uS.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:WS(e,t)}}(e);case"type":return function(e){var t=e.token;XS(e,"extend"),XS(e,"type");var n=fS(e),r=jS(e),i=PS(e,!0),o=BS(e);if(0===r.length&&0===i.length&&0===o.length)throw e_(e);return{kind:uS.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:WS(e,t)}}(e);case"interface":return function(e){var t=e.token;XS(e,"extend"),XS(e,"interface");var n=fS(e),r=PS(e,!0),i=BS(e);if(0===r.length&&0===i.length)throw e_(e);return{kind:uS.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:WS(e,t)}}(e);case"union":return function(e){var t=e.token;XS(e,"extend"),XS(e,"union");var n=fS(e),r=PS(e,!0),i=KS(e);if(0===r.length&&0===i.length)throw e_(e);return{kind:uS.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:WS(e,t)}}(e);case"enum":return function(e){var t=e.token;XS(e,"extend"),XS(e,"enum");var n=fS(e),r=PS(e,!0),i=VS(e);if(0===r.length&&0===i.length)throw e_(e);return{kind:uS.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:WS(e,t)}}(e);case"input":return function(e){var t=e.token;XS(e,"extend"),XS(e,"input");var n=fS(e),r=PS(e,!0),i=$S(e);if(0===r.length&&0===i.length)throw e_(e);return{kind:uS.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:WS(e,t)}}(e)}throw e_(e,t)}(e)}else{if(JS(e,Zw.BRACE_L))return hS(e);if(US(e))return MS(e)}throw e_(e)}function hS(e){if(JS(e,Zw.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return pS(e);case"fragment":return function(e){var t=e.token;if(XS(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:uS.FRAGMENT_DEFINITION,name:AS(e),variableDefinitions:vS(e),typeCondition:(XS(e,"on"),LS(e)),directives:PS(e,!1),selectionSet:bS(e),loc:WS(e,t)};return{kind:uS.FRAGMENT_DEFINITION,name:AS(e),typeCondition:(XS(e,"on"),LS(e)),directives:PS(e,!1),selectionSet:bS(e),loc:WS(e,t)}}(e)}else if(JS(e,Zw.BRACE_L))return pS(e);throw e_(e)}function pS(e){var t=e.token;if(JS(e,Zw.BRACE_L))return{kind:uS.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:bS(e),loc:WS(e,t)};var n,r=gS(e);return JS(e,Zw.NAME)&&(n=fS(e)),{kind:uS.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:vS(e),directives:PS(e,!1),selectionSet:bS(e),loc:WS(e,t)}}function gS(e){var t=ZS(e,Zw.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw e_(e,t)}function vS(e){return JS(e,Zw.PAREN_L)?n_(e,Zw.PAREN_L,yS,Zw.PAREN_R):[]}function yS(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:uS.VARIABLE_DEFINITION,variable:mS(e),type:(ZS(e,Zw.COLON),NS(e)),defaultValue:QS(e,Zw.EQUALS)?CS(e,!0):void 0,directives:PS(e,!0),loc:WS(e,t)}:{kind:uS.VARIABLE_DEFINITION,variable:mS(e),type:(ZS(e,Zw.COLON),NS(e)),defaultValue:QS(e,Zw.EQUALS)?CS(e,!0):void 0,loc:WS(e,t)}}function mS(e){var t=e.token;return ZS(e,Zw.DOLLAR),{kind:uS.VARIABLE,name:fS(e),loc:WS(e,t)}}function bS(e){var t=e.token;return{kind:uS.SELECTION_SET,selections:n_(e,Zw.BRACE_L,wS,Zw.BRACE_R),loc:WS(e,t)}}function wS(e){return JS(e,Zw.SPREAD)?function(e){var t,n=e.token;if(ZS(e,Zw.SPREAD),JS(e,Zw.NAME)&&"on"!==e.token.value)return{kind:uS.FRAGMENT_SPREAD,name:AS(e),directives:PS(e,!1),loc:WS(e,n)};"on"===e.token.value&&(e.advance(),t=LS(e));return{kind:uS.INLINE_FRAGMENT,typeCondition:t,directives:PS(e,!1),selectionSet:bS(e),loc:WS(e,n)}}(e):function(e){var t,n,r=e.token,i=fS(e);QS(e,Zw.COLON)?(t=i,n=fS(e)):n=i;return{kind:uS.FIELD,alias:t,name:n,arguments:SS(e,!1),directives:PS(e,!1),selectionSet:JS(e,Zw.BRACE_L)?bS(e):void 0,loc:WS(e,r)}}(e)}function SS(e,t){var n=t?ES:_S;return JS(e,Zw.PAREN_L)?n_(e,Zw.PAREN_L,n,Zw.PAREN_R):[]}function _S(e){var t=e.token;return{kind:uS.ARGUMENT,name:fS(e),value:(ZS(e,Zw.COLON),CS(e,!1)),loc:WS(e,t)}}function ES(e){var t=e.token;return{kind:uS.ARGUMENT,name:fS(e),value:(ZS(e,Zw.COLON),TS(e)),loc:WS(e,t)}}function AS(e){if("on"===e.token.value)throw e_(e);return fS(e)}function CS(e,t){var n=e.token;switch(n.kind){case Zw.BRACKET_L:return function(e,t){var n=e.token,r=t?TS:kS;return{kind:uS.LIST,values:t_(e,Zw.BRACKET_L,r,Zw.BRACKET_R),loc:WS(e,n)}}(e,t);case Zw.BRACE_L:return function(e,t){var n=e.token;ZS(e,Zw.BRACE_L);var r=[];for(;!QS(e,Zw.BRACE_R);)r.push(OS(e,t));return{kind:uS.OBJECT,fields:r,loc:WS(e,n)}}(e,t);case Zw.INT:return e.advance(),{kind:uS.INT,value:n.value,loc:WS(e,n)};case Zw.FLOAT:return e.advance(),{kind:uS.FLOAT,value:n.value,loc:WS(e,n)};case Zw.STRING:case Zw.BLOCK_STRING:return IS(e);case Zw.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:uS.BOOLEAN,value:"true"===n.value,loc:WS(e,n)}):"null"===n.value?(e.advance(),{kind:uS.NULL,loc:WS(e,n)}):(e.advance(),{kind:uS.ENUM,value:n.value,loc:WS(e,n)});case Zw.DOLLAR:if(!t)return mS(e)}throw e_(e)}function IS(e){var t=e.token;return e.advance(),{kind:uS.STRING,value:t.value,block:t.kind===Zw.BLOCK_STRING,loc:WS(e,t)}}function TS(e){return CS(e,!0)}function kS(e){return CS(e,!1)}function OS(e,t){var n=e.token;return{kind:uS.OBJECT_FIELD,name:fS(e),value:(ZS(e,Zw.COLON),CS(e,t)),loc:WS(e,n)}}function PS(e,t){for(var n=[];JS(e,Zw.AT);)n.push(xS(e,t));return n}function xS(e,t){var n=e.token;return ZS(e,Zw.AT),{kind:uS.DIRECTIVE,name:fS(e),arguments:SS(e,t),loc:WS(e,n)}}function NS(e){var t,n=e.token;return QS(e,Zw.BRACKET_L)?(t=NS(e),ZS(e,Zw.BRACKET_R),t={kind:uS.LIST_TYPE,type:t,loc:WS(e,n)}):t=LS(e),QS(e,Zw.BANG)?{kind:uS.NON_NULL_TYPE,type:t,loc:WS(e,n)}:t}function LS(e){var t=e.token;return{kind:uS.NAMED_TYPE,name:fS(e),loc:WS(e,t)}}function MS(e){var t=US(e)?e.lookahead():e.token;if(t.kind===Zw.NAME)switch(t.value){case"schema":return function(e){var t=e.token;XS(e,"schema");var n=PS(e,!0),r=n_(e,Zw.BRACE_L,DS,Zw.BRACE_R);return{kind:uS.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:WS(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=RS(e);XS(e,"scalar");var r=fS(e),i=PS(e,!0);return{kind:uS.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:WS(e,t)}}(e);case"type":return function(e){var t=e.token,n=RS(e);XS(e,"type");var r=fS(e),i=jS(e),o=PS(e,!0),s=BS(e);return{kind:uS.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:WS(e,t)}}(e);case"interface":return function(e){var t=e.token,n=RS(e);XS(e,"interface");var r=fS(e),i=PS(e,!0),o=BS(e);return{kind:uS.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:WS(e,t)}}(e);case"union":return function(e){var t=e.token,n=RS(e);XS(e,"union");var r=fS(e),i=PS(e,!0),o=KS(e);return{kind:uS.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:WS(e,t)}}(e);case"enum":return function(e){var t=e.token,n=RS(e);XS(e,"enum");var r=fS(e),i=PS(e,!0),o=VS(e);return{kind:uS.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:WS(e,t)}}(e);case"input":return function(e){var t=e.token,n=RS(e);XS(e,"input");var r=fS(e),i=PS(e,!0),o=$S(e);return{kind:uS.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:WS(e,t)}}(e);case"directive":return function(e){var t=e.token,n=RS(e);XS(e,"directive"),ZS(e,Zw.AT);var r=fS(e),i=zS(e);XS(e,"on");var o=function(e){QS(e,Zw.PIPE);var t=[];do{t.push(GS(e))}while(QS(e,Zw.PIPE));return t}(e);return{kind:uS.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:WS(e,t)}}(e)}throw e_(e,t)}function US(e){return JS(e,Zw.STRING)||JS(e,Zw.BLOCK_STRING)}function RS(e){if(US(e))return IS(e)}function DS(e){var t=e.token,n=gS(e);ZS(e,Zw.COLON);var r=LS(e);return{kind:uS.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:WS(e,t)}}function jS(e){var t=[];if("implements"===e.token.value){e.advance(),QS(e,Zw.AMP);do{t.push(LS(e))}while(QS(e,Zw.AMP)||e.options.allowLegacySDLImplementsInterfaces&&JS(e,Zw.NAME))}return t}function BS(e){return e.options.allowLegacySDLEmptyFields&&JS(e,Zw.BRACE_L)&&e.lookahead().kind===Zw.BRACE_R?(e.advance(),e.advance(),[]):JS(e,Zw.BRACE_L)?n_(e,Zw.BRACE_L,FS,Zw.BRACE_R):[]}function FS(e){var t=e.token,n=RS(e),r=fS(e),i=zS(e);ZS(e,Zw.COLON);var o=NS(e),s=PS(e,!0);return{kind:uS.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:WS(e,t)}}function zS(e){return JS(e,Zw.PAREN_L)?n_(e,Zw.PAREN_L,qS,Zw.PAREN_R):[]}function qS(e){var t=e.token,n=RS(e),r=fS(e);ZS(e,Zw.COLON);var i,o=NS(e);QS(e,Zw.EQUALS)&&(i=TS(e));var s=PS(e,!0);return{kind:uS.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:WS(e,t)}}function KS(e){var t=[];if(QS(e,Zw.EQUALS)){QS(e,Zw.PIPE);do{t.push(LS(e))}while(QS(e,Zw.PIPE))}return t}function VS(e){return JS(e,Zw.BRACE_L)?n_(e,Zw.BRACE_L,HS,Zw.BRACE_R):[]}function HS(e){var t=e.token,n=RS(e),r=fS(e),i=PS(e,!0);return{kind:uS.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:WS(e,t)}}function $S(e){return JS(e,Zw.BRACE_L)?n_(e,Zw.BRACE_L,qS,Zw.BRACE_R):[]}function GS(e){var t=e.token,n=fS(e);if(cS.hasOwnProperty(n.value))return n;throw e_(e,t)}function WS(e,t){if(!e.options.noLocation)return new YS(t,e.lastToken,e.source)}function YS(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function JS(e,t){return e.token.kind===t}function QS(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function ZS(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw $w(e.source,n.start,"Expected ".concat(t,", found ").concat(Xw(n)))}function XS(e,t){var n=e.token;if(n.kind===Zw.NAME&&n.value===t)return e.advance(),n;throw $w(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Xw(n)))}function e_(e,t){var n=t||e.token;return $w(e.source,n.start,"Unexpected ".concat(Xw(n)))}function t_(e,t,n,r){ZS(e,t);for(var i=[];!QS(e,r);)i.push(n(e));return i}function n_(e,t,n,r){ZS(e,t);for(var i=[n(e)];!QS(e,r);)i.push(n(e));return i}YS.prototype.toJSON=YS.prototype.inspect=function(){return{start:this.start,end:this.end}};var r_=function(){return(r_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i_=new Pe("AbstractPubSubProvider"),o_=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=r_(r_({},e),this._config),i_.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return r_({},this._config)},enumerable:!0,configurable:!0}),e}(),s_=ct((function(e,t){var n;n=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r=1,i=2,o=3,s=4,a=5,u=6,c=7,l=8,f=9,d=10,h=11,p=12,g=13,v=14,y=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(S(b.INVALID_TYPE,[typeof e[n],n]))}},m=function(e,t){return function(){return e.apply(t,arguments)}},b={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},w={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},S=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},_=[0,6,77,81,73,115,100,112,3],E=[0,4,77,81,84,84,4],A=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function C(e,t){var n,r=t,l=e[t],d=l>>4,p=l&=15;t+=1;var g=0,v=1;do{if(t==e.length)return[null,r];g+=(127&(n=e[t++]))*v,v*=128}while(0!=(128&n));var y=t+g;if(y>e.length)return[null,r];var m=new A(d);switch(d){case i:1&e[t++]&&(m.sessionPresent=!0),m.returnCode=e[t++];break;case o:var b=p>>1&3,w=k(e,t),S=x(e,t+=2,w);t+=w,b>0&&(m.messageIdentifier=k(e,t),t+=2);var _=new U(e.subarray(t,y));1==(1&p)&&(_.retained=!0),8==(8&p)&&(_.duplicate=!0),_.qos=b,_.destinationName=S,m.payloadMessage=_;break;case s:case a:case u:case c:case h:m.messageIdentifier=k(e,t);break;case f:m.messageIdentifier=k(e,t),t+=2,m.returnCode=e.subarray(t,y)}return[m,y]}function I(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function T(e,t,n,r){return P(e,n,r=I(t,n,r)),r+t}function k(e,t){return 256*e[t]+e[t+1]}function O(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function P(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var s=e.charCodeAt(++i);if(isNaN(s))throw new Error(S(b.MALFORMED_UNICODE,[o,s]));o=s-56320+(o-55296<<10)+65536}o<=127?t[r++]=o:o<=2047?(t[r++]=o>>6&31|192,t[r++]=63&o|128):o<=65535?(t[r++]=o>>12&15|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18&7|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}function x(e,t,n){for(var r,i="",o=t;o<t+n;){var s=e[o++];if(s<128)r=s;else{var a=e[o++]-128;if(a<0)throw new Error(S(b.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var u=e[o++]-128;if(u<0)throw new Error(S(b.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16)]));if(s<240)r=4096*(s-224)+64*a+u;else{var c=e[o++]-128;if(c<0)throw new Error(S(b.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));if(!(s<248))throw new Error(S(b.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));r=262144*(s-240)+4096*a+64*u+c}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}A.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,i=[],s=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case r:switch(this.mqttVersion){case 3:n+=_.length+3;break;case 4:n+=E.length+3}n+=O(this.clientId)+2,void 0!==this.willMessage&&(n+=O(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),n+=e.byteLength+2),void 0!==this.userName&&(n+=O(this.userName)+2),void 0!==this.password&&(n+=O(this.password)+2);break;case l:t|=2;for(var a=0;a<this.topics.length;a++)i[a]=O(this.topics[a]),n+=i[a]+2;n+=this.requestedQos.length;break;case d:for(t|=2,a=0;a<this.topics.length;a++)i[a]=O(this.topics[a]),n+=i[a]+2;break;case u:t|=2;break;case o:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(s=O(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;n+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer))}var f=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),h=f.length+1,p=new ArrayBuffer(n+h),g=new Uint8Array(p);if(g[0]=t,g.set(f,1),this.type==o)h=T(this.payloadMessage.destinationName,s,g,h);else if(this.type==r){switch(this.mqttVersion){case 3:g.set(_,h),h+=_.length;break;case 4:g.set(E,h),h+=E.length}var v=0;this.cleanSession&&(v=2),void 0!==this.willMessage&&(v|=4,v|=this.willMessage.qos<<3,this.willMessage.retained&&(v|=32)),void 0!==this.userName&&(v|=128),void 0!==this.password&&(v|=64),g[h++]=v,h=I(this.keepAliveInterval,g,h)}switch(void 0!==this.messageIdentifier&&(h=I(this.messageIdentifier,g,h)),this.type){case r:h=T(this.clientId,O(this.clientId),g,h),void 0!==this.willMessage&&(h=T(this.willMessage.destinationName,O(this.willMessage.destinationName),g,h),h=I(e.byteLength,g,h),g.set(e,h),h+=e.byteLength),void 0!==this.userName&&(h=T(this.userName,O(this.userName),g,h)),void 0!==this.password&&(h=T(this.password,O(this.password),g,h));break;case o:g.set(c,h);break;case l:for(a=0;a<this.topics.length;a++)h=T(this.topics[a],i[a],g,h),g[h++]=this.requestedQos[a];break;case d:for(a=0;a<this.topics.length;a++)h=T(this.topics[a],i[a],g,h)}return p};var N=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new A(p).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(b.PING_TIMEOUT.code,S(b.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},L=function(e,t,n,r){var i,o,s;t||(t=30),this.timeout=setTimeout((i=n,o=e,s=r,function(){return i.apply(o,s)}),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},M=function(t,r,i,o,s){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(S(b.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(S(b.UNSUPPORTED,["ArrayBuffer"]));for(var a in this._trace("Paho.Client",t,r,i,o,s),this.host=r,this.port=i,this.path=o,this.uri=t,this.clientId=s,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=o?":"+o:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==a.indexOf("Sent:"+this._localKey)&&0!==a.indexOf("Received:"+this._localKey)||this.restore(a)};M.prototype.host=null,M.prototype.port=null,M.prototype.path=null,M.prototype.uri=null,M.prototype.clientId=null,M.prototype.socket=null,M.prototype.connected=!1,M.prototype.maxMessageIdentifier=65536,M.prototype.connectOptions=null,M.prototype.hostIndex=null,M.prototype.onConnected=null,M.prototype.onConnectionLost=null,M.prototype.onMessageDelivered=null,M.prototype.onMessageArrived=null,M.prototype.traceFunction=null,M.prototype._msg_queue=null,M.prototype._buffered_msg_queue=null,M.prototype._connectTimeout=null,M.prototype.sendPinger=null,M.prototype.receivePinger=null,M.prototype._reconnectInterval=1,M.prototype._reconnecting=!1,M.prototype._reconnectTimeout=null,M.prototype.disconnectedPublishing=!1,M.prototype.disconnectedBufferSize=5e3,M.prototype.receiveBuffer=null,M.prototype._traceBuffer=null,M.prototype._MAX_TRACE_ENTRIES=100,M.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(S(b.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(S(b.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},M.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(S(b.INVALID_STATE,["not connected"]));var n=new A(l);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:S(e)})}),t.timeout&&(n.timeOut=new L(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:b.SUBSCRIBE_TIMEOUT.code,errorMessage:S(b.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(S(b.INVALID_STATE,["not connected"]));var n=new A(d);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new L(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:b.UNSUBSCRIBE_TIMEOUT.code,errorMessage:S(b.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.send=function(e){this._trace("Client.send",e);var t=new A(o);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(S(b.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(S(b.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},M.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(S(b.INVALID_STATE,["not connecting or connected"]));var e=new A(v);this._notify_msg_sent[e]=m(this._disconnected,this),this._schedule_message(e)},M.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},M.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},M.prototype.stopTrace=function(){delete this._traceBuffer},M.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=m(this._on_socket_open,this),this.socket.onmessage=m(this._on_socket_message,this),this.socket.onerror=m(this._on_socket_error,this),this.socket.onclose=m(this._on_socket_close,this),this.sendPinger=new N(this,this.connectOptions.keepAliveInterval),this.receivePinger=new N(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new L(this,this.connectOptions.timeout,this._disconnected,[b.CONNECT_TIMEOUT.code,S(b.CONNECT_TIMEOUT)])},M.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},M.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case o:t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,a=0;a<s.length;a++)s[a]<=15?i=i+"0"+s[a].toString(16):i+=s[a].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence);break;default:throw Error(S(b.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},M.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new A(r.type,r);switch(r.type){case o:for(var s=r.payloadMessage.payloadHex,a=new ArrayBuffer(s.length/2),u=new Uint8Array(a),c=0;s.length>=2;){var l=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),u[c++]=l}var f=new U(u);f.qos=r.payloadMessage.qos,f.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(f.duplicate=!0),r.payloadMessage.retained&&(f.retained=!0),i.payloadMessage=f;break;default:throw Error(S(b.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},M.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},M.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===o&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},M.prototype._on_socket_open=function(){var e=new A(r,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},M.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},M.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var o=C(t,i),s=o[0];if(i=o[1],null===s)break;n.push(s)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(u){var a="undefined"==u.hasOwnProperty("stack")?u.stack.toString():"No Error Stack Available";return void this._disconnected(b.INTERNAL_ERROR.code,S(b.INTERNAL_ERROR,[u.message,a]))}return n},M.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case i:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var r=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+r.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var l=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+l.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(b.CONNACK_RETURNCODE.code,S(b.CONNACK_RETURNCODE,[e.returnCode,w[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var d=[];for(var p in this._sentMessages)this._sentMessages.hasOwnProperty(p)&&d.push(this._sentMessages[p]);if(this._buffered_msg_queue.length>0)for(var y=null;y=this._buffered_msg_queue.pop();)d.push(y),this.onMessageDelivered&&(this._notify_msg_sent[y]=this.onMessageDelivered(y.payloadMessage));d=d.sort((function(e,t){return e.sequence-t.sequence}));for(var m=0,_=d.length;m<_;m++)if((r=d[m]).type==o&&r.pubRecReceived){var E=new A(u,{messageIdentifier:r.messageIdentifier});this._schedule_message(E)}else this._schedule_message(r);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var C=!1;this._reconnecting&&(C=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(C,this._wsuri),this._process_queue();break;case o:this._receivePublish(e);break;case s:(r=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage));break;case a:(r=this._sentMessages[e.messageIdentifier])&&(r.pubRecReceived=!0,E=new A(u,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",r),this._schedule_message(E));break;case u:l=this._receivedMessages[e.messageIdentifier],n.removeItem("Received:"+this._localKey+e.messageIdentifier),l&&(this._receiveMessage(l),delete this._receivedMessages[e.messageIdentifier]);var I=new A(c,{messageIdentifier:e.messageIdentifier});this._schedule_message(I);break;case c:r=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage);break;case f:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),128===e.returnCode[0]?r.onFailure&&r.onFailure(e.returnCode):r.onSuccess&&r.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case h:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),r.callback&&r.callback(),delete this._sentMessages[e.messageIdentifier]);break;case g:this.sendPinger.reset();break;case v:this._disconnected(b.INVALID_MQTT_MESSAGE_TYPE.code,S(b.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(b.INVALID_MQTT_MESSAGE_TYPE.code,S(b.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(k){var T="undefined"==k.hasOwnProperty("stack")?k.stack.toString():"No Error Stack Available";return void this._disconnected(b.INTERNAL_ERROR.code,S(b.INTERNAL_ERROR,[k.message,T]))}},M.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(b.SOCKET_ERROR.code,S(b.SOCKET_ERROR,[e.data]))},M.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(b.SOCKET_CLOSE.code,S(b.SOCKET_CLOSE))},M.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},M.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new A(s,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new A(a,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},M.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},M.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},M.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},M.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new L(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=b.OK.code,t=S(b.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==b.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},M.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},M.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var U=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw S(b.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,o=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:x(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(O(t)),n=new Uint8Array(e);return P(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(S(b.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(S(b.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return o},set:function(e){o=e}}})};return{Client:function(e,t,n,r){var i;if("string"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){r=t;var o=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(S(b.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),n=o[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(S(b.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(S(b.INVALID_TYPE,[typeof n,"path"]));var s=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(s?"["+e+"]":e)+":"+t+n}for(var a=0,u=0;u<r.length;u++){var c=r.charCodeAt(u);55296<=c&&c<=56319&&u++,a++}if("string"!=typeof r||a>65535)throw new Error(S(b.INVALID_ARGUMENT,[r,"clientId"]));var l=new M(i,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(S(b.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(S(b.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(S(b.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(S(b.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return l.clientId},set:function(){throw new Error(S(b.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return l.onConnected},set:function(e){if("function"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"onConnected"]));l.onConnected=e}},disconnectedPublishing:{get:function(){return l.disconnectedPublishing},set:function(e){l.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return l.disconnectedBufferSize},set:function(e){l.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return l.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"onConnectionLost"]));l.onConnectionLost=e}},onMessageDelivered:{get:function(){return l.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"onMessageDelivered"]));l.onMessageDelivered=e}},onMessageArrived:{get:function(){return l.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"onMessageArrived"]));l.onMessageArrived=e}},trace:{get:function(){return l.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(S(b.INVALID_TYPE,[typeof e,"onTrace"]));l.traceFunction=e}}}),this.connect=function(e){if(y(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(S(b.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(S(b.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof U))throw new Error(S(b.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(S(b.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(S(b.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(S(b.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw new Error(S(b.INVALID_TYPE,[typeof e.hosts[r],"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw new Error(S(b.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(S(b.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(S(b.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(S(b.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(S(b.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw new Error(S(b.INVALID_TYPE,[typeof e.ports[r],"connectOptions.ports["+r+"]"]));var o=e.hosts[r],s=e.ports[r],a=-1!==o.indexOf(":");i="ws://"+(a?"["+o+"]":o)+":"+s+n,e.uris.push(i)}}}l.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(y(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(S(b.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));l.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(y(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");l.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof U)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(S(b.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new U(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof U)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(S(b.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new U(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.disconnect=function(){l.disconnect()},this.getTraceLog=function(){return l.getTraceLog()},this.startTrace=function(){l.startTrace()},this.stopTrace=function(){l.stopTrace()},this.isConnected=function(){return l.connected}},Message:U}}(void 0!==at?at:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=n()})),a_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u_=function(){return(u_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},l_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},d_=new Pe("MqttOverWSProvider");var h_,p_,g_,v_,y_,m_,b_=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return c_(this,void 0,void 0,(function(){var n;return l_(this,(function(r){return(n=this.promises.get(e))||(n=t(e),this.promises.set(e,n)),[2,n]}))}))},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),w_="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",S_=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,u_(u_({},t),{clientId:t.clientId||vi.v4()}))||this;return n._clientsQueue=new b_,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return a_(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[w_]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=f_(e,["clientId","errorCode"]);if(0!==r){d_.warn(n,JSON.stringify(u_({errorCode:r},i),null,2));var o=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach((function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach((function(t,n){t.delete(e),0===t.size&&o.push(n)}))})),this._clientIdObservers.delete(n),o.forEach((function(e){t._topicObservers.delete(e)}))}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return c_(this,void 0,void 0,(function(){var e,r=this;return l_(this,(function(i){switch(i.label){case 0:return d_.debug("Creating new MQTT client",n),(e=new s_.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=f_(e,["errorCode"]);r.onDisconnect(u_({clientId:n,errorCode:t},i))},[4,new Promise((function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:n})}))];case 1:return i.sent(),[2,e]}}))}))},t.prototype.connect=function(e,t){return void 0===t&&(t={}),c_(this,void 0,void 0,(function(){var n=this;return l_(this,(function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,(function(e){return n.newClient(u_(u_({},t),{clientId:e}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.disconnect=function(e){return c_(this,void 0,void 0,(function(){var t;return l_(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e,(function(){return null}))];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),[2]}}))}))},t.prototype.publish=function(e,t){return c_(this,void 0,void 0,(function(){var n,r,i,o;return l_(this,(function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),d_.debug("Publishing to topic(s)",n.join(","),r),n.forEach((function(e){return o.send(e,r)})),[2]}}))}))},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach((function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)}));var r=JSON.parse(t);"object"==typeof r&&(r[w_]=e),n.forEach((function(e){e.forEach((function(e){return e.next(r)}))}))}catch(i){d_.warn("Error handling message",i,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return d_.debug("Subscribing to topic(s)",r.join(",")),new cn((function(e){var i;r.forEach((function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)}));var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),c_(n,void 0,void 0,(function(){var n,o,a,u;return l_(this,(function(c){switch(c.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=c.sent(),[3,3];case 2:a=n,c.label=3;case 3:o=a,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=c.sent(),r.forEach((function(e){i.subscribe(e)})),[3,7];case 6:return u=c.sent(),e.error(u),[3,7];case 7:return[2]}}))})),function(){return d_.debug("Unsubscribing from topic(s)",r.join(",")),i&&(n._clientIdObservers.get(s).delete(e),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach((function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))}))),null}}))},t}(o_),__=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},A_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},C_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},I_=new Pe("AWSAppSyncProvider"),T_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return __(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return E_(this,void 0,void 0,(function(){return A_(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter((function(t){return C_(t,2)[1].clientId===e})).map((function(e){return C_(e,1)[0]})).forEach((function(e){return t._cleanUpForTopic(e)}))},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter((function(e){return C_(e,2)[1].clientId===n})).map((function(e){return C_(e,1)[0]})).forEach((function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach((function(e){e.closed||e.error(i)})),t._topicObservers.delete(e))})),this._cleanUp(n))},t.prototype.disconnect=function(t){return E_(this,void 0,void 0,(function(){return A_(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,(function(){return null}))];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}}))}))},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new cn((function(r){var i=[].concat(e);return I_.debug("Subscribing to topic(s)",i.join(",")),E_(n,void 0,void 0,(function(){var e,n,o,s,a,u=this;return A_(this,(function(c){switch(c.label){case 0:return i.forEach((function(e){u._topicObservers.has(e)||u._topicObservers.set(e,new Set),u._topicObservers.get(e).add(r)})),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map((function(e){var t=C_(e,2),n=t[0];return[t[1].topic,n]})),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C_(arguments[t]));return e}(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce((function(e,t){var r=n.find((function(e){return e.topics.indexOf(t)>-1}));if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e}),{})),[4,Promise.all(a.map((function(e){var t=C_(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return E_(u,void 0,void 0,(function(){var e,t,i=this;return A_(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach((function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))})),[2,e]}}))}))})))];case 1:return c.sent(),[2]}}))})),function(){I_.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach((function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some((function(e){return e===t}))||n.disconnect(t.clientId)),n._topicObservers.delete(e)}))}}));return cn.from(r).map((function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce((function(e,t){var n=C_(t,2),i=n[0],o=n[1];return e[r||i]=o,e}),{}),e}))},t}(S_),k_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O_=function(){return(O_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},P_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},x_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},N_=new Pe("AWSAppSyncRealTimeProvider"),L_="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",M_=[400,401,403];(p_=h_||(h_={})).GQL_CONNECTION_INIT="connection_init",p_.GQL_CONNECTION_ERROR="connection_error",p_.GQL_CONNECTION_ACK="connection_ack",p_.GQL_START="start",p_.GQL_START_ACK="start_ack",p_.GQL_DATA="data",p_.GQL_CONNECTION_KEEP_ALIVE="ka",p_.GQL_STOP="stop",p_.GQL_COMPLETE="complete",p_.GQL_ERROR="error",(v_=g_||(g_={}))[v_.PENDING=0]="PENDING",v_[v_.CONNECTED=1]="CONNECTED",v_[v_.FAILED=2]="FAILED",(m_=y_||(y_={}))[m_.CLOSED=0]="CLOSED",m_[m_.READY=1]="READY",m_[m_.CONNECTING=2]="CONNECTING";var U_,R_,D_={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},j_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=y_.CLOSED,t.keepAliveTimeout=3e5,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return k_(t,e),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return P_(this,void 0,void 0,(function(){return x_(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.subscribe=function(e,t){var n=this,r=t.appSyncGraphqlEndpoint;return new cn((function(e){if(r){var i=vi.v4();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}),function(){return P_(n,void 0,void 0,(function(){var e,t;return x_(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==g_.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),N_.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}}))}))}}e.error({errors:[O_({},new kw("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t=e.options,n=e.observer,r=e.subscriptionId;return P_(this,void 0,void 0,(function(){var e,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E,A,C,I,T,k,O=this;return x_(this,(function(P){switch(P.label){case 0:return e=t.appSyncGraphqlEndpoint,i=t.authenticationType,o=t.query,s=t.variables,a=t.apiKey,u=t.region,c=t.graphql_headers,l=void 0===c?function(){return{}}:c,f=t.additionalHeaders,d=void 0===f?{}:f,h=g_.PENDING,p={query:o,variables:s},this.subscriptionObserverMap.set(r,{observer:n,query:o,variables:s,subscriptionState:h,startAckTimeoutId:null}),g=JSON.stringify(p),y=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,payload:g,canonicalUri:"",region:u})];case 1:return m=[O_.apply(void 0,y.concat([P.sent()]))],[4,l()];case 2:v=O_.apply(void 0,[O_.apply(void 0,[O_.apply(void 0,m.concat([P.sent()])),d]),(k={},k["x-amz-user-agent"]=pu.userAgent,k)]),b={id:r,payload:{data:g,extensions:{authorization:O_({},v)}},type:h_.GQL_START},w=JSON.stringify(b),P.label=3;case 3:return P.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,region:u})];case 4:return P.sent(),[3,6];case 5:return S=P.sent(),N_.debug({err:S}),_=S.message,E=void 0===_?"":_,n.error({errors:[O_({},new kw("Connection failed: "+E))]}),n.complete(),"function"==typeof(A=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&A(),[2];case 6:return C=this.subscriptionObserverMap.get(r),I=C.subscriptionFailedCallback,T=C.subscriptionReadyCallback,this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:h,variables:s,query:o,subscriptionReadyCallback:T,subscriptionFailedCallback:I,startAckTimeoutId:setTimeout((function(){O._timeoutStartSubscriptionAck.call(O,r)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(w),[2]}}))}))},t.prototype._waitForSubscriptionToBeConnected=function(e){return P_(this,void 0,void 0,(function(){var t=this;return x_(this,(function(n){return this.subscriptionObserverMap.get(e).subscriptionState===g_.PENDING?[2,new Promise((function(n,r){var i=t.subscriptionObserverMap.get(e),o=i.observer,s=i.subscriptionState,a=i.variables,u=i.query;t.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:u,subscriptionReadyCallback:n,subscriptionFailedCallback:r})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===y_.READY){var t={id:e,type:h_.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(PE){N_.debug({err:PE})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{N_.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=y_.CLOSED}else this.socketStatus=y_.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){N_.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,c=s.query,l=void 0===c?"":c,f=s.variables,d=void 0===f?{}:f,h=s.startAckTimeoutId,p=s.subscriptionReadyCallback,g=s.subscriptionFailedCallback;if(N_.debug({id:r,observer:u,query:l,variables:d}),o===h_.GQL_DATA&&i&&i.data)u?u.next(i):N_.debug("observer not found for id: "+r);else if(o!==h_.GQL_START_ACK){if(o===h_.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,U_.TIMEOUT_DISCONNECT),this.keepAliveTimeout));if(o===h_.GQL_ERROR){v=g_.FAILED;this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:h,subscriptionReadyCallback:p,subscriptionFailedCallback:g,subscriptionState:v}),u.error({errors:[O_({},new kw("Connection failed: "+JSON.stringify(i)))]}),clearTimeout(h),u.complete(),"function"==typeof g&&g()}}else{N_.debug("subscription ready for "+JSON.stringify({query:l,variables:d})),"function"==typeof p&&p(),clearTimeout(h),function(e,t,n){Fe.dispatch("api",{event:e,data:t,message:n},"PubSub",L_)}(U_.SUBSCRIPTION_ACK,{query:l,variables:d},"Connection established for subscription");var v=g_.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:null,subscriptionState:v,subscriptionReadyCallback:p,subscriptionFailedCallback:g})}},t.prototype._errorDisconnect=function(e){N_.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach((function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[O_({},new kw(e))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=y_.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,i=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:g_.FAILED}),n&&!n.closed&&(n.error({errors:[O_({},new kw("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),N_.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i})))},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region;if(this.socketStatus!==y_.READY)return new Promise((function(e,s){return P_(t,void 0,void 0,(function(){var t,a,u,c,l,f,d,h,p,g;return x_(this,(function(v){switch(v.label){case 0:if(this.promiseArray.push({res:e,rej:s}),this.socketStatus!==y_.CLOSED)return[3,5];v.label=1;case 1:return v.trys.push([1,4,,5]),this.socketStatus=y_.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",a=n.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),u="{}",f=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:u,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o})];case 2:return c=f.apply(l,[v.sent()]),d=Mu.Buffer.from(c).toString("base64"),h=Mu.Buffer.from(u).toString("base64"),p=a+"?header="+d+"&payload="+h,[4,this._initializeRetryableHandshake({awsRealTimeUrl:p})];case 3:return v.sent(),this.promiseArray.forEach((function(e){var t=e.res;N_.debug("Notifying connection successful"),t()})),this.socketStatus=y_.READY,this.promiseArray=[],[3,5];case 4:return g=v.sent(),this.promiseArray.forEach((function(e){return(0,e.rej)(g)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=y_.CLOSED,[3,5];case 5:return[2]}}))}))}))},t.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return P_(this,void 0,void 0,(function(){return x_(this,(function(e){switch(e.label){case 0:return N_.debug("Initializaling retryable Handshake"),[4,un(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e){var t=e.awsRealTimeUrl;return P_(this,void 0,void 0,(function(){var e,n,r,i=this;return x_(this,(function(o){switch(o.label){case 0:N_.debug("Initializing handshake "+t),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise((function(e,n){var r=new WebSocket(t,"graphql-ws");r.onerror=function(){N_.debug("WebSocket connection error")},r.onclose=function(){n(new Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,e()}}))];case 2:return o.sent(),[4,new Promise((function(e,t){var n=!1;i.awsRealTimeSocket.onerror=function(e){N_.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){N_.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){N_.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,u=(void 0===a?{}:a).connectionTimeoutMs,c=void 0===u?3e5:u;if(s===h_.GQL_CONNECTION_ACK)return n=!0,i.keepAliveTimeout=c,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){N_.debug(e),i._errorDisconnect(U_.CONNECTION_CLOSED)},i.awsRealTimeSocket.onclose=function(e){N_.debug("WebSocket closed "+e.reason),i._errorDisconnect(U_.CONNECTION_CLOSED)},void e("Cool, connected to AWS AppSyncRealTime");if(s===h_.GQL_CONNECTION_ERROR){var l=o.payload,f=(void 0===l?{}:l).errors,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(void 0===f?[]:f,1)[0],h=void 0===d?{}:d,p=h.errorType,g=void 0===p?"":p,v=h.errorCode;t({errorType:g,errorCode:void 0===v?0:v})}};var r={type:h_.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r)),setTimeout(function(){n||t(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(i),15e3)}))];case 3:return o.sent(),[3,5];case 4:throw e=o.sent(),n=e.errorType,r=e.errorCode,M_.includes(r)?new sn(n):n?new Error(n):e;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region;return P_(this,void 0,void 0,(function(){var e,a,u;return x_(this,(function(c){switch(c.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(a=e[t])?(N_.debug("Authentication type "+t+" not supported"),[2,""]):(u=Rt(i).host,[4,a({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:u})]);case 1:return[2,c.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return P_(this,void 0,void 0,(function(){return x_(this,(function(e){switch(e.label){case 0:return[4,el.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return P_(this,void 0,void 0,(function(){var e,n,r;return x_(this,(function(i){switch(i.label){case 0:return[4,cl.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,el.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return P_(this,void 0,void 0,(function(){var e,r;return x_(this,(function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return P_(this,void 0,void 0,(function(){var e,o,s;return x_(this,(function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,Wa.get().then((function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}}))];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:O_({},D_)},[2,_n.sign(s,o,e).headers]}}))}))},t.prototype._ensureCredentials=function(){return Wa.get().then((function(e){if(!e)return!1;var t=Wa.shear(e);return N_.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return N_.warn("ensure credentials error",e),!1}))},t}(o_),B_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},F_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},z_=nt().isNode,q_=new Pe("PubSub"),K_=new(function(){function e(e){this._options=e,q_.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new T_(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new j_(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return q_.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return B_(this,void 0,void 0,(function(){return F_(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.getProviderByName=function(e){return e===du?this.awsAppSyncProvider:e===hu?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return B_(this,void 0,void 0,(function(){return F_(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t){if(z_&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");q_.debug("subscribe options",t);var n=this.getProviders(t);return new cn((function(r){var i=n.map((function(n){return{provider:n,observable:n.subscribe(e,t)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})}));return function(){return i.forEach((function(e){return e.unsubscribe()}))}}))},e}())(null);Ne.register(K_),(R_=U_||(U_={})).CONNECTION_CLOSED="Connection closed",R_.TIMEOUT_DISCONNECT="Timeout disconnect",R_.SUBSCRIPTION_ACK="Subscription ack";var V_=function(){return(V_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},$_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},G_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},W_=new Pe("GraphQLAPI"),Y_=function(e,t){return void 0===t&&(t={}),{query:e,variables:t}},J_=function(){function e(e){this._api=null,this.Auth=el,this.Cache=cl,this.Credentials=Wa,this._options=e,W_.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=V_(V_({},i),r);return W_.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(W_.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return W_.debug("create Rest instance"),this._options?(this._api=new mw(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e){return H_(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u;return $_(this,(function(c){switch(c.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,i={},e||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!r)throw new Error("No api-key configured");return i={Authorization:null,"X-Api-Key":r},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!c.sent())throw new Error("No credentials");return[3,12];case 4:return o=void 0,[4,cl.getItem("federatedInfo")];case 5:return(s=c.sent())?(o=s.token,[3,8]):[3,6];case 6:return[4,el.currentAuthenticatedUser()];case 7:(a=c.sent())&&(o=a.token),c.label=8;case 8:if(!o)throw new Error("No federated jwt");return i={Authorization:o},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return u=c.sent(),i={Authorization:u.getAccessToken().getJwtToken()},[3,12];case 11:return i={Authorization:null},[3,12];case 12:return[2,i]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=lS(e);return G_(t.definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=lS("string"==typeof n?n:Lw(n)),a=G_(s.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],u=(void 0===a?{}:a).operation;switch(u){case"query":case"mutation":var c=this._api.getCancellableToken(),l={cancellableToken:c},f=this._graphql({query:s,variables:i,authMode:o},t,l);return this._api.updateRequestToBeCancellable(f,c),f;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+u)},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),H_(this,void 0,void 0,(function(){var e,s,a,u,c,l,f,d,h,p,g,v,y,m,b,w,S,_,E,A,C;return $_(this,(function(I){switch(I.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:I.sent(),I.label=2;case 2:return e=this._options,s=e.aws_appsync_region,a=e.aws_appsync_graphqlEndpoint,u=e.graphql_headers,c=void 0===u?function(){return{}}:u,l=e.graphql_endpoint,f=e.graphql_endpoint_iam_region,h=[{}],(p=!l)?[4,this._headerBasedAuth(o)]:[3,4];case 3:p=I.sent(),I.label=4;case 4:return g=[V_.apply(void 0,h.concat([p]))],(v=l)?f?[4,this._headerBasedAuth(o)]:[3,6]:[3,8];case 5:return y=I.sent(),[3,7];case 6:y={Authorization:null},I.label=7;case 7:v=y,I.label=8;case 8:return m=[V_.apply(void 0,g.concat([v]))],[4,c({query:r,variables:i})];case 9:if(d=V_.apply(void 0,[V_.apply(void 0,[V_.apply(void 0,m.concat([I.sent()])),t]),!l&&(C={},C["x-amz-user-agent"]=pu.userAgent,C)]),b={query:Lw(r),variables:i},w=Object.assign({headers:d,body:b,signerServiceInfo:{service:l?"execute-api":"appsync",region:l?f:s}},n),!(S=l||a))throw{data:{},errors:[new kw("No graphql endpoint provided.")]};I.label=10;case 10:return I.trys.push([10,12,,13]),[4,this._api.post(S,w)];case 11:return _=I.sent(),[3,13];case 12:if(E=I.sent(),this._api.isCancel(E))throw E;return _={data:{},errors:[new kw(E.message)]},[3,13];case 13:if((A=_.errors)&&A.length)throw _;return[2,_]}}))}))},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,u=o.aws_appsync_authenticationType,c=o.aws_appsync_apiKey,l=o.graphql_headers,f=void 0===l?function(){return{}}:l,d=i||u||"AWS_IAM";if(K_&&"function"==typeof K_.subscribe)return K_.subscribe("",{provider:hu,appSyncGraphqlEndpoint:a,authenticationType:d,apiKey:c,query:Lw(n),region:s,variables:r,graphql_headers:f,additionalHeaders:t});throw W_.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then((function(t){if(!t)return!1;var n=e.Credentials.shear(t);return W_.debug("set credentials for api",n),!0})).catch((function(e){return W_.warn("ensure credentials error",e),!1}))},e}(),Q_=new J_(null);Ne.register(Q_);var Z_=function(){return(Z_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},X_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},eE=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},tE=new Pe("API"),nE=new(function(){function e(e){this.Auth=el,this.Cache=cl,this.Credentials=Wa,this._options=e,this._restApi=new Ew(e),this._graphqlApi=new J_(e),tE.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Z_(Z_({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},e.prototype.endpoint=function(e){return X_(this,void 0,void 0,(function(){return eE(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}())(null);Ne.register(nE);function rE(e){let t,n,r,i;t=new Ce({props:{segment:e[0]}});const o=e[4].default,s=B(o,e,e[3],null);return{c(){k(t.$$.fragment),n=N(),r=_("main"),s&&s.c()},l(e){O(t.$$.fragment,e),n=L(e),r=E(e,"MAIN",{});var i=A(r);s&&s.l(i),i.forEach(g)},m(e,o){P(t,e,o),d(e,n,o),d(e,r,o),s&&s.m(r,null),i=!0},p(e,[t]){s&&s.p&&8&t&&F(s,o,e,e[3],t,null,null)},i(e){i||(h(t.$$.fragment,e),h(s,e),i=!0)},o(e){p(t.$$.fragment,e),p(s,e),i=!1},d(e){x(t,e),e&&g(n),e&&g(r),s&&s.d(e)}}}function iE(e,t,n){let r;v(e,ue,(e=>n(2,r=e)));let i,o,{$$slots:s={},$$scope:a}=t;return Ne.configure(Ie),m((async()=>{try{if(J.setAwsAmplify(Ne),J.setAwsAPI(nE),J.setAwsAuth(el),J.setAwsGraphqlOperation(Y_),J.setAwsStorage(dw),console.log("layout",{Amplify:Ne,API:nE,graphqlOperation:Y_,Auth:el,Storage:dw}),i=te.subscribe((e=>{e&&n(1,o=e)})),!o){console.log("layout: !cognitoUser");const e=await Z();console.log(e),te.setauthUser(e)}}catch(e){console.log(e)}})),b((()=>{i&&i()})),e.$$set=e=>{"$$scope"in e&&n(3,a=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&o&&(console.log("layout, cognito user:",{cognitoUser:o}),console.log("email:",o.attributes.email),console.log({session:ue}),console.log("session.user",r),console.log(te.getValue),console.log("session.adnanTest",r.adnanTest),G("/"))},[undefined,o,r,a,s]}class oE extends a{constructor(e){super(),u(this,e,iE,rE,c,{})}}var sE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oE,load:async function({page:e,fetch:t,session:n,context:r}){return{}}});function aE(e){let t,n,r,i,o,s,a,u=e[0].message+"";return{c(){t=_("div"),n=_("h1"),r=M(e[1]),i=N(),o=_("p"),s=M(u),a=N(),this.h()},l(c){t=E(c,"DIV",{class:!0});var l=A(t);n=E(l,"H1",{class:!0});var f=A(n);r=U(f,e[1]),f.forEach(g),i=L(l),o=E(l,"P",{class:!0});var d=A(o);s=U(d,u),d.forEach(g),a=L(l),l.forEach(g),this.h()},h(){C(n,"class","svelte-1rahwcp"),C(o,"class","svelte-1rahwcp"),C(t,"class","col-md-9")},m(e,u){d(e,t,u),D(t,n),D(n,r),D(t,i),D(t,o),D(o,s),D(t,a)},p(e,t){2&t&&R(r,e[1]),1&t&&u!==(u=e[0].message+"")&&R(s,u)},d(e){e&&g(t)}}}function uE(e){let t,n,r,i;return document.title=t=e[1],r=new oE({props:{$$slots:{default:[aE]},$$scope:{ctx:e}}}),{c(){n=N(),k(r.$$.fragment)},l(e){z('[data-svelte="svelte-1o9r2ue"]',document.head).forEach(g),n=L(e),O(r.$$.fragment,e)},m(e,t){d(e,n,t),P(r,e,t),i=!0},p(e,[n]){(!i||2&n)&&t!==(t=e[1])&&(document.title=t);const o={};7&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){i||(h(r.$$.fragment,e),i=!0)},o(e){p(r.$$.fragment,e),i=!1},d(e){e&&g(n),x(r,e)}}}function cE(e,t,n){let{error:r}=t,{status:i}=t;return e.$$set=e=>{"error"in e&&n(0,r=e.error),"status"in e&&n(1,i=e.status)},[r,i]}class lE extends a{constructor(e){super(),u(this,e,cE,uE,c,{error:0,status:1})}}function fE(e){let t,n,r;const i=[e[4]||{}];var o=e[2][1];function s(e){let t={};for(let n=0;n<i.length;n+=1)t=q(t,i[n]);return{props:t}}return o&&(t=new o(s())),{c(){t&&k(t.$$.fragment),n=f()},l(e){t&&O(t.$$.fragment,e),n=f()},m(e,i){t&&P(t,e,i),d(e,n,i),r=!0},p(e,r){const a=16&r?K(i,[V(e[4]||{})]):{};if(o!==(o=e[2][1])){if(t){I();const e=t;p(e.$$.fragment,1,0,(()=>{x(e,1)})),T()}o?(t=new o(s()),k(t.$$.fragment),h(t.$$.fragment,1),P(t,n.parentNode,n)):t=null}else o&&t.$set(a)},i(e){r||(t&&h(t.$$.fragment,e),r=!0)},o(e){t&&p(t.$$.fragment,e),r=!1},d(e){e&&g(n),t&&x(t,e)}}}function dE(e){let t,n;return t=new lE({props:{status:e[0],error:e[1]}}),{c(){k(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,r){P(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.status=e[0]),2&n&&(r.error=e[1]),t.$set(r)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function hE(e){let t,n,r,i;const o=[dE,fE],s=[];function a(e,t){return e[1]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=f()},l(e){n.l(e),r=f()},m(e,n){s[t].m(e,n),d(e,r,n),i=!0},p(e,i){let u=t;t=a(e),t===u?s[t].p(e,i):(I(),p(s[u],1,1,(()=>{s[u]=null})),T(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),h(n,1),n.m(r.parentNode,r))},i(e){i||(h(n),i=!0)},o(e){p(n),i=!1},d(e){s[t].d(e),e&&g(r)}}}function pE(e){let t,n=e[6]&&gE(e);return{c(){t=_("div"),n&&n.c(),this.h()},l(e){t=E(e,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,class:!0});var r=A(t);n&&n.l(r),r.forEach(g),this.h()},h(){C(t,"id","svelte-announcer"),C(t,"aria-live","assertive"),C(t,"aria-atomic","true"),C(t,"class","svelte-1x3qdwd")},m(e,r){d(e,t,r),n&&n.m(t,null)},p(e,r){e[6]?n?n.p(e,r):(n=gE(e),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},d(e){e&&g(t),n&&n.d()}}}function gE(e){let t,n;return{c(){t=M("Navigated to "),n=M(e[7])},l(r){t=U(r,"Navigated to "),n=U(r,e[7])},m(e,r){d(e,t,r),d(e,n,r)},p(e,t){128&t&&R(n,e[7])},d(e){e&&g(t),e&&g(n)}}}function vE(e){let t,n,r,i;const o=[e[3]||{}];let s={$$slots:{default:[hE]},$$scope:{ctx:e}};for(let u=0;u<o.length;u+=1)s=q(s,o[u]);t=new e[8]({props:s});let a=e[5]&&pE(e);return{c(){k(t.$$.fragment),n=N(),a&&a.c(),r=f()},l(e){O(t.$$.fragment,e),n=L(e),a&&a.l(e),r=f()},m(e,o){P(t,e,o),d(e,n,o),a&&a.m(e,o),d(e,r,o),i=!0},p(e,[n]){const i=8&n?K(o,[V(e[3]||{})]):{};2071&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),e[5]?a?a.p(e,n):(a=pE(e),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(e){i||(h(t.$$.fragment,e),i=!0)},o(e){p(t.$$.fragment,e),i=!1},d(e){x(t,e),e&&g(n),a&&a.d(e),e&&g(r)}}}function yE(e,t,n){let{status:r}=t,{error:i}=t,{stores:o}=t,{page:s}=t,{components:a}=t,{props_0:u=null}=t,{props_1:c=null}=t;const l=a[0];H("__svelte__",o),$(o.page.notify);let f=!1,d=!1,h=null;return m((()=>{const e=o.page.subscribe((()=>{f&&(n(6,d=!0),n(7,h=document.title))}));return n(5,f=!0),e})),e.$$set=e=>{"status"in e&&n(0,r=e.status),"error"in e&&n(1,i=e.error),"stores"in e&&n(9,o=e.stores),"page"in e&&n(10,s=e.page),"components"in e&&n(2,a=e.components),"props_0"in e&&n(3,u=e.props_0),"props_1"in e&&n(4,c=e.props_1)},e.$$.update=()=>{1536&e.$$.dirty&&o.page.set(s)},[r,i,a,u,c,f,d,h,l,o,s]}class mE extends a{constructor(e){super(),u(this,e,yE,vE,c,{status:0,error:1,stores:9,page:10,components:2,props_0:3,props_1:4})}}let bE;const wE={},SE=function(e,t){if(!t)return e();if(void 0===bE){const e=document.createElement("link").relList;bE=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in wE)return;wE[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":bE,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},_E=[()=>SE((()=>import("./pages/index.svelte-171e4366.js")),["/_app/pages/index.svelte-171e4366.js","/_app/assets/pages/index.svelte-226ff78d.css","/_app/chunks/index-2b079c53.js"]),()=>SE((()=>import("./pages/signin.svelte-bfdf2626.js")),["/_app/pages/signin.svelte-bfdf2626.js","/_app/chunks/index-2b079c53.js","/_app/chunks/aws-add3e71f.js","/_app/assets/aws-d93494e5.css","/_app/chunks/auth-d2666f70.js","/_app/chunks/validation-4fe040bf.js","/_app/assets/validation-fe291d94.css","/_app/chunks/paths-d3b7dcf1.js"]),()=>SE((()=>import("./pages/signup.svelte-fc034a4f.js")),["/_app/pages/signup.svelte-fc034a4f.js","/_app/chunks/index-2b079c53.js","/_app/chunks/aws-add3e71f.js","/_app/assets/aws-d93494e5.css","/_app/chunks/auth-d2666f70.js","/_app/chunks/validation-4fe040bf.js","/_app/assets/validation-fe291d94.css"]),()=>SE((()=>import("./pages/about/index.svelte-7ceeb6fa.js")),["/_app/pages/about/index.svelte-7ceeb6fa.js","/_app/chunks/index-2b079c53.js"]),()=>SE((()=>import("./pages/three.svelte-7804f6f1.js")),["/_app/pages/three.svelte-7804f6f1.js","/_app/chunks/index-2b079c53.js"]),()=>SE((()=>import("./pages/two.svelte-24edcece.js")),["/_app/pages/two.svelte-24edcece.js","/_app/chunks/index-2b079c53.js","/_app/chunks/auth-d2666f70.js"])],EE=[[/^\/$/,[_E[0]]],[/^\/localStore\/?$/],[/^\/signin\/?$/,[_E[1]]],[/^\/signup\/?$/,[_E[2]]],[/^\/about\/?$/,[_E[3]]],[/^\/store\/?$/],[/^\/three\/?$/,[_E[4]]],[/^\/two\/?$/,[_E[5]]]];function AE(){return{x:pageXOffset,y:pageYOffset}}class CE{constructor({base:e,routes:t}){this.base=e,this.routes=t}init(e){let t;this.renderer=e,e.router=this,"scrollRestoration"in history&&(history.scrollRestoration="manual"),addEventListener("beforeunload",(()=>{history.scrollRestoration="auto"})),addEventListener("load",(()=>{history.scrollRestoration="manual"})),addEventListener("scroll",(()=>{clearTimeout(t),t=setTimeout((()=>{const e=o(o({},history.state||{}),{"sveltekit:scroll":AE()});history.replaceState(e,document.title,window.location.href)}),50)})),addEventListener("click",(e=>{if(e.button||1!==e.which)return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(e.defaultPrevented)return;const t=re(e.target);if(!t)return;if(!t.href)return;const n="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name,r=String(n?t.href.baseVal:t.href);if(r===location.href)return void(location.hash||e.preventDefault());if(t.hasAttribute("download")||"external"===t.getAttribute("rel"))return;if(n?t.target.baseVal:t.target)return;const i=new URL(r);if(i.pathname===location.pathname&&i.search===location.search)return;const o=this.parse(i);if(o){const n=t.hasAttribute("sveltekit:noscroll");history.pushState({},"",i.href),this._navigate(o,n?AE():null,[],i.hash),e.preventDefault()}})),addEventListener("popstate",(e=>{if(e.state){const t=new URL(location.href),n=this.parse(t);n?this._navigate(n,e.state["sveltekit:scroll"],[]):location.href=location.href}})),document.body.setAttribute("tabindex","-1"),history.replaceState(history.state||{},"",location.href)}parse(e){if(e.origin!==location.origin)return null;if(!e.pathname.startsWith(this.base))return null;const t=e.pathname.slice(this.base.length)||"/",n=this.routes.filter((([e])=>e.test(t)));if(n.length>0){const r=new URLSearchParams(e.search);return{id:`${t}?${r}`,routes:n,path:t,query:r}}}async goto(e,{noscroll:t=!1,replaceState:n=!1}={},r){const i=new URL(e,function(e){let t=e.baseURI;if(!t){const n=e.getElementsByTagName("base");t=n.length?n[0].href:e.URL}return t}(document)),o=this.parse(i);return o?(history[n?"replaceState":"pushState"]({},"",e),this._navigate(o,t?AE():null,r,i.hash)):(location.href=e,new Promise((()=>{})))}async _navigate(e,t,n,r){this.renderer.notify({path:e.path,query:e.query}),location.pathname.endsWith("/")&&"/"!==location.pathname&&history.replaceState({},"",`${location.pathname.slice(0,-1)}${location.search}`),await this.renderer.update(e,n),document.body.focus();const i=r&&document.getElementById(r.slice(1));t?scrollTo(t.x,t.y):i?scrollTo(0,i.getBoundingClientRect().top+scrollY):scrollTo(0,0)}}function IE(e){if(e.error){const t="string"==typeof e.error?new Error(e.error):e.error,n=e.status;return t instanceof Error?!n||n<400||n>599?(console.warn('"error" returned from load() without a valid status code  defaulting to 500'),{status:500,error:t}):{status:n,error:t}:{status:500,error:new Error(`"error" property returned from load() must be a string or instance of Error, received type "${typeof t}"`)}}if(e.redirect){if(!e.status||3!==Math.floor(e.status/100))return{status:500,error:new Error('"redirect" property returned from load() must be accompanied by a 3xx status code')};if("string"!=typeof e.redirect)return{status:500,error:new Error('"redirect" property returned from load() must be a string')}}return e}function TE(e){const t=ee(e);let n=!0;return{notify:function(){n=!0,t.update((e=>e))},set:function(e){n=!1,t.set(e)},subscribe:function(e){let r;return t.subscribe((t=>{(void 0===r||n&&t!==r)&&e(r=t)}))}}}class kE{constructor({Root:e,layout:t,target:n,session:r,host:i}){this.Root=e,this.layout=t,this.host=i,this.router=null,this.target=n,this.started=!1,this.current={page:null,query:null,session_changed:!1,nodes:[],contexts:[]},this.caches=new Map,this.prefetching={id:null,promise:null},this.stores={page:TE({}),navigating:ee(null),session:ee(r)},this.$session=null,this.root=null;const o=e=>{const t=re(e.target);t&&t.hasAttribute("sveltekit:prefetch")&&this.prefetch(new URL(t.href))};let s;addEventListener("touchstart",o),addEventListener("mousemove",(e=>{clearTimeout(s),s=setTimeout((()=>{o(e)}),20)}));let a=!1;this.stores.session.subscribe((async e=>{if(this.$session=e,!a)return;this.current.session_changed=!0;const t=this.router.parse(new URL(location.href));this.update(t,[])})),a=!0}async start(e,t,n){const r={stores:this.stores,error:n,status:t,page:e.page};if(n)r.components=[this.layout.default];else{const t=await this._hydrate(e);if(t.redirect)return void(location.href=new URL(t.redirect,location.href).href);Object.assign(r,t.props),this.current=t.state}this.root=new this.Root({target:this.target,props:r,hydrate:!0}),this.started=!0}notify({path:e,query:t}){dispatchEvent(new CustomEvent("sveltekit:navigation-start")),this.stores.navigating.set({from:{path:this.current.page.path,query:this.current.page.query},to:{path:e,query:t}})}async update(e,t){const n=this.token={},r=await this._get_navigation_result(e);if(n===this.token){if(r.reload)location.reload();else if(r.redirect){if(!(t.length>10||t.includes(this.current.page.path)))return void this.router.goto(r.redirect,{replaceState:!0},[...t,this.current.page.path]);this.root.$set({status:500,error:new Error("Redirect loop")})}else this.current=r.state,this.root.$set(r.props),this.stores.navigating.set(null),await 0;dispatchEvent(new CustomEvent("sveltekit:navigation-end")),this.prefetching.promise=null,this.prefetching.id=null}}async prefetch(e){const t=this.router.parse(e);if(t)return this.prefetching.promise=this._get_navigation_result(t),this.prefetching.id=t.id,await this.prefetching.promise;throw new Error(`Could not prefetch ${e.href}`)}async _get_navigation_result(e){if(this.prefetching.id===e.id)return this.prefetching.promise;for(let t=0;t<e.routes.length;t+=1){const n=e.routes[t],[r,i,o]=n;if(1===n.length)return{reload:!0};let s=t+1;for(;s<e.routes.length;){const t=e.routes[s];if(t[0].toString()!==r.toString())break;1!==t.length&&t[1].forEach((e=>e())),s+=1}const a=i.map((e=>e())),u={host:this.host,path:e.path,params:o?o(n[0].exec(e.path)):{},query:e.query},c=await this._hydrate({nodes:a,page:u});if(c)return c}return{state:{page:null,query:null,session_changed:!1,contexts:[],nodes:[]},props:{status:404,error:new Error(`Not found: ${e.path}`)}}}async _hydrate({nodes:e,page:i}){const s={status:200,error:null,components:[]},a=(e,i)=>{if(!this.started){const i="string"==typeof e?e:e.url,o=document.querySelector(`script[type="svelte-data"][url="${i}"]`);if(o){const e=JSON.parse(o.textContent),{body:i}=e,s=((e,i)=>{var o={};for(var s in e)t.call(e,s)&&i.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&n)for(var s of n(e))i.indexOf(s)<0&&r.call(e,s)&&(o[s]=e[s]);return o})(e,["body"]);return Promise.resolve(new Response(i,s))}}return fetch(e,i)},u=i.query.toString(),c={page:i,query:u,session_changed:!1,nodes:[],contexts:[]},l=[this.layout,...e],f=[];let d,h;const p={params:Object.keys(i.params).filter((e=>!this.current.page||this.current.page.params[e]!==i.params[e])),query:u!==this.current.query,session:this.current.session_changed,context:!1};try{for(let e=0;e<l.length;e+=1){const t=this.current.nodes[e],n=this.current.contexts[e],{default:r,preload:g,load:v}=await l[e];if(s.components[e]=r,g)throw new Error("preload has been deprecated in favour of load. Please consult the documentation: https://kit.svelte.dev/docs#load");if(!t||r!==t.component||p.params.some((e=>t.uses.params.has(e)))||p.query&&t.uses.query||p.session&&t.uses.session||p.context&&t.uses.context){const t=i.path+u,n=this.caches.get(r),l=n&&n.get(t);let g,y;if(!l||p.context&&l.node.uses.context){g={component:r,uses:{params:new Set,query:!1,session:!1,context:!1}};const e={};for(const n in i.params)Object.defineProperty(e,n,{get:()=>(g.uses.params.add(n),i.params[n]),enumerable:!0});const t=this.$session;if(v&&(y=await v.call(null,{page:{host:i.host,path:i.path,params:e,get query(){return g.uses.query=!0,i.query}},get session(){return g.uses.session=!0,t},get context(){return g.uses.context=!0,o({},d)},fetch:a}),!y))return}else({node:g,loaded:y}=l);if(y){if(y=IE(y),y.error)return s.error=y.error,s.status=y.status||500,c.nodes=[],{redirect:h,props:s,state:c};if(y.redirect){h=y.redirect;break}if(y.context&&(p.context=!0,d=o(o({},d),y.context)),y.maxage){this.caches.has(r)||this.caches.set(r,new Map);const e=this.caches.get(r),n={node:g,loaded:y};e.set(t,n);let i=!1;const o=setTimeout((()=>{s()}),1e3*y.maxage),s=()=>{e.get(t)===n&&e.delete(t),a(),clearTimeout(o)},a=this.stores.session.subscribe((()=>{i&&s()}));i=!0}f[e]=y.props}c.nodes[e]=g,c.contexts[e]=d}else c.nodes[e]=t,c.contexts[e]=d=n}(await Promise.all(f)).forEach(((e,t)=>{e&&(s[`props_${t}`]=e)})),this.current.page&&i.path===this.current.page.path&&!p.query||(s.page=i)}catch(g){s.error=g,s.status=500,c.nodes=[]}return{redirect:h,props:s,state:c}}}async function OE({paths:e,target:t,session:n,error:r,status:i,nodes:o,page:s}){const a=new CE({base:e.base,routes:EE}),u=new kE({Root:mE,layout:sE,target:t,session:n,host:s.host});X({router:a,renderer:u}),ne(e),await u.start({nodes:o,page:s},i,r),a.init(u),dispatchEvent(new CustomEvent("sveltekit:start"))}export{OE as start};
